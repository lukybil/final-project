{"version":3,"sources":["img/content/colleseum.jpg","img/content/madrid.jpg","img/content/vienna.jpg","img/content/london.jpg","User/User.js","NotificationProvider/NotificationProvider.js","NotificationProvider/useNotificationProvider.js","withHooks.js","Tile/Tile.js","DB.js","img/default-profile-picture.png","img/logo_placeholder.png","SignIn/SignIn.js","MySnackbar.js","UserMenu/UserMenu.js","Nav/Nav.js","NewExperience/NewExperience.js","Search/Search.js","img/content/athens.jpg","Home/Home.js","DialogButton/DialogButton.js","decorators/restrictAccess.js","Experiences/Experiences.js","UserProfile/UserProfile.js","NewCollection/NewCollection.js","Footer/Footer.js","NotificationProvider/NotificationInterface.js","SearchResults/SearchResults.js","App.js","reportWebVitals.js","index.js"],"names":["UserAvatar","props","user","profileImg","className","style","backgroundColor","defaultAvatarColor","username","charAt","toUpperCase","src","alt","User","this","isWithUserCard","undefined","userCard","numberLikes","to","React","Component","NotificationProviderContext","createContext","snackbar","addSnackbar","removeSnackbar","NotificationProvider","children","useState","setSnackbar","contextValue","useCallback","severity","message","open","Provider","value","useNotificationProvider","useContext","withHooks","Tile","state","isPopupOpen","setState","img","h1","likes","onClick","type","e","exp","id","h2","Dialog","onClose","handlePopupClose","bind","scroll","maxWidth","popupElement","generatePopup","CollectionTile","collection","name","position","db","getUser","description","TagPill","checkExpAndFill","Array","isArray","forEach","prop","Set","usefulLinks","tags","comments","InputWithSend","input","target","closest","querySelector","postComment","isHeartPresent","dateToFullFormat","date","content","setTimeout","getCurrentUser","openSignInNeedSnackbar","likeExp","showHeart","console","log","deleteExp","map","link","href","i","length","push","generateComment","tag","likeHeart","infoTableRows","attr","label","slice","budget","from","notes","deleteButton","onDoubleClick","handleImageDoubleClick","size","guestUser","email","deletedExp","country","city","documentation","transportation","accomodation","DB","appSetCurrentUser","colors","usersMap","Map","password","getRandomColor","topUsersList","currentUser","nextExpId","experiences","Madrid","Date","Rome","collections","updateUserLikesAmount","updateTopUsersList","setInterval","localStorage","setItem","JSON","stringify","alert","protoUsersMap","parse","getItem","protoExperiences","protoCurrentUser","protoNextExpId","get","comment","startup","sort","a","b","newUsersMap","amount","topExp","splice","filter","resultExps","keyword","toLowerCase","Object","keys","val","String","includes","matchCounter","fieldsSet","author","location","loop1","j","getExpById","add","some","confirmPassword","has","isEmailAlreadyUsed","u","set","setCurrentUser","removeItem","newUser","index","Math","floor","random","userExps","getDate","toString","padStart","getMonth","getFullYear","getHours","getMinutes","expId","isSignedIn","collectionId","collectionTemplate","userCollections","isFormSignIn","preventDefault","n","document","signupUser","onFormSuccess","signInUser","setNavState","isSignInOpen","text","form","placeholder","onSignupSubmit","genSwitchButton","onSignInSubmit","MySnackbar","Snackbar","autoHideDuration","anchorOrigin","vertical","horizontal","ClickAwayListenerProps","onClickAway","Alert","sx","width","isEditProfileOpen","mixedColors","newProfileImg","getValueByName","updateUser","ClickAwayListener","handleClickAway","handleEditProfile","handleSettings","handleSignOut","handleEditProfileClose","disabled","onChange","onColorChange","select","onProfileImgChange","onEditProfileSubmit","NavButton","picture","SignInButton","isUserMenuOpen","activeClassName","logoutUser","userPanel","userMenu","openSettings","loggedIn","path","element","Brand","generateMenuButton","generateSignInButton","handleSignInClose","Tags","tagPills","PillCheckbox","NewExperience","onFileChange","file","Promise","resolve","reject","reader","FileReader","onload","event","result","readAsDataURL","fileToDataUri","then","dataUri","mainImg","querySelectorAll","addExp","onMainImgChange","onSubmit","getInputValueByName","wrapperName","setInputValueByName","AdvancedOptions","useSearchParams","searchParams","navigate","useNavigate","useEffect","searchObject","checked","action","Search","advanced","setAdvanced","handleChange","onKeyPress","Home","Grid","container","spacing","item","xs","md","Athens","Vienna","London","DialogButton","isNewExpOpen","callback","restrictAccess","UserRow","UserRanking","users","topUsers","WrappedComponent","interval","clearInterval","getTopExp","getTopUsers","NewCollection","addCollection","UserProfile","tabValue","newValue","params","viewedUser","topUserExp","getTopExpByUser","getCollectionsByUser","Tabs","handleTabChange","TabIndicatorProps","textColor","color","classes","root","Tab","useParams","Footer","liAuthors","array","temp","shuffleArray","Logo","NotificationInterface","SearchResults","getFilteredExps","first","counter","gridTiles","round","logo","Header","App","isDatabaseLoaded","loadFromLocalStorage","window","onbeforeunload","saveIntoLocalStorage","pageContent","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","basename","getElementById"],"mappings":"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","file":"static/js/main.eb2b4da4.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/colleseum.9508f973.jpg\";","export default __webpack_public_path__ + \"static/media/madrid.34925a2b.jpg\";","export default __webpack_public_path__ + \"static/media/vienna.4dc4c94d.jpg\";","export default __webpack_public_path__ + \"static/media/london.425bc017.jpg\";","import React from \"react\";\r\nimport './User.css';\r\nimport { AiFillHeart } from \"react-icons/ai\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport function UserAvatar(props) {\r\n  if (props.user.profileImg === \"\") {\r\n    return (\r\n      <span className=\"UserAvatar\" style={{backgroundColor: props.user.defaultAvatarColor}}>\r\n        <span>{props.user.username.charAt(0).toUpperCase()}</span>\r\n      </span>\r\n    );\r\n  }\r\n  else {\r\n    return (\r\n      <img className=\"UserAvatar\" src={props.user.profileImg} alt=\"User avatar\"/>\r\n    );\r\n  }\r\n}\r\n\r\nclass User extends React.Component {\r\n\r\n\r\n  render() {\r\n    let user = this.props.user;\r\n    let isWithUserCard = this.props.isWithUserCard === undefined ? true : false;\r\n    let userCard = \"\";\r\n    if (user === undefined) {\r\n      return <span>User undefined</span>;\r\n    }\r\n    if (isWithUserCard) {\r\n      userCard = (\r\n        <div className=\"User-card\">\r\n          <UserAvatar user={user}/>\r\n          <span>{user.username}</span>\r\n          <span><AiFillHeart/>{user.numberLikes}</span>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div className=\"User\">\r\n        <Link to={`/userProfile/${user.username}`}>\r\n          <span>\r\n            <UserAvatar user={user}/>\r\n            <span className=\"username\">{user.username}</span>\r\n          </span>\r\n          {userCard}\r\n        </Link>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default User","import React, { useState, useCallback } from 'react';\r\n\r\nexport const NotificationProviderContext = React.createContext({\r\n  snackbar: null,\r\n  addSnackbar: () => {},\r\n  removeSnackbar: () => {}\r\n});\r\n\r\nexport default function NotificationProvider({ children }) {\r\n  const [snackbar, setSnackbar] = useState(null);\r\n\r\n  const removeSnackbar = (severity, message) => setSnackbar({ open: false, severity, message });\r\n\r\n  const addSnackbar = (severity, message) => setSnackbar({ open: true, severity, message });\r\n\r\n  const contextValue = {\r\n    snackbar,\r\n    addSnackbar: useCallback((severity, message) => addSnackbar(severity, message), []),\r\n    removeSnackbar: useCallback((severity, message) => removeSnackbar(severity, message), [])\r\n  };\r\n\r\n  return (\r\n    <NotificationProviderContext.Provider value={contextValue}>\r\n      {children}\r\n    </NotificationProviderContext.Provider>\r\n  );\r\n}","import { useContext } from 'react';\r\nimport { NotificationProviderContext } from './NotificationProvider';\r\n\r\nfunction useNotificationProvider() {\r\n  const { snackbar, addSnackbar, removeSnackbar } = useContext(NotificationProviderContext);\r\n  return { snackbar, addSnackbar, removeSnackbar };\r\n}\r\n\r\nexport function withNotificationProvider(Component) {\r\n  return function WrappedComponent(props) {\r\n    const { snackbar, addSnackbar, removeSnackbar } = useNotificationProvider();\r\n    return <Component {...props} snackbar={snackbar} addSnackbar={addSnackbar} />;\r\n  }\r\n}\r\n\r\nexport default useNotificationProvider;","import useNotificationProvider from './NotificationProvider/useNotificationProvider';\r\n\r\nexport function withHooks(Component) {\r\n  return function WrappedComponent(props) {\r\n    const { snackbar, addSnackbar, removeSnackbar } = useNotificationProvider();\r\n    return <Component {...props} snackbar={snackbar} addSnackbar={addSnackbar}/>;\r\n  }\r\n}\r\n\r\nexport default withHooks;","import React from \"react\";\r\nimport '../common.css';\r\nimport '../NewExperience/NewExperience.css';\r\nimport \"./Tile.css\";\r\nimport {AiFillHeart} from 'react-icons/all'\r\nimport Dialog from '@mui/material/Dialog';\r\nimport User from \"../User/User\";\r\nimport { BsFillTrashFill } from \"react-icons/bs\";\r\nimport { IoSend } from \"react-icons/io5\";\r\nimport withHooks from \"../withHooks\";\r\n\r\n/** class for the basic tile, is used mostly for experiences but also for collections, with two headings and a possible likes amount */\r\nexport class Tile extends React.Component{\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {isPopupOpen: false};\r\n\t}\r\n\r\n\thandlePopupClose() {\r\n\t\tthis.setState({isPopupOpen: false});\r\n\t}\r\n\r\n\tgeneratePopup() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<img src={this.props.img} alt={this.props.h1}></img>\r\n\t\t\t\t<h2>{this.props.h1}</h2>\r\n\t\t\t\t<div>{this.props.likes}</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet likes;\r\n\t\tif (this.props.likes !== undefined) {\r\n\t\t\tlikes = (\r\n\t\t\t\t<span className=\"Tile-likes\"><AiFillHeart/>{this.props.likes}</span>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div \r\n\t\t\t\tclassName=\"Tile\" \r\n\t\t\t\tonClick={this.props.type === \"withPopup\" ? \r\n\t\t\t\t((e) => {\r\n\t\t\t\t\tif (!this.state.isPopupOpen && this.props.exp.id !== \"\")\r\n\t\t\t\t\t\tthis.setState({isPopupOpen: true});\r\n\t\t\t\t}) \r\n\t\t\t\t: undefined}\r\n\t\t\t>\r\n\t\t\t\t<img src={this.props.img} alt={this.props.h1} className=\"Tile-img\"></img>\r\n\t\t\t\t<div className=\"h-wrapper\">\r\n\t\t\t\t\t<span className=\"Tile-h2\">{this.props.h2}</span>\r\n\t\t\t\t\t<span className=\"Tile-h1\">{this.props.h1}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t{likes}\r\n\t\t\t\t<Dialog\r\n\t\t\t\t\topen={this.state.isPopupOpen}\r\n\t\t\t\t\tonClose={this.handlePopupClose.bind(this)}\r\n\t\t\t\t\tscroll={'paper'}\r\n\t\t\t\t\taria-labelledby=\"scroll-dialog-title\"\r\n\t\t\t\t\taria-describedby=\"scroll-dialog-description\"\r\n\t\t\t\t\tmaxWidth=\"lg\"\r\n\t\t\t\t\tclassName=\"Tile-dialog\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{this.props.popupElement !== undefined ? this.props.popupElement : this.generatePopup()}\r\n\t\t\t\t</Dialog>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport function CollectionTile(props) {\r\n\tconst collection = props.collection;\r\n\tconst generatePopup = () => {\r\n\t\treturn (\r\n\t\t\t<div className=\"Tile-Dialog-flex\">\r\n\t\t\t\t<div style={{position: \"relative\"}}>\r\n\t\t\t\t\t<img className=\"main-img\" src={collection.img} alt={collection.h1}></img>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"wrapper\">\r\n\t\t\t\t\t<h2>{collection.name}</h2>\r\n\t\t\t\t\t<User user={props.db.getUser(collection.username)}/>\r\n\t\t\t\t\t{/*deleteButton*/}\r\n\t\t\t\t\t<table>\r\n\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<td>Description: </td>\r\n\t\t\t\t\t\t\t\t<td>{collection.description}</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t</table>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\treturn (\r\n\t\t<Tile \r\n\t\t\ttype=\"withPopup\" \r\n\t\t\timg={collection.img}\r\n\t\t\th1={collection.name} \r\n\t\t\th2={collection.username} \r\n\t\t\tpopupElement={generatePopup()}\r\n\t\t\texp={collection}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nfunction TagPill(props) {\r\n\treturn (\r\n\t\t<span className=\"TagPill\">{props.value}</span>\r\n\t);\r\n}\r\n\r\n//checks the experience object and fills any missing attributes, used before passing it to the ExpTile or before passing it to the addExp DB function\r\nexport function checkExpAndFill(exp) {\r\n\tif (typeof exp !== 'object' ||\r\n\tArray.isArray(exp) ||\r\n\texp === null)\r\n\t{\t\r\n\t\texp = {};\r\n\t}\r\n\tlet propNames = [\"id\", \"name\", \"country\", \"city\", \"username\", \"description\", \"documentation\", \"budget\", \"transportation\", \"accomodation\"];\r\n\tpropNames.forEach( (prop) => {\r\n\t\tif (exp[prop] === undefined) {\r\n\t\t\texp[prop] = \"\";\r\n\t\t}\r\n\t})\r\n\tif (exp.likes === undefined || !exp.likes instanceof Set) {\r\n\t\texp.likes = new Set();\r\n\t}\r\n\tif (exp.usefulLinks === undefined || !Array.isArray(exp.usefulLinks)) {\r\n\t\texp.usefulLinks = [];\r\n\t}\r\n\tif (exp.tags === undefined || !Array.isArray(exp.tags)) {\r\n\t\texp.tags = [];\r\n\t}\r\n\tif (exp.comments === undefined || !Array.isArray(exp.comments)) {\r\n\t\texp.comments = [];\r\n\t}\r\n\treturn exp;\r\n}\r\n\r\n//generic input with a send/confirm button, used for comments and search\r\nexport function InputWithSend(props) {\r\n\treturn (\r\n\t\t<span className=\"input-with-send\">\r\n\t\t\t<input type=\"text\" className=\"main-search\"/>\r\n\t\t\t<button \r\n\t\t\t\tonClick={ e => {\r\n\t\t\t\t\tlet input = e.target.closest(\".input-with-send\").querySelector(\"input\");\r\n\t\t\t\t\tprops.db.postComment(props.exp.id, input.value);\r\n\t\t\t\t\tinput.value = \"\";\r\n\t\t\t\t\tprops.setState({});\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<IoSend />\r\n\t\t\t</button>\r\n\t\t</span>\r\n\t);\r\n}\r\n\r\n/** adds a popup dialog to the Tile object, containing all the experience information */\r\nexport class ExpTile extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {isHeartPresent: false};\r\n\t}\r\n\r\n\tgenerateComment(props) {\r\n\t\treturn (\r\n\t\t\t<div className=\"Tile-Dialog-Comment\">\r\n\t\t\t\t<User user={this.props.db.getUser(props.username)}/>\r\n\t\t\t\t<span className=\"date\"> {this.props.db.dateToFullFormat(props.date)}</span>\r\n\t\t\t\t<p>{props.content}</p>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\t/** displays a heart, used on doubleClick on the experience image */\r\n\tshowHeart() {\r\n\t\tthis.setState({isHeartPresent: true});\r\n\t\tsetTimeout((e) => this.setState({isHeartPresent: false}) , 3000);\r\n\t}\r\n\r\n\thandleImageDoubleClick() {\r\n\t\tif (this.props.db.getCurrentUser().username === \"Guest\") {\r\n\t\t\tthis.openSignInNeedSnackbar();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.props.db.likeExp(this.props.exp.id);\r\n\t\t\tthis.showHeart();\r\n\t\t}\r\n\t}\r\n\r\n\topenSignInNeedSnackbar() {\r\n\t\tconsole.log(this);\r\n\t\tthis.props.addSnackbar(\"error\", \"You have to sign in to perform that action.\");\r\n\t}\r\n\r\n\tdeleteExp() {\r\n\t\tthis.props.db.deleteExp(this.props.exp.id);\r\n\t}\r\n\r\n\t/** the function for generating the experience popup used for displaying all information about an experience */\r\n\tgeneratePopup() {\r\n\t\tconst exp = this.props.exp;\r\n\t\tlet usefulLinks = exp.usefulLinks.map( (link) => {\r\n\t\t\treturn <span><a href={link}>{link}</a><br></br></span>\r\n\t\t});\r\n\t\tlet comments = [];\r\n\t\tfor (let i = exp.comments.length - 1; i >= 0; i--) {\r\n\t\t\tcomments.push(this.generateComment(exp.comments[i]));\r\n\t\t}\r\n\t\tlet tags = exp.tags.map( (tag) => {\r\n\t\t\treturn <TagPill value={tag}/>;\r\n\t\t});\r\n\t\tlet likeHeart = \"\";\r\n\t\tif (this.state.isHeartPresent)\r\n\t\t\tlikeHeart = <AiFillHeart className=\"big-heart\"/>\r\n\t\tlet attrNames = [\"country\", \"city\", \"description\", \"documentation\", \"budget\", \"transportation\", \"accomodation\", \"usefulLinks\", \"tags\"];\r\n\t\t//infoTable contains all information about the experience\r\n\t\tlet infoTableRows = attrNames.map( (attr) => {\r\n\t\t\t//makes the first letter capital\r\n\t\t\tlet label = attr.charAt(0).toUpperCase() + attr.slice(1);\r\n\t\t\tlet content = exp[attr];\r\n\t\t\tswitch (attr) {\r\n\t\t\t\tcase \"usefulLinks\":\r\n\t\t\t\t\tlabel = \"Useful links\";\r\n\t\t\t\t\tcontent = usefulLinks;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"budget\":\r\n\t\t\t\t\tcontent = <span>Budget: {exp.budget.from}€-{exp.budget.to}€ Notes: {exp.budget.notes}</span>\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"tags\":\r\n\t\t\t\t\tcontent = tags;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\treturn (\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td>{label}: </td>\r\n\t\t\t\t\t<td>{content}</td>\r\n\t\t\t\t</tr>\r\n\t\t\t);\r\n\t\t});\r\n\t\tlet deleteButton = \"\";\r\n\t\tif (this.props.db.getCurrentUser().username === exp.username) {\r\n\t\t\tdeleteButton = <button className=\"delete-button\" onClick={this.deleteExp.bind(this)}><BsFillTrashFill /></button>\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div className=\"Tile-Dialog-flex\">\r\n\t\t\t\t<div className=\"Tile-Dialog-column-info\">\r\n\t\t\t\t\t<div style={{position: \"relative\"}}>\r\n\t\t\t\t\t\t<img className=\"main-img\" src={exp.img} alt={exp.h1} onDoubleClick={(e) => this.handleImageDoubleClick()}></img>\r\n\t\t\t\t\t\t{likeHeart}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"wrapper\">\r\n\t\t\t\t\t\t<h2>{exp.name}</h2>\r\n\t\t\t\t\t\t<User user={this.props.db.getUser(exp.username)}/>\r\n\t\t\t\t\t\t<p><AiFillHeart/> {exp.likes.size}</p>\r\n\t\t\t\t\t\t{deleteButton}\r\n\t\t\t\t\t\t<table>\r\n\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t{infoTableRows}\r\n\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"Tile-Dialog-column-comments\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<h3>Comments</h3>\r\n\t\t\t\t\t\t{this.props.db.getCurrentUser().username !== \"Guest\" \r\n\t\t\t\t\t\t\t? <InputWithSend exp={exp} db={this.props.db} setState={this.setState.bind(this)}/> \r\n\t\t\t\t\t\t\t: \"\"}\r\n\t\t\t\t\t\t{comments}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst exp = this.props.exp;\r\n\t\treturn (\r\n\t\t\t<Tile \r\n\t\t\t\ttype=\"withPopup\" \r\n\t\t\t\timg={exp.img} \r\n\t\t\t\th1={exp.name} \r\n\t\t\t\th2={exp.username} \r\n\t\t\t\tlikes={exp.likes.size}\r\n\t\t\t\tpopupElement={this.generatePopup()}\r\n\t\t\t\texp={exp}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withHooks(ExpTile);\r\n\r\n/*\r\n\r\n\t\t\t\t\t<p>Country: {exp.country}</p>\r\n\t\t\t\t\t<p>City: {exp.city}</p>\r\n\t\t\t\t\t<p>Documentation: {exp.documentation}</p>\r\n\t\t\t\t\t<p>Budget: {exp.budget.from}€-{exp.budget.to}€ Notes: {exp.budget.notes}</p>\r\n\t\t\t\t\t<p>Transportation: {exp.transportation}</p>\r\n\t\t\t\t\t<p>Accomodation: {exp.accomodation}</p>\r\n\t\t\t\t\t<p>Useful links: {usefulLinks}</p>\r\n*/","import Rome from \"./img/content/colleseum.jpg\";\r\nimport Madrid from \"./img/content/madrid.jpg\";\r\nimport Vienna from \"./img/content/vienna.jpg\";\r\nimport London from \"./img/content/london.jpg\";\r\n\r\nimport profileImg from \"./img/default-profile-picture.png\"\r\nimport {checkExpAndFill} from \"./Tile/Tile\";\r\n\r\nconst guestUser = {username: \"Guest\", email: \"none\", profileImg: profileImg, numberLikes: 0};\r\nconst deletedExp = {\r\n    id: -1,\r\n    name: \"\",\r\n    img: \"\",\r\n    country: \"\",\r\n    city: \"\", \r\n    username: \"\",\r\n    description: \".\",\r\n    likes: new Set([\"\"]),\r\n    documentation: \"\",\r\n    budget: {from: -1, to: -1, notes: \"\"},\r\n    transportation: \"\",\r\n    accomodation: \"\",\r\n    usefulLinks: [],\r\n    tags: [],\r\n    comments: []\r\n};\r\n\r\n//Main fake database class used for any data related operarions\r\nclass DB {\r\n    /**possible defaultAvatarColors when user creates a new account*/\r\n    colors = [\"abdee6\", \"cbaacb\", \"ffffb5\", \"ffccb60\", \"f3b0c3\", \"fee1e8\", \"fed7c3\", \"ecd5e3\", \"d4f0f0\", \"cce2cb\", \"b6cfb6\", \"97c1a9\", \"a2e1db\"];\r\n\r\n    /** possible tags for experiences */\r\n    static tags = [\"cultural\", \"rural\", \"historical\", \"business\", \"environmental\", \"eco-tourism\"];\r\n\r\n    //all users stored in a map\r\n    usersMap = new Map([\r\n        [\"kingkong\", {username: \"kingkong\", email: \"kingkong@gmail.comm\", password: \"p\", defaultAvatarColor: this.getRandomColor(), profileImg: \"\", numberLikes: 0}],\r\n        [\"godzilla\", {username: \"godzilla\", email: \"gzilla@gmail.comm\", password: \"p\", defaultAvatarColor: this.getRandomColor(), profileImg: \"\", numberLikes: 0}],\r\n        [\"charlie\", {username: \"charlie\", email: \"ch.arlie@gmail.comm\", password: \"p\", defaultAvatarColor: this.getRandomColor(), profileImg: \"\", numberLikes: 0}],\r\n        [\"boris\", {username: \"boris\", email: \"boris.sluklov@gmail.comm\", password: \"p\", defaultAvatarColor: this.getRandomColor(), profileImg: \"\", numberLikes: 0}]\r\n    ]);\r\n\r\n    //top users based on aggregate amount of likes among their experiecnes\r\n    topUsersList = [];\r\n\r\n    //currently logged in user\r\n    currentUser = guestUser;\r\n\r\n    //next experience it to be added in the experiences array\r\n    nextExpId = 2;\r\n\r\n    //storage array for experiences, ids match the indexes, so the search speed i O(1)\r\n    experiences = [\r\n        {\r\n            id: 0,\r\n            name: \"Erasmus in Madrid\",\r\n            img: Madrid,\r\n            country: \"Spain\",\r\n            city: \"Madrid\", \r\n            username: \"kingkong\",\r\n            description: \"A whole semester spent in the city of liberty in Europe.\",\r\n            likes: new Set([\"godzilla\", \"charlie\", \"boris\"]),\r\n            documentation: \"ID for EU Citizens\",\r\n            budget: {from: 600, to: 800, notes: \"Accomodation can be costly.\"},\r\n            transportation: \"Metro is very good\",\r\n            accomodation: \"Nice\",\r\n            usefulLinks: [\"spain.com\", \"madrid.es\"],\r\n            tags: [\"cultural\", \"rural\", \"historical\", \"business\"],\r\n            comments: [\r\n                {username: \"kingkong\", date: new Date(\"2021-11-14 21:56:48\"), content: \"Yo bro, very cool trip bro, wassup btw how ya doin bro, yo cool?\"}, \r\n                {username: \"boris\", date: new Date(\"2021-11-15 15:01:03\"), content: \"Hello broder, gud to see you.\"}\r\n            ]\r\n        },\r\n        {\r\n            id: 1,\r\n            name: \"A trip to Rome\",\r\n            img: Rome,\r\n            country: \"Italy\",\r\n            city: \"Rome\", \r\n            username: \"godzilla\",\r\n            description: \"A week long trip to Rome, we saw many cool places, it was amazing.\",\r\n            likes: new Set([\"godzilla\", \"charlie\", \"boris\"]),\r\n            documentation: \"ID for EU Citizens\",\r\n            budget: {from: 600, to: 800, notes: \"Accomodation can be costly.\"},\r\n            transportation: \"Metro is available as well as okay buses.\",\r\n            accomodation: \"Cheap on the outskirst but also dirty surroundings\",\r\n            usefulLinks: [\"italy.com\", \"rome.it\"],\r\n            tags: [\"cultural\", \"historical\"],\r\n            comments: [\r\n                {username: \"kingkong\", date: new Date(\"2021-11-17 21:40:32\"), content: \"Hi so did you like it bra?\"}\r\n            ]\r\n        }\r\n\r\n    ]\r\n\r\n    //collections storage\r\n    collections = [\r\n        {\r\n            id: 0,\r\n            name: \"\",\r\n            img: \"\",\r\n            username: \"\",\r\n            description: \"\",\r\n            experiences: [this.experiences[0]]\r\n        }\r\n    ]\r\n\r\n    //appSetCurrentUser is a function in the App Component, calling this function notifies the whole app of user change\r\n    constructor(appSetCurrentUser) {\r\n        this.appSetCurrentUser = appSetCurrentUser;\r\n    }\r\n\r\n    /**sets timers for recalculating users likes amount and updating the top users table*/\r\n    startup() {\r\n        this.updateUserLikesAmount();\r\n        this.updateTopUsersList();\r\n        setInterval(this.updateUserLikesAmount.bind(this), 0.2 * 60 * 1000);\r\n        setInterval(this.updateTopUsersList.bind(this), 0.2 * 60 * 1000); //every 3 minutes, in ms\r\n    }\r\n\r\n    setAppSetCurrentUser(appSetCurrentUser) {\r\n        this.appSetCurrentUser = appSetCurrentUser;\r\n    }\r\n\r\n    /**saves all data to local storage*/\r\n    saveIntoLocalStorage() {\r\n        this.experiences.forEach((exp) => {\r\n            exp.likes = Array.from(exp.likes);\r\n        });\r\n        localStorage.setItem(\"usersMap\", JSON.stringify([...this.usersMap]));\r\n        localStorage.setItem(\"experiences\", JSON.stringify(this.experiences));\r\n        localStorage.setItem(\"currentUser\", JSON.stringify(this.currentUser));\r\n        localStorage.setItem(\"nextExpId\", JSON.stringify(this.nextExpId));\r\n        alert(\"Database saved!\");\r\n    }\r\n\r\n    /**loads from local storage*/\r\n    loadFromLocalStorage() {\r\n        let protoUsersMap = new Map(JSON.parse(localStorage.getItem(\"usersMap\")));\r\n        let protoExperiences = JSON.parse(localStorage.getItem(\"experiences\"));\r\n        let protoCurrentUser = JSON.parse(localStorage.getItem(\"currentUser\"));\r\n        let protoNextExpId = JSON.parse(localStorage.getItem(\"nextExpId\"));\r\n\r\n        if (protoUsersMap.get(\"kingkong\") !== undefined) {\r\n            this.usersMap = protoUsersMap;\r\n        }\r\n        if (protoExperiences !== null) {\r\n            this.experiences = protoExperiences;\r\n            this.experiences.forEach((exp) => {\r\n                exp.likes = new Set(exp.likes);\r\n                exp.comments.forEach( (comment) => {\r\n                    comment.date = new Date(comment.date);\r\n                });\r\n            });\r\n        }\r\n        if (protoCurrentUser !== null)\r\n            this.currentUser = protoCurrentUser;\r\n        if (protoNextExpId !== null)\r\n            this.nextExpId = protoNextExpId;\r\n\r\n        console.log(\"Database loaded.\");\r\n        console.log(this.experiences);\r\n        console.log(this.usersMap);\r\n        console.log(this.currentUser);\r\n        console.log(this.nextExpId);\r\n\r\n        this.startup(); //IMPORTANT\r\n    }\r\n\r\n    /**updates top users list, triggered by the timer in function startup()*/\r\n    updateTopUsersList() {\r\n        this.topUsersList = [];\r\n        this.usersMap.forEach( (user) => {\r\n            this.topUsersList.push(user);\r\n        });\r\n        this.topUsersList.sort((a, b) => b.numberLikes - a.numberLikes);\r\n        this.topUsersList = this.topUsersList.slice(0, 10);\r\n    }\r\n\r\n    /**updates users likes amount, triggered by the timer in function startup()*/\r\n    updateUserLikesAmount() {\r\n        let newUsersMap = new Map(this.usersMap);\r\n        newUsersMap.forEach( (user) => {\r\n            user.numberLikes = 0;\r\n        });\r\n        this.experiences.forEach( (exp) => {\r\n            let user = newUsersMap.get(exp.username)\r\n            if (user !== undefined)\r\n                user.numberLikes += exp.likes.size;\r\n        });\r\n        this.usersMap = newUsersMap;\r\n    }\r\n\r\n    isSignedIn() {\r\n        return this.getCurrentUser().username !== \"Guest\";\r\n    }\r\n\r\n    getTopUsers() {\r\n        return this.topUsersList;\r\n    }\r\n\r\n    /**get a by amount specified number of experiences with the most likes */\r\n    getTopExp(amount) {\r\n        let topExp = [...this.experiences];\r\n        for (let i = 0; i < topExp.length; i++) {\r\n            if (topExp[i].id === -1)\r\n                topExp.splice(i, 1);\r\n        }\r\n        topExp.sort((a, b) => b.likes.size - a.likes.size);\r\n        topExp = topExp.slice(0, amount);\r\n        return topExp;\r\n    }\r\n\r\n    getExpById(id) {\r\n        let exp = {};\r\n        /*this.experiences.some( (e) => {\r\n            if (e.id === id) {\r\n                exp = e;\r\n                return true;\r\n            }\r\n            return false;\r\n        });*/\r\n        exp = this.experiences[id];\r\n        if (exp.id === -1)\r\n            return null;\r\n        return exp;\r\n    }\r\n\r\n    /**used by search, returns experiences array based on filter parameters*/\r\n    getFilteredExps(filter) {\r\n        if (filter === null) {\r\n            return;\r\n        }\r\n        let resultExps = [];\r\n        if (filter.keyword !== undefined && filter.keyword !== null) {\r\n            //a simple filter, checks every string attribute of each experience for a match of the keyword\r\n            let keyword = filter.keyword.toLowerCase();\r\n            this.experiences.forEach((exp) => {\r\n                for (const key of Object.keys(exp)) {\r\n                    const val = exp[key];\r\n                    if (typeof val === 'string' || val instanceof String) {\r\n                        if (val.toLowerCase().includes(keyword)) {\r\n                            exp.id !== -1 && resultExps.push(exp);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            //the advanced filter, the resulting exps match all the set filter attributes\r\n            let matchCounter = 0;\r\n            let fieldsSet = 0;\r\n            filter.name !== \"\" && fieldsSet++;\r\n            filter.author !== \"\" && fieldsSet++;\r\n            filter.location !== \"\" && fieldsSet++;\r\n            filter.tags.length !== 0 && fieldsSet++;\r\n\r\n            this.experiences.forEach((exp) => {\r\n                matchCounter = 0;\r\n                if (exp.name.toLowerCase().includes(filter.name.toLowerCase()) && filter.name !== \"\")\r\n                    matchCounter++;\r\n                if (exp.username.toLowerCase().includes(filter.author.toLowerCase()) && filter.author !== \"\")\r\n                    matchCounter++;\r\n                if ((exp.city.toLowerCase().includes(filter.location.toLowerCase()) && filter.location !== \"\") || \r\n                    (exp.country.toLowerCase().includes(filter.location.toLowerCase()) && filter.location !== \"\"))\r\n                    matchCounter++;\r\n                //check for tags match\r\n                loop1:\r\n                for (let i = 0; i < filter.tags.length; i++) {\r\n                    const tag = filter.tags[i];\r\n                    for (let j = 0; j < exp.tags.length; j++) {\r\n                        const expTag = exp.tags[j];\r\n                        if (tag === expTag) {\r\n                            matchCounter++;\r\n                            break loop1;\r\n                        }\r\n                    }\r\n                }\r\n                exp.id !== -1 && matchCounter === fieldsSet && resultExps.push(exp);\r\n            });\r\n        }\r\n        return resultExps;\r\n    }\r\n\r\n    addExp(exp) {\r\n        checkExpAndFill(exp);\r\n        console.log(exp);\r\n        exp.id = this.nextExpId++;\r\n        if (exp !== undefined)\r\n            this.experiences.push(exp);\r\n    }\r\n\r\n    deleteExp(id) {\r\n        let exp = this.experiences[id];\r\n        if (exp.id === id && exp.username === this.currentUser.username) {\r\n            this.experiences[id] = deletedExp;\r\n        }\r\n    }\r\n\r\n    likeExp(id) {\r\n        let exp = this.getExpById(id);\r\n        let username;\r\n        if ((username = this.getCurrentUser().username) !== \"Guest\") {\r\n            exp.likes.add(username);\r\n        }\r\n        console.log(exp.likes);\r\n    }\r\n\r\n    /**signs up a new user*/\r\n    signupUser(user) {\r\n        let indexes = [\"username\", \"email\", \"password\", \"confirmPassword\"];\r\n        //checks for user object missing data, array function some returns true and breaks only if true is returned inside the function\r\n        if (indexes.some( (i) => { \r\n            if (user[i]===undefined || user[i] === \"\") \r\n                return true; \r\n            else return false}) === true)\r\n        {\r\n            return \"Missing user data.\";\r\n        }\r\n        if (user.password !== user.confirmPassword) {\r\n            return \"Passwords do not match.\";\r\n        }\r\n        delete user.confirmPassword;\r\n        if (this.usersMap.has(user.username))\r\n            return \"Username already taken.\";\r\n        let isEmailAlreadyUsed = false;\r\n        this.usersMap.forEach( (u) => {\r\n            if (u.email === user.email) {\r\n                isEmailAlreadyUsed = true;\r\n            }\r\n        });\r\n        if (isEmailAlreadyUsed === true) {\r\n            return \"Email is already used.\";\r\n        }\r\n        user.numberLikes = 0;\r\n        user.profileImg = \"\";\r\n        user.defaultAvatarColor = this.getRandomColor();\r\n        this.usersMap.set(user.username, user);\r\n        return \"\";\r\n    }\r\n\r\n    signInUser(username, password) {\r\n        let user = this.getUser(username);\r\n        if (user === undefined)\r\n            return null;\r\n        if (user.password === password) {\r\n            this.setCurrentUser(user);\r\n            return user;\r\n        }\r\n        else \r\n            return null;\r\n    }\r\n\r\n    logoutUser() {\r\n        this.setCurrentUser(guestUser);\r\n        localStorage.removeItem(\"currentUser\");\r\n    }\r\n\r\n    getUser(username) {\r\n        return this.usersMap.get(username);\r\n    }\r\n\r\n    setCurrentUser(newUser) {\r\n        this.currentUser = newUser;\r\n        this.appSetCurrentUser(this.currentUser);\r\n    }\r\n\r\n    getCurrentUser() {\r\n        return this.currentUser;\r\n    }\r\n\r\n    /** gets a random color from the colors array */\r\n    getRandomColor() {\r\n        let index = Math.floor(Math.random() * this.colors.length);\r\n        return \"#\"+this.colors[index];\r\n    }\r\n\r\n    updateUser(user) {\r\n        this.usersMap.set(user.username, user);\r\n        if (this.getCurrentUser().username === user.username);\r\n            this.setCurrentUser(user);\r\n    }\r\n\r\n    getTopExpByUser(username, amount) {\r\n        let userExps = [];\r\n        this.experiences.forEach( (exp) => {\r\n            if (exp.username === username) {\r\n                userExps.push(exp);\r\n            }\r\n        });\r\n        userExps.sort((a, b) => b.likes.size - a.likes.size);\r\n        userExps = userExps.slice(0, amount);\r\n        return userExps;\r\n    }\r\n\r\n    dateToFullFormat(date) {\r\n        return date.getDate().toString().padStart(2, '0')  + \"-\" + (date.getMonth()+1).toString().padStart(2, '0') + \"-\" + date.getFullYear().toString().padStart(2, '0') + \" \" + date.getHours().toString().padStart(2, '0') + \":\" + date.getMinutes().toString().padStart(2, '0');\r\n    }\r\n\r\n    postComment(expId, content) {\r\n        if (!this.isSignedIn())\r\n            return;\r\n        let exp = this.getExpById(expId);\r\n        exp.comments.push({username: this.getCurrentUser().username, date: new Date(), content: content});\r\n    }\r\n\r\n    getCollection(collectionId) {\r\n        return this.collections[collectionId].id === collectionId ? this.collections[collectionId] : null;\r\n    }\r\n\r\n    addCollection(collection) {\r\n        if (collection.username !== this.getCurrentUser().username)\r\n            return;\r\n        let collectionTemplate = {\r\n            name: \"\",\r\n            img: \"\",\r\n            username: \"\",\r\n            description: \"\",\r\n            experiences: []\r\n        };\r\n        collectionTemplate = {...collection};\r\n        collection.id = this.collections.length;\r\n        this.collections.push(collectionTemplate);\r\n    }\r\n\r\n    addToCollection(expId, collectionId) {\r\n        let exp = this.getExpById(expId);\r\n        let collection = this.collections[collectionId];\r\n        if (exp.username === collectionId && exp.username === this.getCurrentUser().username)\r\n            collection.experiences.push(exp);\r\n    }\r\n\r\n    getCollectionsByUser(username, amount) {\r\n        let userCollections = [];\r\n        this.collections.forEach( (exp) => {\r\n            if (exp.username === username) {\r\n                userCollections.push(exp);\r\n            }\r\n        });\r\n        //userCollections.sort((a, b) => b.likes.size - a.likes.size);\r\n        if (amount !== -1)\r\n            userCollections = userCollections.slice(0, amount);\r\n        return userCollections;\r\n    }\r\n}\r\n\r\nexport default DB;\r\n\r\n/*\r\n\r\n            this.experiences.forEach((exp) => {\r\n                if ((exp.name.toLowerCase().includes(filter.name.toLowerCase()) && filter.name !== \"\") ||\r\n                    (exp.username.toLowerCase().includes(filter.author.toLowerCase()) && filter.author !== \"\") ||\r\n                    (exp.city.toLowerCase().includes(filter.location.toLowerCase()) && filter.location !== \"\") ||\r\n                    (exp.country.toLowerCase().includes(filter.location.toLowerCase()) && filter.location !== \"\") ) \r\n                {\r\n                    exp.id !== -1 && resultExps.push(exp);\r\n                }\r\n                else {\r\n                    loop1:\r\n                    for (let i = 0; i < filter.tags.length; i++) {\r\n                        const tag = filter.tags[i];\r\n                        for (let j = 0; j < exp.tags.length; j++) {\r\n                            const expTag = exp.tags[j];\r\n                            if (tag === expTag) {\r\n                                exp.id !== -1 && resultExps.push(exp);\r\n                                break loop1;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n\r\n*/","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/logo_placeholder.80914700.png\";","import React from 'react';\r\nimport '../common.css';\r\nimport './SignIn.css';\r\nimport withHooks from '../withHooks';\r\n\r\nclass SignIn extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {isFormSignIn: true};\r\n\t}\r\n\r\n\tonSignupSubmit(e) {\r\n\t\te.preventDefault();\r\n\t\tlet names = [\"username\", \"email\", \"password\", \"confirmPassword\"];\r\n\t\tlet user = {};\r\n\t\tnames.forEach( (n) => {\r\n\t\t\tuser[n] = document.querySelector(\".SignIn input[name=\" + n + \"]\")?.value;\r\n\t\t});\r\n\t\tlet message;\r\n\t\tif ((message = this.props.db.signupUser(user)) === \"\") {\r\n\t\t\tthis.props.addSnackbar(\"success\", \"Sign in successfull!\");\r\n\t\t\tthis.onFormSuccess();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.props.addSnackbar(\"error\", message);\r\n\t\t}\r\n\t}\r\n\r\n\tonSignInSubmit(e) {\r\n\t\te.preventDefault();\r\n\t\tlet username, password = \"\";\r\n\t\tusername = document.querySelector(\".SignIn input[name=username]\")?.value;\r\n\t\tpassword = document.querySelector(\".SignIn input[name=password]\")?.value;\r\n\t\tlet user;\r\n\t\tif ((user = this.props.db.signInUser(username, password)) !== null) {\r\n\t\t\tthis.props.addSnackbar(\"success\", \"Welcome back, \" + user?.username + \"!\");\r\n\t\t\tthis.onFormSuccess();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.props.addSnackbar(\"error\", \"Sign in unsuccessful.\");\r\n\t\t}\r\n\t}\r\n\r\n\tonFormSuccess() {\r\n\t\tthis.props.setNavState({isSignInOpen: false});\r\n\t}\r\n\r\n\tgenSwitchButton(text) {\r\n\t\treturn (\r\n\t\t\t<button \r\n\t\t\tclassName=\"button-switch-forms\" \r\n\t\t\tonClick={() => this.setState({isFormSignIn: !this.state.isFormSignIn})}\r\n\t\t\t>\r\n\t\t\t\t{text}\r\n\t\t\t</button>\r\n\t\t);\r\n\t}\r\n\r\n  render() {\r\n\t\tlet form;\r\n\t\tif (this.state.isFormSignIn === false) {\r\n\t\t\tform = (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h2>Sign up</h2>\r\n\t\t\t\t\t<span className=\"under-headline\">Save all your favorite experiences!</span>\r\n\t\t\t\t\t<form>\r\n\t\t\t\t\t\t<div className=\"flex\">\r\n\t\t\t\t\t\t\t<input name=\"username\" placeholder=\"Username\"/>\r\n\t\t\t\t\t\t\t<input name=\"email\" placeholder=\"Email\" />\r\n\t\t\t\t\t\t\t<input name=\"password\" placeholder=\"Password\" />\r\n\t\t\t\t\t\t\t<input name=\"confirmPassword\" placeholder=\"Confirm password\" />\r\n\t\t\t\t\t\t\t<button className=\"button-submit\" onClick={this.onSignupSubmit.bind(this)}>Sign up</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t\t<span>Already have an account?{this.genSwitchButton(\"Sign in\")}</span>\r\n\t\t\t\t\t<span className=\"disclaimer\">By signing up you agree to our<br/>Terms {'&'} Conditions</span>\t\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tform = (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h2>Sign in</h2>\r\n\t\t\t\t\t<span className=\"under-headline\">Save all your favorite experiences!</span>\r\n\t\t\t\t\t<form>\r\n\t\t\t\t\t\t<div className=\"flex\">\r\n\t\t\t\t\t\t\t<input name=\"username\" placeholder=\"Username\"/>\r\n\t\t\t\t\t\t\t<input name=\"password\" placeholder=\"Password\" />\r\n\t\t\t\t\t\t\t<button className=\"button-submit\" onClick={this.onSignInSubmit.bind(this)}>Sign in</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t\t<span>Not registered yet?{this.genSwitchButton(\"Sign up\")}</span>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div className=\"SignIn form-dialog\">\r\n\t\t\t\t{form}\r\n\t\t\t</div>\r\n\t\t);\r\n  }\r\n}\r\n\r\n/*\r\n\r\n\r\n\t\t\t\t<Snackbar \r\n\t\t\t\t\topen={snackbar.open} \r\n\t\t\t\t\tautoHideDuration={6000} \r\n\t\t\t\t\tonClose={this.handleSnackbarClose.bind(this)}\r\n\t\t\t\t\tanchorOrigin={{ vertical: \"top\", horizontal: \"center\" }}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Alert onClose={this.handleSnackbarClose.bind(this)} severity={snackbar.severity} sx={{ width: '100%' }}>\r\n\t\t\t\t\t\t{snackbar.message}\r\n\t\t\t\t\t</Alert>\r\n\t\t\t\t</Snackbar>\r\n\r\n*/\r\n\r\nexport default withHooks(SignIn);","import {Snackbar, Alert} from '@mui/material';\r\nimport React from \"react\";\r\n\r\n/* Example use\r\n<MySnackbar \r\n\topen={snackbar.open} \r\n\tonClose={this.handleSnackbarClose.bind(this)} \r\n\tmessage={snackbar.message} \r\n\tseverity={snackbar.severity}\r\n/>\r\n*/\r\n\r\nclass MySnackbar extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Snackbar \r\n\t\t\t\topen={this.props.open} \r\n\t\t\t\tautoHideDuration={this.props.message?.length * 50 + 1000} \r\n\t\t\t\tonClose={this.props.onClose}\r\n\t\t\t\tanchorOrigin={{ vertical: \"top\", horizontal: \"center\" }}\r\n\t\t\t\tClickAwayListenerProps={{onClickAway: () => {}}}\r\n\t\t\t>\r\n\t\t\t\t<Alert onClose={this.props.onClose} severity={this.props.severity} sx={{ width: '100%' }}>\r\n\t\t\t\t\t{this.props.message}\r\n\t\t\t\t</Alert>\r\n\t\t\t</Snackbar>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default MySnackbar;","import React from 'react';\r\n\r\nimport '../common.css';\r\nimport '../User/User.css';\r\nimport './UserMenu.css';\r\n\r\nimport Dialog from '@mui/material/Dialog';\r\nimport User from \"../User/User\";\r\n\r\nimport { BiExit } from \"react-icons/bi\";\r\nimport { IoMdSettings } from \"react-icons/io\";\r\nimport { FiEdit } from \"react-icons/fi\";\r\nimport ClickAwayListener from \"@mui/core/ClickAwayListener\";\r\nimport withHooks from '../withHooks';\r\n\r\nclass UserMenu extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isEditProfileOpen: false, \r\n      mixedColors: this.props.user.defaultAvatarColor, \r\n      newProfileImg: this.props.user.profileImg\r\n    };\r\n  }\r\n\r\n  handleEditProfile() {\r\n    this.setState({isEditProfileOpen: true});\r\n  }\r\n\r\n  handleEditProfileClose() {\r\n    this.setState({isEditProfileOpen: false, mixedColors: this.props.user.defaultAvatarColor});\r\n  }\r\n\r\n  getValueByName(name) {\r\n    return document.querySelector(\"input[name=\" + name + \"]\")?.value;\r\n  }\r\n\r\n  onEditProfileSubmit(e) {\r\n    e.preventDefault();\r\n    if (this.props.db.getUser(this.props.user.username).password !== this.getValueByName(\"currentPassword\")) {\r\n      this.props.addSnackbar(\"error\", \"Wrong current password.\");\r\n      return;\r\n    }\r\n    let newUser = JSON.parse(JSON.stringify(this.props.db.getUser(this.props.user.username)));\r\n    let attributes = [\"defaultAvatarColor\", \"profileImg\"];\r\n    attributes.forEach( (attr) => {\r\n\t\t\tnewUser[attr] = document.querySelector(\".UserMenu-Dialog input[name=\" + attr + \"]\")?.value;\r\n\t\t});\r\n    let password;\r\n    if ((password = this.getValueByName(\"password\")) !== \"\") {\r\n      if (password === this.getValueByName(\"confirmPassword\")) {\r\n        newUser.password = password;\r\n      }\r\n      else {\r\n        this.props.addSnackbar(\"error\", \"New passwords do not match\");\r\n        return;\r\n      }\r\n    }\r\n    \r\n    this.props.db.updateUser(newUser);\r\n    this.props.addSnackbar(\"success\", \"User data updated.\");\r\n  }\r\n\r\n  onColorChange(e) {\r\n    /*let red = document.querySelector(\".UserMenu-Dialog input[name=red]\")?.value || 0;\r\n    let green = document.querySelector(\".UserMenu-Dialog input[name=green]\")?.value || 0;\r\n    let blue = document.querySelector(\".UserMenu-Dialog input[name=blue]\")?.value || 0;\r\n    this.setState({mixedColors: `rgb(${red},${green},${blue})`});*/\r\n    this.setState({mixedColors: e.target.value});\r\n  }\r\n\r\n  onProfileImgChange(e) {\r\n    this.setState({newProfileImg: e.target.value});\r\n  }\r\n\r\n  render() {\r\n    let props = this.props;\r\n    let user = this.props.user;\r\n    return (\r\n      <ClickAwayListener onClickAway={props.handleClickAway}>\r\n        <div>\r\n          <div className=\"UserMenu\">\r\n            <div className=\"UserMenu-flex\">\r\n              <User user={user} isWithUserCard={false} />\r\n              <hr/>\r\n              <button onClick={this.handleEditProfile.bind(this)}>Edit profile <FiEdit/></button>\r\n              <button onClick={props.handleSettings}>Settings <IoMdSettings/></button>\r\n              <button onClick={props.handleSignOut} className=\"button-logout\">Sign out <BiExit/></button>\r\n            </div>\r\n          </div>\r\n          <Dialog\r\n                open={this.state.isEditProfileOpen}\r\n                onClose={this.handleEditProfileClose.bind(this)}\r\n                scroll={'paper'}\r\n                aria-labelledby=\"scroll-dialog-title\"\r\n                aria-describedby=\"scroll-dialog-description\"\r\n                maxWidth=\"md\"\r\n                className=\"UserMenu-Dialog\"\r\n          >\r\n            <div className=\"form-dialog\">\r\n              <h2>Edit Profile</h2>\r\n              <form>\r\n                <div className=\"flex\">\r\n                  <input name=\"username\" placeholder=\"Username\" value={user.username} disabled/>\r\n                  <input name=\"email\" placeholder=\"Email\" value={user.email} disabled/>\r\n                  <input name=\"currentPassword\" placeholder=\"Current password\" />\r\n                  <input name=\"password\" placeholder=\"Password\" />\r\n                  <input name=\"confirmPassword\" placeholder=\"Confirm password\" />\r\n                  <div>\r\n                    <span>Avatar color: </span>\r\n                    <label>\r\n                      <input type=\"color\" name=\"defaultAvatarColor\" value={this.state.mixedColors} onChange={this.onColorChange.bind(this)}/>\r\n                      <span className=\"defaultAvatarPreview UserAvatar\" style={{backgroundColor: this.state.mixedColors}}>{user.username.charAt(0).toUpperCase()}</span>\r\n                    </label>\r\n                  </div>\r\n                  <span className=\"input-wrapper\">\r\n                    <input name=\"profileImg\" placeholder=\"Profile image\" value={this.state.newProfileImg} onClick={(e) => e.target.select()} onChange={this.onProfileImgChange.bind(this)}/>\r\n                    <img src={this.state.newProfileImg} alt=\"\" className=\"UserAvatar\"/>\r\n                  </span>\r\n                  <button className=\"button-submit\" onClick={this.onEditProfileSubmit.bind(this)}>Save changes</button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </Dialog>\r\n        </div>\r\n      </ClickAwayListener>\r\n    );\r\n  }\r\n  \r\n}\r\n\r\nexport default withHooks(UserMenu);\r\n\r\n/*\r\n<input type=\"number\" className=\"input-avatar-color\" name=\"red\" min=\"0\" max=\"255\" placeholder=\"R\" onChange={this.onColorChange.bind(this)}/>\r\n                    <input type=\"number\" className=\"input-avatar-color\" name=\"green\" min=\"0\" max=\"255\" placeholder=\"G\" onChange={this.onColorChange.bind(this)}/>\r\n                    <input type=\"number\" className=\"input-avatar-color\" name=\"blue\" min=\"0\" max=\"255\" placeholder=\"B\" onChange={this.onColorChange.bind(this)}/>\r\n*/","import React from \"react\";\r\nimport '../common.css';\r\nimport './Nav.css';\r\nimport Dialog from '@mui/material/Dialog';\r\nimport SignIn from '../SignIn/SignIn';\r\nimport MySnackbar from \"../MySnackbar\";\r\nimport {Brand} from \"../App\";\r\nimport {NavLink, Routes, Route} from 'react-router-dom';\r\nimport { UserAvatar } from \"../User/User\";\r\nimport UserMenu from '../UserMenu/UserMenu';\r\n\r\nimport { FaMapMarkedAlt, FaPlane } from \"react-icons/fa\";\r\nimport { AiFillHome } from \"react-icons/ai\";\r\nimport withHooks from \"../withHooks\";\r\n\r\n\r\nfunction NavButton(props) {\r\n  return (\r\n    <button \r\n      className=\"Nav-button\"\r\n    >\r\n      {props.picture} <span>{props.text}</span>\r\n    </button>\r\n  );\r\n}\r\n\r\nfunction SignInButton(props) {\r\n  return (\r\n    <button className=\"Nav-button Nav-signIn-button\" onClick={props.onClick}>Sign In</button>\r\n  );\r\n}\r\n\r\n\r\n/** top navigation bar */\r\nclass Nav extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isSignedIn: false,\r\n      isSignInOpen: false,\r\n      isUserMenuOpen: false,\r\n      snackbar: {open: false, severity: \"info\", message: \"\"}\r\n    };\r\n  }\r\n\r\n  generateMenuButton(name, picture) {\r\n    return (\r\n      <li>\r\n        <NavLink to={(name !== \"Home\" ? name.toLowerCase() : \"/\")} activeClassName=\"Nav-button-selected\">\r\n          <NavButton \r\n            text={name}\r\n            picture={picture}\r\n          />\r\n        </NavLink>\r\n      </li>\r\n    );\r\n  }\r\n\r\n  generateSignInButton() {\r\n    return (\r\n      <li>\r\n        <SignInButton onClick={(e) => {if (!this.state.isSignInOpen) this.setState({isSignInOpen: true})}}/>\r\n      </li>\r\n    );\r\n  }\r\n\r\n  handleSignInClose() {\r\n    this.setState({isSignInOpen: false});\r\n  }\r\n\r\n\thandleSnackbarClose() {\r\n\t\tthis.setState({snackbar: {open: false, severity: this.state.snackbar.severity}});\r\n\t}\r\n\r\n  openSettings() {\r\n\r\n  }\r\n\r\n  handleSignOut() {\r\n    this.props.db.logoutUser();\r\n    this.setState({\r\n      isUserMenuOpen: false\r\n    });\r\n    this.props.addSnackbar(\"success\", \"Bye!\");\r\n  }\r\n\r\n  handleEditProfile() {\r\n\r\n  }\r\n\r\n  render() {\r\n    let user = this.props.db.getCurrentUser();\r\n    let userPanel;\r\n    let userMenu = \r\n      <UserMenu\r\n        open={this.state.isUserMenuOpen}\r\n        user={user}\r\n        db={this.props.db}\r\n        handleEditProfile={this.handleEditProfile.bind(this)}\r\n        handleSignOut={this.handleSignOut.bind(this)} \r\n        handleSettings={this.openSettings.bind(this)}\r\n        handleClickAway={(e) => {this.setState({isUserMenuOpen: false})}}\r\n      />;\r\n    let loggedIn = user.username !== \"Guest\";\r\n    if (!loggedIn) { //Guest\r\n      userPanel = (\r\n        <li className=\"Nav-user\">\r\n          <div className=\"wrapper\">\r\n            <UserAvatar user={user} />\r\n            <span className=\"Nav-username\">{user.username}</span>\r\n          </div>\r\n        </li>\r\n      );\r\n    }\r\n    else { //Registered user\r\n      userPanel = (\r\n        <li className=\"Nav-user\">\r\n          <div className=\"wrapper\">\r\n            <button onClick={(e) => { this.setState({isUserMenuOpen: true}) }}>\r\n              <UserAvatar user={user} db={this.props.db}/>\r\n              <span className=\"Nav-username\">{user.username}</span>\r\n            </button>\r\n          </div>\r\n          {this.state.isUserMenuOpen ? userMenu : \"\"}\r\n          {/*console.log(this.state.isUserMenuOpen)*/}\r\n        </li>\r\n      );\r\n    }\r\n    return (\r\n      <nav>\r\n        <Routes>\r\n          <Route path=\"/\" />\r\n          <Route path=\"/*\" element={<Brand/>}/>\r\n        </Routes>\r\n        <ul>\r\n          {this.generateMenuButton(\"Home\", <AiFillHome/>)}\r\n          {/*this.generateMenuButton(\"Destinations\",  <FaPlane/>)*/}\r\n          {this.generateMenuButton(\"Experiences\", <FaMapMarkedAlt/>)}\r\n          {!loggedIn ? this.generateSignInButton() : \"\"}\r\n          {userPanel}\r\n        </ul>\r\n        <Dialog\r\n\t\t\t\t\topen={this.state.isSignInOpen}\r\n\t\t\t\t\tonClose={this.handleSignInClose.bind(this)}\r\n\t\t\t\t\tscroll={'body'}\r\n\t\t\t\t\taria-labelledby=\"scroll-dialog-title\"\r\n\t\t\t\t\taria-describedby=\"scroll-dialog-description\"\r\n\t\t\t\t\tmaxWidth=\"md\"\r\n\t\t\t\t\tclassName=\"Nav-Dialog\"\r\n\t\t\t\t>\r\n          <SignIn db={this.props.db} setNavState={this.setState.bind(this)}/>\r\n\t\t\t\t</Dialog>\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withHooks(Nav);","import React from \"react\";\r\nimport '../common.css';\r\nimport './NewExperience.css';\r\nimport withHooks from \"../withHooks\";\r\nimport restrictAccess from \"../decorators/restrictAccess\";\r\nimport DB from '../DB';\r\n\r\n/** unused function, can be used to save images in Base64 format but is very inefficient and because localStorage is limited in capacity to only 5MB, only around 3 high-quality images could be stored, now using links to online hosted images instead */\r\nconst fileToDataUri = (file) => new Promise((resolve, reject) => {\r\n\tconst reader = new FileReader();\r\n\treader.onload = (event) => {\r\n\t\tresolve(event.target.result)\r\n\t};\r\n\treader.readAsDataURL(file);\r\n})\r\n\r\nexport function Tags(props) {\r\n\tlet tags = DB.tags;\r\n\tlet tagPills = tags.map( (tag) => {\r\n\t\treturn <PillCheckbox value={tag} />\r\n\t});\r\n\treturn (\r\n\t\t<div>{tagPills}</div>\r\n\t);\r\n}\r\n\r\nfunction PillCheckbox(props) {\r\n\treturn (\t\r\n\t\t<label className=\"PillCheckbox no-selection\">\r\n\t\t\t<input type=\"checkbox\" name=\"tags\" value={props.value}/>\r\n\t\t\t<span>{props.value}</span>\r\n\t\t</label>\r\n\t);\r\n}\r\n\r\nclass NewExperience extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {mainImg: \"\"};\r\n\t\tthis.db = props.db;\r\n\t}\r\n\r\n\tonFileChange = (file) => {\r\n\t\tif(!file) {\r\n\t\t\t\tthis.setState({dataUri: ''});\r\n\t\treturn;\r\n\t\t}\r\n\t\tfileToDataUri(file)\r\n\t\t.then(dataUri => {\r\n\t\t\tthis.setState({dataUri: dataUri});\r\n\t\t})\r\n\t}\r\n\t\r\n\tonMainImgChange(src) {\r\n\t\tthis.setState({mainImg: src});\r\n\t}\r\n\r\n\tonSubmit(e) {\r\n\t\te.preventDefault();\r\n\t\tlet username;\r\n\t\tif ((username = this.db.getCurrentUser().username) === \"Guest\") {\r\n\t\t\tthis.props.addSnackbar(\"info\", \"You have to sign in to add experiences.\")\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet names = [\"name\", \"img\", \"country\", \"city\", \"description\", \"documentation\", \"transportation\", \"accomodation\"];\r\n\t\tlet exp = {};\r\n\t\tnames.forEach( (n) => {\r\n\t\t\texp[n] = document.querySelector(\"input[name=\" + n + \"],textarea[name=\" + n + \"]\")?.value;\r\n\t\t});\r\n\t\t//exp.img = this.state.dataUri;\r\n\t\texp.username = username;\r\n\t\texp.tags = [];\r\n\t\tdocument.querySelectorAll(\".PillCheckbox input:checked\").forEach( (input) => {\r\n\t\t\texp.tags.push(input.value);\r\n\t\t});\r\n\r\n\t\texp.budget = {};\r\n\t\texp.budget.from = document.querySelector(\"input[name=budgetFrom]\")?.value;\r\n\t\texp.budget.to = document.querySelector(\"input[name=budgetTo]\")?.value;\r\n\t\texp.budget.notes = document.querySelector(\"input[name=budgetNotes]\")?.value;\r\n\r\n\t\tthis.db.addExp(exp);\r\n\t\tthis.props.addSnackbar(\"success\", \"Experience added successfully\");\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"NewExperience\">\r\n\t\t\t\t<form>\r\n\t\t\t\t\t<h2>Add Experience</h2>\r\n\t\t\t\t\t<div className=\"flex\">\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t<img src={this.state.mainImg} alt=\"🖼\"></img>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<input type=\"text\" id=\"newExpImg\" name=\"img\" placeholder=\"Main image\" onChange={(e) => this.onMainImgChange(e.target.value)}></input>\r\n\t\t\t\t\t\t<input type=\"text\" id=\"newExpName\" name=\"name\" placeholder=\"Name\"></input>\r\n\t\t\t\t\t\t<input type=\"text\" id=\"newExpCountry\" name=\"country\" placeholder=\"Country\"></input>\r\n\t\t\t\t\t\t<input type=\"text\" id=\"newExpCity\" name=\"city\" placeholder=\"City\"></input>\r\n\t\t\t\t\t\t<textarea type=\"text\" id=\"newExpDescription\" name=\"description\" placeholder=\"Description\"></textarea>\r\n\t\t\t\t\t\t<textarea id=\"newExpDocumentation\" name=\"documentation\" placeholder=\"Documentation\"></textarea>\r\n\r\n\t\t\t\t\t\t<div className=\"newExpBudget\">\r\n\t\t\t\t\t\t\t<span>Budget</span>\r\n\t\t\t\t\t\t\t<input type=\"number\" id=\"newExpBudgetFrom\" name=\"budgetFrom\" placeholder=\"From\"></input>\r\n\t\t\t\t\t\t\t<input type=\"number\" id=\"newExpBudgetTo\" name=\"budgetTo\" placeholder=\"To\"></input>\r\n\t\t\t\t\t\t\t<textarea type=\"text\" id=\"newExpBudgetNotes\" name=\"budgetNotes\" placeholder=\"Notes\"></textarea>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<textarea id=\"newExpTrasportation\" name=\"transportation\" placeholder=\"Trasnportation\"></textarea>\r\n\t\t\t\t\t\t<textarea id=\"newExpAccomodation\" name=\"accomodation\" placeholder=\"Accomodation\"></textarea>\r\n\t\t\t\t\t\t<textarea id=\"newExpUsefulLinks\" name=\"usefulLinks\" placeholder=\"Useful links\"></textarea>\r\n\t\t\t\t\t\t<Tags/>\r\n\t\t\t\t\t\t<button className=\"button-primary\" onClick={e => this.onSubmit(e)}>Add experience</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withHooks(NewExperience);\r\n\r\n/*\r\n\r\n\t\t\t\t\t\t<label htmlFor=\"newExpImg\">\r\n\t\t\t\t\t\t\t<img src={this.state.dataUri} alt=\"Upload picture\"></img>\t\r\n\t\t\t\t\t\t</label>\t\t\r\n\t\t\t\t\t\t<input type=\"file\" id=\"newExpImg\" name=\"img\" onChange={(e) => this.onFileChange(e.target.files[0])}></input>\r\n*/","import {useState, useEffect} from 'react';\r\nimport {AiFillCaretDown, AiFillCaretUp} from 'react-icons/ai';\r\nimport {Tags} from '../NewExperience/NewExperience';\r\nimport useNotificationProvider from '../NotificationProvider/useNotificationProvider';\r\nimport { useNavigate, useSearchParams } from 'react-router-dom';\r\n\r\nimport '../common.css';\r\nimport './Search.css';\r\nimport { snackbarClasses } from '@mui/material';\r\n\r\nfunction getInputValueByName(wrapperName, name) {\r\n    return document.querySelector(wrapperName + \" input[name=\" + name + \"]\").value;\r\n}\r\n\r\nfunction setInputValueByName(wrapperName, name, value) {\r\n    document.querySelector(wrapperName + \" input[name=\" + name + \"]\").value = value;\r\n}\r\n\r\nfunction AdvancedOptions(props) {\r\n    const {addSnackbar} = useNotificationProvider();\r\n    const [searchParams] = useSearchParams();\r\n    const navigate = useNavigate();\r\n    useEffect(() => {\r\n        let filter = {};\r\n        let searchObject;\r\n        \r\n        if (searchParams.get(\"searchObject\") !== null) {\r\n            searchObject = JSON.parse(searchParams.get(\"searchObject\"));\r\n            searchObject.tags = JSON.parse(searchObject.tags);\r\n            filter = searchObject;\r\n        }\r\n        filter.tags?.forEach( (tag) => {\r\n            document.querySelector(`.AdvancedOptions .PillCeckbox input[name=${tag}]`).checked = true;\r\n        });\r\n        setInputValueByName(\".AdvancedOptions\", \"name\", filter.name || \"\");\r\n        setInputValueByName(\".AdvancedOptions\", \"location\", filter.location || \"\");\r\n        setInputValueByName(\".AdvancedOptions\", \"author\", filter.author || \"\");\r\n    }, []);\r\n\r\n    /** create a filter object on submit and send this via the URL to the searchResults page */\r\n    let handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        let wrapperName = \".AdvancedOptions\";\r\n        let searchObject = {};\r\n        searchObject.name = getInputValueByName(wrapperName, \"name\");\r\n        searchObject.location = getInputValueByName(wrapperName, \"location\");\r\n        searchObject.author = getInputValueByName(wrapperName, \"author\");\r\n        searchObject.tags = \"\";\r\n        let tags = []\r\n\t\tdocument.querySelectorAll(\".AdvancedOptions .PillCheckbox input:checked\").forEach( (input) => {\r\n\t\t\ttags.push(input.value);\r\n\t\t});\r\n        searchObject.tags = JSON.stringify(tags);\r\n        navigate('/searchResults?searchObject=' + JSON.stringify(searchObject));\r\n    };\r\n    \r\n    return (\r\n        <div className=\"AdvancedOptions\">\r\n            <form className=\"form-dialog\" onSubmit={handleSubmit} action=\"searchResult\">\r\n                <div className=\"flex\">\r\n                    <input type=\"text\" name=\"name\" placeholder=\"Name\"/>\r\n                    <input type=\"text\" name=\"location\" placeholder=\"Location\"/>\r\n                    <input type=\"text\" name=\"author\" placeholder=\"Author\"/>\r\n                    <Tags/>\r\n                    <button type=\"submit\" className=\"button-submit\">Search</button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default function Search(props) {\r\n    let [advanced, setAdvanced] = useState(false);\r\n    let [searchParams] = useSearchParams();\r\n    let navigate = useNavigate();\r\n    let handleChange = (e) => {\r\n\r\n    };\r\n\r\n    useEffect(() => {\r\n        let filter = {};\r\n        let keyword;\r\n        if ((keyword = searchParams.get(\"keyword\")) !== null)\r\n            filter = {keyword: keyword};\r\n        setInputValueByName(\".Search\", \"keyword\", filter.keyword || \"\");\r\n    }, []);\r\n\r\n    /** sets the keyword GET parameter and navigates to sthe searchResults page */\r\n    let handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        let keyword = e.target.querySelector(\"input[name=keyword]\").value;\r\n        navigate(\"/searchResults?keyword=\" + keyword);\r\n    };\r\n\r\n    return (\r\n        <div className=\"Search input-with-send\">\r\n            <form onSubmit={handleSubmit}>\r\n                <input type=\"text\" name=\"keyword\" placeholder=\"author, name, location,...\" className=\"main-search\" onKeyPress={handleChange} onChange={handleChange}/>\r\n                <button type=\"button\" onClick={e => setAdvanced(!advanced)}>\r\n                    {advanced ? <AiFillCaretUp /> : <AiFillCaretDown />}\r\n                </button>\r\n            </form>\r\n            {advanced && <AdvancedOptions/>}\r\n        </div>\r\n    );\r\n}","export default __webpack_public_path__ + \"static/media/athens.dfe3c0de.jpg\";","import React from \"react\";\r\nimport Grid from \"@mui/material/Grid\";\r\nimport '../common.css';\r\nimport \"./Home.css\";\r\nimport Search from \"../Search/Search\";\r\nimport {Tile} from \"../Tile/Tile\";\r\nimport Athens from \"../img/content/athens.jpg\";\r\nimport Madrid from \"../img/content/madrid.jpg\";\r\nimport Vienna from \"../img/content/vienna.jpg\";\r\nimport London from \"../img/content/london.jpg\";\r\n\r\nclass Home extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<main className=\"Home\">\r\n\t\t\t\t<h2>Find your perfect trip</h2>\r\n\t\t\t\t<Search />\r\n\t\t\t\t<div className=\"main-Grid-wrapper\">\r\n\t\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t\t<Grid item xs={12} md={8}>\r\n\t\t\t\t\t\t\t<Tile img={Athens} h2=\"Greece\" h1=\"Athens\"/>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid item xs={12} md={4}>\r\n\t\t\t\t\t\t\t<Tile img={Madrid} h2=\"Spain\" h1=\"Madrid\"/>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid item xs={12} md={4}>\r\n\t\t\t\t\t\t\t<Tile img={Vienna} h2=\"Austria\" h1=\"Vienna\"/>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid item xs={12} md={8}>\r\n\t\t\t\t\t\t\t<Tile img={London} h2=\"England\" h1=\"London\"/>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</div>\r\n\t\t\t</main>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Home;","import NewExperience from '../NewExperience/NewExperience';\r\n\r\nimport Dialog from '@mui/material/Dialog';\r\nimport restrictAccess from '../decorators/restrictAccess';\r\nimport { useState } from 'react';\r\n\r\nimport useNotificationProvider from '../NotificationProvider/useNotificationProvider';\r\n\r\nexport default function DialogButton(props) {\r\n    const [state, setState] = useState({isNewExpOpen: false});\r\n    \r\n    const {addSnackbar} = useNotificationProvider();\r\n\r\n    const handlePopupClose = () => { //generic method for closing popups\r\n\t\tsetState({isNewExpOpen: false});\r\n\t}\r\n\r\n    return (\r\n        <div>\r\n            <button\r\n                className=\"button-primary\"\r\n                onClick={(e) => {\r\n                    restrictAccess(props.db, addSnackbar, (e) => setState({isNewExpOpen: true}));\r\n                }}\r\n            >\r\n                {props.text}\r\n            </button>\r\n            <Dialog //dialog object for showing the NewExperience form on add experience button click\r\n\t\t\t\t\topen={state.isNewExpOpen}\r\n\t\t\t\t\tonClose={handlePopupClose.bind(this)}\r\n\t\t\t\t\tscroll={'paper'}\r\n\t\t\t\t\taria-labelledby=\"scroll-dialog-title\"\r\n\t\t\t\t\taria-describedby=\"scroll-dialog-description\"\r\n\t\t\t\t\tmaxWidth=\"lg\"\r\n\t\t\t\t\tclassName=\"Tile-dialog\"\r\n\t\t\t>\r\n                {props.children}\r\n            </Dialog>\r\n        </div>\r\n    );\r\n}","export default function restrictAccess(db, addSnackbar, callback) {\r\n    if (db.getCurrentUser().username === \"Guest\") {\r\n        addSnackbar(\"error\", \"You have to sign in to use that feature.\")\r\n    }\r\n    else {\r\n        callback();\r\n    }\r\n}","import React from \"react\";\r\nimport Grid from \"@mui/material/Grid\";\r\nimport User from \"../User/User\";\r\nimport ExpTile, {checkExpAndFill} from \"../Tile/Tile\";\r\nimport '../common.css';\r\nimport \"../Home/Home.css\";\r\nimport \"./Experiences.css\";\r\nimport {AiFillHeart} from 'react-icons/all'\r\nimport withHooks from '../withHooks';\r\nimport Search from '../Search/Search';\r\nimport DialogButton from \"../DialogButton/DialogButton\";\r\nimport NewExperience from '../NewExperience/NewExperience';\r\n\r\n/*\r\nThis is the experiences menu page, at /experiences\r\n*/\r\n\r\n/**\r\n * User row in the table for UserRanking\r\n */\r\nfunction UserRow(props) {\r\n\treturn (\r\n\t\t<tr className=\"UserRow\" key={props.user.username}>\r\n\t\t\t<td><User user={props.user}/></td>\r\n\t\t\t<td>{props.user.numberLikes}<AiFillHeart className=\"AiFillHeart\"/></td>\r\n\t\t</tr>\r\n\t);\r\n}\r\n\r\n/**\r\n * User ranking table, ranks users based on the accumulated number of likes among their experiences\r\n*/\r\nfunction UserRanking(props) {\r\n\tlet users = props.topUsers.map( (user) => {\r\n\t\treturn <UserRow user={user}/>\r\n\t});\r\n\treturn (\r\n\t\t<table className=\"UserRanking\">\r\n\t\t\t<thead>\r\n\t\t\t\t<tr className=\"UserRow\">\r\n\t\t\t\t\t<th>Username</th>\r\n\t\t\t\t\t<th>Likes</th>\r\n\t\t\t\t</tr>\r\n\t\t\t</thead>\r\n\t\t\t<tbody>\r\n\t\t\t\t{users}\r\n\t\t\t</tbody>\r\n\t\t</table>\r\n\t);\r\n}\r\n/**\r\n * Experiences class for showing 4 best rated experiences and the UserRanking\r\n */\r\nclass Experiences extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.db = props.db;\r\n\t\tthis.state = {isNewExpOpen: false};\r\n\t}\r\n\r\n\tcomponentDidMount() { //updates itself, for the UserRanking to update\r\n\t\tthis.interval = setInterval(() => this.setState({}), 0.2 * 60 * 1000);\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tclearInterval(this.interval);\r\n\t}\r\n\r\n\thandlePopupClose() { //generic method for closing popups\r\n\t\tthis.setState({isNewExpOpen: false});\r\n\t}\r\n\r\n  \trender() {\r\n\t\tlet topExp = [];\r\n\t\ttopExp = this.db.getTopExp(4); //gete 4 top experiences from the database to show in the grid\r\n\t\treturn (\r\n\t\t\t<main className=\"Experiences\">\r\n\t\t\t\t<h2>Experiences</h2>\r\n\t\t\t\t<Search />\r\n\t\t\t\t<div className=\"main-flex\">\r\n\t\t\t\t\t<div className=\"main-Grid-wrapper main-column-grid\">\r\n\t\t\t\t\t\t<Grid container spacing={2} className=\"main-Grid-container\">\r\n\t\t\t\t\t\t\t<Grid item xs={12} md={7}>\r\n\t\t\t\t\t\t\t\t<ExpTile exp={checkExpAndFill(topExp.length >= 1 ? topExp[0] : {})} db={this.db} />\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t<Grid item xs={12} md={5}>\r\n\t\t\t\t\t\t\t\t<ExpTile exp={checkExpAndFill(topExp.length >= 2 ? topExp[1] : {})} db={this.db} />\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t<Grid item xs={12} md={8}>\r\n\t\t\t\t\t\t\t\t<ExpTile exp={checkExpAndFill(topExp.length >= 3 ? topExp[2] : {})} db={this.db} />\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t<Grid item xs={12} md={4}>\r\n\t\t\t\t\t\t\t\t<ExpTile exp={checkExpAndFill(topExp.length >= 4 ? topExp[3] : {})} db={this.db} />\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"main-column-users\">\r\n\t\t\t\t\t\t<aside>\r\n\t\t\t\t\t\t\t<DialogButton db={this.db} text=\"Add experience\">\r\n\t\t\t\t\t\t\t\t<NewExperience db={this.db}/>\r\n\t\t\t\t\t\t\t</DialogButton>\r\n\t\t\t\t\t\t\t<UserRanking topUsers={this.db.getTopUsers(10)}/>\r\n\t\t\t\t\t\t</aside>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</main>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withHooks(Experiences);","import React from 'react';\r\nimport '../common.css';\r\nimport './UserProfile.css';\r\n\r\nimport Grid from \"@mui/material/Grid\";\r\nimport ExpTile, {checkExpAndFill} from \"../Tile/Tile\";\r\nimport { useParams } from 'react-router';\r\nimport { UserAvatar } from '../User/User';\r\nimport { Tabs, Tab } from '@mui/material';\r\nimport withHooks from '../withHooks';\r\nimport DialogButton from '../DialogButton/DialogButton';\r\nimport NewExperience from '../NewExperience/NewExperience';\r\nimport NewCollection from '../NewCollection/NewCollection';\r\nimport { CollectionTile } from '../Tile/Tile';\r\n//import {withRouter} from '../App';\r\n\r\nexport const withRouter = WrappedComponent => props => {\r\n  const params = useParams();\r\n  return (\r\n    <WrappedComponent\r\n      {...props}\r\n      params={params}\r\n    />\r\n  );\r\n};\r\n\r\nclass UserProfile extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {user: this.props.db.getCurrentUser(), tabValue: \"experiences\"};\r\n  }\r\n\r\n  handleTabChange(e, newValue) {\r\n    this.setState({tabValue: newValue});\r\n  }\r\n\r\n  render() {\r\n    let params = this.props.params;\r\n    let viewedUser = this.props.db.getUser(params.username);\r\n    let content;\r\n    if (this.state.tabValue === \"experiences\") {\r\n      let topUserExp = this.props.db.getTopExpByUser(params.username, 4);\r\n      content = (\r\n        <div>\r\n          {viewedUser.username === this.props.db.getCurrentUser().username && \r\n            <DialogButton db={this.props.db} text=\"Add experience\">\r\n              <NewExperience db={this.props.db}/>\r\n            </DialogButton>\r\n          }\r\n          <Grid container spacing={2} className=\"main-Grid-container\">\r\n            <Grid item xs={12} md={7}>\r\n              <ExpTile exp={checkExpAndFill(topUserExp.length >= 1 ? topUserExp[0] : {})} db={this.props.db} />\r\n            </Grid>\r\n            <Grid item xs={12} md={5}>\r\n              <ExpTile exp={checkExpAndFill(topUserExp.length >= 2 ? topUserExp[1] : {})} db={this.props.db} />\r\n            </Grid>\r\n            <Grid item xs={12} md={8}>\r\n              <ExpTile exp={checkExpAndFill(topUserExp.length >= 3 ? topUserExp[2] : {})} db={this.props.db} />\r\n            </Grid>\r\n            <Grid item xs={12} md={4}>\r\n              <ExpTile exp={checkExpAndFill(topUserExp.length >= 4 ? topUserExp[3] : {})} db={this.props.db} />\r\n            </Grid>\r\n          </Grid>\r\n        </div>\r\n      );\r\n    }\r\n    else {\r\n      let userCollections = this.props.db.getCollectionsByUser(params.username, -1);\r\n      content = (\r\n        <div>\r\n          {viewedUser.username === this.props.db.getCurrentUser().username && \r\n            <DialogButton db={this.props.db} text=\"Add collection\">\r\n              <NewCollection db={this.props.db}/>\r\n            </DialogButton>\r\n          }\r\n          <Grid container spacing={2} className=\"main-Grid-container\">\r\n            <Grid item xs={12} md={7}>\r\n              <CollectionTile collection={userCollections.length > 0 && userCollections[0]} db={this.props.db} />\r\n            </Grid>\r\n            <Grid item xs={12} md={5}>\r\n              <CollectionTile collection={userCollections.length > 1 && userCollections[1]} db={this.props.db} />\r\n            </Grid>\r\n            <Grid item xs={12} md={8}>\r\n              <CollectionTile collection={userCollections.length > 2 && userCollections[2]} db={this.props.db} />\r\n            </Grid>\r\n            <Grid item xs={12} md={4}>\r\n              <CollectionTile collection={userCollections.length > 3 && userCollections[3]} db={this.props.db} />\r\n            </Grid>\r\n          </Grid>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n\t\t<main className=\"UserProfile\">\r\n\t\t\t<h2><UserAvatar user={viewedUser} />{params.username+\"'s profile\"}</h2>\r\n      <Tabs\r\n        value={this.state.tabValue}\r\n        onChange={this.handleTabChange.bind(this)}\r\n        TabIndicatorProps={{style: {backgroundColor: \"var(--color-primary)\"}}}\r\n        textColor=\"inherit\"\r\n        style={{color: \"var(--color-primary)\"}}\r\n        aria-label=\"experiences and collection tabs\"\r\n        classes={{root: \"Tabs\"}}\r\n      >\r\n        <Tab value=\"experiences\" label=\"Experiences\" />\r\n        <Tab value=\"collections\" label=\"Collections\" />\r\n      </Tabs>\r\n\t\t\t<div className=\"main-Grid-wrapper\">\r\n        {content}\r\n      </div>\r\n\t\t</main>\r\n\t);\r\n  }\r\n}\r\n\r\nexport default withHooks(withRouter(UserProfile));","import React from \"react\";\r\nimport '../common.css';\r\nimport './NewCollection.css';\r\nimport '../NewExperience/NewExperience';\r\nimport withHooks from \"../withHooks\";\r\n\r\nclass NewCollection extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {mainImg: \"\"};\r\n\t\tthis.db = props.db;\r\n\t}\r\n\t\r\n\tonMainImgChange(src) {\r\n\t\tthis.setState({mainImg: src});\r\n\t}\r\n\r\n\tonSubmit(e) {\r\n\t\te.preventDefault();\r\n\t\tlet username;\r\n\t\tif ((username = this.db.getCurrentUser().username) === \"Guest\") {\r\n\t\t\tthis.props.addSnackbar(\"info\", \"You have to sign in to add experiences.\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet names = [\"name\", \"img\", \"description\"];\r\n\t\tlet collection = {};\r\n\t\tnames.forEach( (n) => {\r\n\t\t\tcollection[n] = document.querySelector(\"input[name=\" + n + \"],textarea[name=\" + n + \"]\")?.value;\r\n\t\t});\r\n\t\tcollection.username = username;\r\n\r\n\t\tthis.db.addCollection(collection);\r\n\t\tthis.props.addSnackbar(\"success\", \"Experience added successfully\");\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"NewExperience NewCollection\">\r\n\t\t\t\t<form>\r\n\t\t\t\t\t<h2>Add Collection</h2>\r\n\t\t\t\t\t<div className=\"flex\">\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t<img src={this.state.mainImg} alt=\"🖼\"></img>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<input type=\"text\" id=\"newCollectionImg\" name=\"img\" placeholder=\"Main image\" onChange={(e) => this.onMainImgChange(e.target.value)}></input>\r\n\t\t\t\t\t\t<input type=\"text\" id=\"newCollectionName\" name=\"name\" placeholder=\"Name\"></input>\r\n\t\t\t\t\t\t<textarea type=\"text\" id=\"newCollectionDescription\" name=\"description\" placeholder=\"Description\"></textarea>\r\n\t\t\t\t\t\t<button className=\"button-primary\" onClick={e => this.onSubmit(e)}>Add experience</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withHooks(NewCollection);\r\n\r\n/*\r\n\r\n\t\t\t\t\t\t<label htmlFor=\"newExpImg\">\r\n\t\t\t\t\t\t\t<img src={this.state.dataUri} alt=\"Upload picture\"></img>\t\r\n\t\t\t\t\t\t</label>\t\t\r\n\t\t\t\t\t\t<input type=\"file\" id=\"newExpImg\" name=\"img\" onChange={(e) => this.onFileChange(e.target.files[0])}></input>\r\n*/","import \"../common.css\";\r\nimport \"./Footer.css\";\r\n\r\nimport {Logo} from '../App';\r\nimport { BsFacebook, BsInstagram, BsTwitter } from \"react-icons/bs\";\r\n\r\nfunction shuffleArray(array) {\r\n    for (var i = array.length - 1; i > 0; i--) {\r\n        var j = Math.floor(Math.random() * (i + 1));\r\n        var temp = array[i];\r\n        array[i] = array[j];\r\n        array[j] = temp;\r\n    }\r\n    return array;\r\n}\r\n\r\nexport default function Footer(props) {\r\n    let authors = [\"Lukas\", \"Julia\", \"Aniya\", \"Archana\"];\r\n    let liAuthors = shuffleArray(authors).map( (author) => {\r\n        return <li>{author}</li>\r\n    });\r\n    return (\r\n        <footer>\r\n            <div className=\"flex\">\r\n                <div className=\"column-logo\">\r\n                    <Logo />\r\n                </div>\r\n                <div className=\"column-authors\">\r\n                    <ul className=\"ul-links\">\r\n                        {liAuthors}\r\n                    </ul>\r\n                </div>\r\n                <div className=\"column-links\">\r\n                    <ul className=\"ul-links\">\r\n                        <li><a href=\"\">FAQ</a></li>\r\n                        <li><a href=\"\">Terms {\"&\"} conditions</a></li>\r\n                    </ul>\r\n                </div>\r\n                <div className=\"column-icons\">\r\n                    <ul className=\"ul-icons\">\r\n                        <li><a href=\"\" className=\"icon-facebook\"><BsFacebook /></a></li>\r\n                        <li><a href=\"\" className=\"icon-instagram\"><BsInstagram /></a></li>\r\n                        <li><a href=\"\" className=\"icon-twitter\"><BsTwitter /></a></li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </footer>\r\n    );\r\n}","import useNotificationProvider from './useNotificationProvider';\r\nimport MySnackbar from '../MySnackbar';\r\n\r\nexport default function NotificationInterface() {\r\n  const { snackbar, removeSnackbar } = useNotificationProvider();\r\n\r\n  const handleClose = () => {\r\n    removeSnackbar(snackbar.severity, snackbar.message);\r\n  };\r\n\r\n  return (\r\n    <MySnackbar \r\n        open={snackbar?.open} \r\n        message={snackbar?.message} \r\n        severity={snackbar?.severity} \r\n        onClose={handleClose}\r\n    />\r\n  )\r\n}","import \"./SearchResults.css\";\r\nimport { useState } from \"react\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\nimport ExpTile, {checkExpAndFill} from \"../Tile/Tile\";\r\nimport { Grid } from \"@mui/material\";\r\nimport Search from '../Search/Search';\r\n\r\nexport default function SearchResults(props) {\r\n  const [state, setState] = useState({});\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const db = props.db;\r\n\r\n  let keyword;\r\n  let resultExps = [];\r\n\r\n  if ((keyword = searchParams.get(\"keyword\")) !== null) { //simple search\r\n    resultExps = db.getFilteredExps({keyword: keyword});\r\n  }\r\n  else { //advanced search\r\n    let searchObject = JSON.parse(searchParams.get(\"searchObject\"));\r\n    searchObject.tags = JSON.parse(searchObject.tags);\r\n    resultExps = db.getFilteredExps(searchObject);\r\n  }\r\n\r\n  //this part sets a random width of the resulting experiences in a grid and creates the result grid itself\r\n  let first = 0;\r\n  let counter = -1;\r\n  let md;\r\n  let gridTiles = resultExps.map((exp) => {\r\n    counter++;\r\n    if (counter % 2 === 0) {\r\n      md = first = Math.round((Math.random()*4))+4;\r\n    }\r\n    else {\r\n      md = 12 - first;\r\n    }\r\n    return (\r\n      <Grid item xs={12} md={md}>\r\n        <ExpTile exp={checkExpAndFill(exp)} db={db}/>\r\n      </Grid>\r\n    )\r\n  });\r\n  \r\n  return (\r\n    <main className=\"SearchResults\">\r\n      <h2>Search results</h2>\r\n      <Search />\r\n      <div className=\"main-flex\">\r\n        <Grid container spacing={2} className=\"main-Grid-container\">\r\n          {gridTiles}\r\n        </Grid>\r\n      </div>\r\n    </main>\r\n  );\r\n}","import './common.css';\r\nimport './App.css';\r\nimport DB from './DB';\r\nimport logo from './img/logo_placeholder.png';\r\nimport Nav from './Nav/Nav';\r\nimport React from 'react';\r\nimport Home from './Home/Home';\r\nimport Experiences from './Experiences/Experiences';\r\nimport {Routes , Route} from 'react-router-dom';\r\nimport UserProfile from './UserProfile/UserProfile';\r\nimport Footer from './Footer/Footer';\r\nimport NotificationInterface from './NotificationProvider/NotificationInterface';\r\nimport NotificationProvider from './NotificationProvider/NotificationProvider';\r\nimport SearchResults from './SearchResults/SearchResults';\r\n\r\nexport function Logo(props) {\r\n  return (\r\n    <img src={logo} alt=\"logo\" className=\"Logo\"></img>\r\n  );\r\n}\r\n\r\nexport function Brand(props) {\r\n  return (\r\n    <span className=\"Brand\">\r\n      <Logo/>\r\n      <h1>Travelify</h1>\r\n    </span>\r\n  );\r\n}\r\n\r\nexport function Header() {\r\n  return (\r\n    <header>\r\n      <div className=\"header-flex\">\r\n        <div className=\"header-column-logo\">\r\n          <Brand/>          \r\n        </div>\r\n        <div className=\"header-column-phrase\">\r\n          <span className=\"phrase\">\"Discover your next adventure on Travelify\"</span>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nfunction setDbBeforeUnload(db) {\r\n  window.onbeforeunload = (e) => {\r\n    db.saveIntoLocalStorage();\r\n  };\r\n}\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.db = new DB(this.setCurrentUser.bind(this))\r\n    this.state = {user: this.db.getCurrentUser(), isDatabaseLoaded: false};\r\n  }\r\n\r\n  setCurrentUser(newUser) {\r\n    this.setState({user: newUser});\r\n    console.log(\"User changed to \" + newUser.username);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.db.loadFromLocalStorage();\r\n    this.setState({isDatabaseLoaded: true});\r\n    setDbBeforeUnload(this.db);\r\n }\r\n\r\n  render() {\r\n    let pageContent;\r\n    return (\r\n      <NotificationProvider>\r\n        <div className=\"App\">\r\n          <Routes>\r\n            <Route path=\"/\" element={<Header/>}/>\r\n          </Routes>\r\n          <Nav db={this.db}/>\r\n          <Routes >\r\n            <Route path=\"/destinations\" element={<span>Destinations</span>}/>\r\n            <Route path=\"/experiences\" element={<Experiences db={this.db}/>}/>\r\n            <Route path=\"/searchResults\" element={<SearchResults db={this.db}/>} />\r\n            <Route path=\"/userProfile/:username\" element={<UserProfile db={this.db}/>}/>      \r\n            <Route path=\"/\" element={<Home/>} />\r\n          </Routes >\r\n          {pageContent}\r\n          <Footer />\r\n        </div>\r\n        <NotificationInterface />\r\n      </NotificationProvider>\r\n    );\r\n  };\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport {HashRouter} from 'react-router-dom';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <HashRouter basename=\"/\">\r\n      <App />\r\n    </HashRouter>\r\n    \r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}