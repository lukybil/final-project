(this["webpackJsonpfinal-project"]=this["webpackJsonpfinal-project"]||[]).push([[0],{104:function(e,t,s){},105:function(e,t,s){},106:function(e,t,s){},107:function(e,t,s){},108:function(e,t,s){},109:function(e,t,s){},110:function(e,t,s){},113:function(e,t,s){},114:function(e,t,s){},115:function(e,t,s){"use strict";s.r(t);var n=s(2),i=s.n(n),a=s(37),r=s.n(a),c=(s(96),s(14)),o=s(15),l=s(50),u=s(20),d=s(19),h=(s(26),s(97),s(30)),j=s(18),p=s.p+"static/media/colleseum.9508f973.jpg",b=s.p+"static/media/madrid.34925a2b.jpg",m=s.p+"static/media/vienna.4dc4c94d.jpg",x=s.p+"static/media/london.425bc017.jpg",O=(s(69),s(98),s(39)),g=s(141),v=(s(70),s(27)),f=s(1);function k(e){return""===e.user.profileImg?Object(f.jsx)("span",{className:"UserAvatar",style:{backgroundColor:e.user.defaultAvatarColor},children:Object(f.jsx)("span",{children:e.user.username.charAt(0).toUpperCase()})}):Object(f.jsx)("img",{className:"UserAvatar",src:e.user.profileImg,alt:"User avatar"})}var y=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){var e=this.props.user,t=void 0===this.props.isWithUserCard,s="";return void 0===e?Object(f.jsx)("span",{children:"User undefined"}):(t&&(s=Object(f.jsxs)("div",{className:"User-card",children:[Object(f.jsx)(k,{user:e}),Object(f.jsx)("span",{children:e.username}),Object(f.jsxs)("span",{children:[Object(f.jsx)(O.c,{}),e.numberLikes]})]})),Object(f.jsx)("div",{className:"User",children:Object(f.jsxs)(v.b,{to:"/userProfile/".concat(e.username),children:[Object(f.jsxs)("span",{children:[Object(f.jsx)(k,{user:e}),Object(f.jsx)("span",{className:"username",children:e.username})]}),s]})}))}}]),s}(i.a.Component),S=y,C=s(43),N=s(77),U=s(9),w=i.a.createContext({snackbar:null,addSnackbar:function(){},removeSnackbar:function(){}});function E(e){var t=e.children,s=Object(n.useState)(null),i=Object(U.a)(s,2),a=i[0],r=i[1],c={snackbar:a,addSnackbar:Object(n.useCallback)((function(e,t){return function(e,t){return r({open:!0,severity:e,message:t})}(e,t)}),[]),removeSnackbar:Object(n.useCallback)((function(e,t){return function(e,t){return r({open:!1,severity:e,message:t})}(e,t)}),[])};return Object(f.jsx)(w.Provider,{value:c,children:t})}function I(){var e=Object(n.useContext)(w);return{snackbar:e.snackbar,addSnackbar:e.addSnackbar,removeSnackbar:e.removeSnackbar}}var A=I;var L=function(e){return function(t){var s=A(),n=s.snackbar,i=s.addSnackbar;s.removeSnackbar;return Object(f.jsx)(e,Object(h.a)(Object(h.a)({},t),{},{snackbar:n,addSnackbar:i}))}},P=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).state={isPopupOpen:!1},n}return Object(o.a)(s,[{key:"handlePopupClose",value:function(){this.setState({isPopupOpen:!1})}},{key:"generatePopup",value:function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)("img",{src:this.props.img,alt:this.props.h1}),Object(f.jsx)("h2",{children:this.props.h1}),Object(f.jsx)("div",{children:this.props.likes})]})}},{key:"render",value:function(){var e,t=this;return void 0!==this.props.likes&&(e=Object(f.jsxs)("span",{className:"Tile-likes",children:[Object(f.jsx)(O.c,{}),this.props.likes]})),Object(f.jsxs)("div",{className:"Tile",onClick:"withPopup"===this.props.type?function(e){t.state.isPopupOpen||""===t.props.exp.id||t.setState({isPopupOpen:!0})}:void 0,children:[Object(f.jsx)("img",{src:this.props.img,alt:this.props.h1,className:"Tile-img"}),Object(f.jsxs)("div",{className:"h-wrapper",children:[Object(f.jsx)("span",{className:"Tile-h2",children:this.props.h2}),Object(f.jsx)("span",{className:"Tile-h1",children:this.props.h1})]}),e,Object(f.jsx)(g.a,{open:this.state.isPopupOpen,onClose:this.handlePopupClose.bind(this),scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",maxWidth:"lg",className:"Tile-dialog",children:void 0!==this.props.popupElement?this.props.popupElement:this.generatePopup()})]})}}]),s}(i.a.Component);function M(e){var t=e.collection;return Object(f.jsx)(P,{type:"withPopup",img:t.img,h1:t.name,h2:t.username,popupElement:Object(f.jsxs)("div",{className:"Tile-Dialog-flex",children:[Object(f.jsx)("div",{style:{position:"relative"},children:Object(f.jsx)("img",{className:"main-img",src:t.img,alt:t.h1})}),Object(f.jsxs)("div",{className:"wrapper",children:[Object(f.jsx)("h2",{children:t.name}),Object(f.jsx)(S,{user:e.db.getUser(t.username)}),Object(f.jsx)("table",{children:Object(f.jsx)("tbody",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:"Description: "}),Object(f.jsx)("td",{children:t.description})]})})})]})]}),exp:t})}function D(e){return Object(f.jsx)("span",{className:"TagPill",children:e.value})}function F(e){("object"!==typeof e||Array.isArray(e)||null===e)&&(e={});return["id","name","country","city","username","description","documentation","budget","transportation","accomodation"].forEach((function(t){void 0===e[t]&&(e[t]="")})),(void 0===e.likes||!e.likes instanceof Set)&&(e.likes=new Set),void 0!==e.usefulLinks&&Array.isArray(e.usefulLinks)||(e.usefulLinks=[]),void 0!==e.tags&&Array.isArray(e.tags)||(e.tags=[]),void 0!==e.comments&&Array.isArray(e.comments)||(e.comments=[]),e}function J(e){return Object(f.jsxs)("span",{className:"input-with-send",children:[Object(f.jsx)("input",{type:"text",className:"main-search"}),Object(f.jsx)("button",{onClick:function(t){var s=t.target.closest(".input-with-send").querySelector("input");e.db.postComment(e.exp.id,s.value),s.value="",e.setState({})},children:Object(f.jsx)(N.a,{})})]})}var V=L(function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).state={isHeartPresent:!1},n}return Object(o.a)(s,[{key:"generateComment",value:function(e){return Object(f.jsxs)("div",{className:"Tile-Dialog-Comment",children:[Object(f.jsx)(S,{user:this.props.db.getUser(e.username)}),Object(f.jsxs)("span",{className:"date",children:[" ",this.props.db.dateToFullFormat(e.date)]}),Object(f.jsx)("p",{children:e.content})]})}},{key:"showHeart",value:function(){var e=this;this.setState({isHeartPresent:!0}),setTimeout((function(t){return e.setState({isHeartPresent:!1})}),3e3)}},{key:"handleImageDoubleClick",value:function(){"Guest"===this.props.db.getCurrentUser().username?this.openSignInNeedSnackbar():(this.props.db.likeExp(this.props.exp.id),this.showHeart())}},{key:"openSignInNeedSnackbar",value:function(){console.log(this),this.props.addSnackbar("error","You have to sign in to perform that action.")}},{key:"deleteExp",value:function(){this.props.db.deleteExp(this.props.exp.id)}},{key:"generatePopup",value:function(){for(var e=this,t=this.props.exp,s=t.usefulLinks.map((function(e){return Object(f.jsxs)("span",{children:[Object(f.jsx)("a",{href:e,children:e}),Object(f.jsx)("br",{})]})})),n=[],i=t.comments.length-1;i>=0;i--)n.push(this.generateComment(t.comments[i]));var a=t.tags.map((function(e){return Object(f.jsx)(D,{value:e})})),r="";this.state.isHeartPresent&&(r=Object(f.jsx)(O.c,{className:"big-heart"}));var c=["country","city","description","documentation","budget","transportation","accomodation","usefulLinks","tags"].map((function(e){var n=e.charAt(0).toUpperCase()+e.slice(1),i=t[e];switch(e){case"usefulLinks":n="Useful links",i=s;break;case"budget":i=Object(f.jsxs)("span",{children:["Budget: ",t.budget.from,"\u20ac-",t.budget.to,"\u20ac Notes: ",t.budget.notes]});break;case"tags":i=a}return Object(f.jsxs)("tr",{children:[Object(f.jsxs)("td",{children:[n,": "]}),Object(f.jsx)("td",{children:i})]})})),o="";return this.props.db.getCurrentUser().username===t.username&&(o=Object(f.jsx)("button",{className:"delete-button",onClick:this.deleteExp.bind(this),children:Object(f.jsx)(C.b,{})})),Object(f.jsxs)("div",{className:"Tile-Dialog-flex",children:[Object(f.jsxs)("div",{className:"Tile-Dialog-column-info",children:[Object(f.jsxs)("div",{style:{position:"relative"},children:[Object(f.jsx)("img",{className:"main-img",src:t.img,alt:t.h1,onDoubleClick:function(t){return e.handleImageDoubleClick()}}),r]}),Object(f.jsxs)("div",{className:"wrapper",children:[Object(f.jsx)("h2",{children:t.name}),Object(f.jsx)(S,{user:this.props.db.getUser(t.username)}),Object(f.jsxs)("p",{children:[Object(f.jsx)(O.c,{})," ",t.likes.size]}),o,Object(f.jsx)("table",{children:Object(f.jsx)("tbody",{children:c})})]})]}),Object(f.jsx)("div",{className:"Tile-Dialog-column-comments",children:Object(f.jsxs)("div",{children:[Object(f.jsx)("h3",{children:"Comments"}),"Guest"!==this.props.db.getCurrentUser().username?Object(f.jsx)(J,{exp:t,db:this.props.db,setState:this.setState.bind(this)}):"",n]})})]})}},{key:"render",value:function(){var e=this.props.exp;return Object(f.jsx)(P,{type:"withPopup",img:e.img,h1:e.name,h2:e.username,likes:e.likes.size,popupElement:this.generatePopup(),exp:e})}}]),s}(i.a.Component)),B={username:"Guest",email:"none",profileImg:"data:image/png;base64,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",numberLikes:0},T={id:-1,name:"",img:"",country:"",city:"",username:"",description:".",likes:new Set([""]),documentation:"",budget:{from:-1,to:-1,notes:""},transportation:"",accomodation:"",usefulLinks:[],tags:[],comments:[]},R=function(){function e(t){Object(c.a)(this,e),this.colors=["abdee6","cbaacb","ffffb5","ffccb60","f3b0c3","fee1e8","fed7c3","ecd5e3","d4f0f0","cce2cb","b6cfb6","97c1a9","a2e1db"],this.usersMap=new Map([["kingkong",{username:"kingkong",email:"kingkong@gmail.comm",password:"p",defaultAvatarColor:this.getRandomColor(),profileImg:"",numberLikes:0}],["godzilla",{username:"godzilla",email:"gzilla@gmail.comm",password:"p",defaultAvatarColor:this.getRandomColor(),profileImg:"",numberLikes:0}],["charlie",{username:"charlie",email:"ch.arlie@gmail.comm",password:"p",defaultAvatarColor:this.getRandomColor(),profileImg:"",numberLikes:0}],["boris",{username:"boris",email:"boris.sluklov@gmail.comm",password:"p",defaultAvatarColor:this.getRandomColor(),profileImg:"",numberLikes:0}]]),this.topUsersList=[],this.currentUser=B,this.nextExpId=2,this.experiences=[{id:0,name:"Erasmus in Madrid",img:b,country:"Spain",city:"Madrid",username:"kingkong",description:"A whole semester spent in the city of liberty in Europe.",likes:new Set(["godzilla","charlie","boris"]),documentation:"ID for EU Citizens",budget:{from:600,to:800,notes:"Accomodation can be costly."},transportation:"Metro is very good",accomodation:"Nice",usefulLinks:["spain.com","madrid.es"],tags:["cultural","rural","historical","business"],comments:[{username:"kingkong",date:new Date("2021-11-14 21:56:48"),content:"Yo bro, very cool trip bro, wassup btw how ya doin bro, yo cool?"},{username:"boris",date:new Date("2021-11-15 15:01:03"),content:"Hello broder, gud to see you."}]},{id:1,name:"A trip to Rome",img:p,country:"Italy",city:"Rome",username:"godzilla",description:"A week long trip to Rome, we saw many cool places, it was amazing.",likes:new Set(["godzilla","charlie","boris"]),documentation:"ID for EU Citizens",budget:{from:600,to:800,notes:"Accomodation can be costly."},transportation:"Metro is available as well as okay buses.",accomodation:"Cheap on the outskirst but also dirty surroundings",usefulLinks:["italy.com","rome.it"],tags:["cultural","historical"],comments:[{username:"kingkong",date:new Date("2021-11-17 21:40:32"),content:"Hi so did you like it bra?"}]}],this.collections=[{id:0,name:"",img:"",username:"",description:"",experiences:[this.experiences[0]]}],this.appSetCurrentUser=t}return Object(o.a)(e,[{key:"startup",value:function(){this.updateUserLikesAmount(),this.updateTopUsersList(),setInterval(this.updateUserLikesAmount.bind(this),12e3),setInterval(this.updateTopUsersList.bind(this),12e3)}},{key:"setAppSetCurrentUser",value:function(e){this.appSetCurrentUser=e}},{key:"saveIntoLocalStorage",value:function(){this.experiences.forEach((function(e){e.likes=Array.from(e.likes)})),localStorage.setItem("usersMap",JSON.stringify(Object(j.a)(this.usersMap))),localStorage.setItem("experiences",JSON.stringify(this.experiences)),localStorage.setItem("currentUser",JSON.stringify(this.currentUser)),localStorage.setItem("nextExpId",JSON.stringify(this.nextExpId)),alert("Database saved!")}},{key:"loadFromLocalStorage",value:function(){var e=new Map(JSON.parse(localStorage.getItem("usersMap"))),t=JSON.parse(localStorage.getItem("experiences")),s=JSON.parse(localStorage.getItem("currentUser")),n=JSON.parse(localStorage.getItem("nextExpId"));void 0!==e.get("kingkong")&&(this.usersMap=e),null!==t&&(this.experiences=t,this.experiences.forEach((function(e){e.likes=new Set(e.likes),e.comments.forEach((function(e){e.date=new Date(e.date)}))}))),null!==s&&(this.currentUser=s),null!==n&&(this.nextExpId=n),console.log("Database loaded."),console.log(this.experiences),console.log(this.usersMap),console.log(this.currentUser),console.log(this.nextExpId),this.startup()}},{key:"updateTopUsersList",value:function(){var e=this;this.topUsersList=[],this.usersMap.forEach((function(t){e.topUsersList.push(t)})),this.topUsersList.sort((function(e,t){return t.numberLikes-e.numberLikes})),this.topUsersList=this.topUsersList.slice(0,10)}},{key:"updateUserLikesAmount",value:function(){var e=new Map(this.usersMap);e.forEach((function(e){e.numberLikes=0})),this.experiences.forEach((function(t){var s=e.get(t.username);void 0!==s&&(s.numberLikes+=t.likes.size)})),this.usersMap=e}},{key:"isSignedIn",value:function(){return"Guest"!==this.getCurrentUser().username}},{key:"getTopUsers",value:function(){return this.topUsersList}},{key:"getTopExp",value:function(e){for(var t=Object(j.a)(this.experiences),s=0;s<t.length;s++)-1===t[s].id&&t.splice(s,1);return t.sort((function(e,t){return t.likes.size-e.likes.size})),t=t.slice(0,e)}},{key:"getExpById",value:function(e){var t;return-1===(t=this.experiences[e]).id?null:t}},{key:"getFilteredExps",value:function(e){if(null!==e){var t=[];if(void 0!==e.keyword&&null!==e.keyword){var s=e.keyword.toLowerCase();this.experiences.forEach((function(e){for(var n=0,i=Object.keys(e);n<i.length;n++){var a=e[i[n]];if(("string"===typeof a||a instanceof String)&&a.toLowerCase().includes(s)){-1!==e.id&&t.push(e);break}}}))}else{var n=0,i=0;""!==e.name&&i++,""!==e.author&&i++,""!==e.location&&i++,0!==e.tags.length&&i++,this.experiences.forEach((function(s){n=0,s.name.toLowerCase().includes(e.name.toLowerCase())&&""!==e.name&&n++,s.username.toLowerCase().includes(e.author.toLowerCase())&&""!==e.author&&n++,(s.city.toLowerCase().includes(e.location.toLowerCase())&&""!==e.location||s.country.toLowerCase().includes(e.location.toLowerCase())&&""!==e.location)&&n++;e:for(var a=0;a<e.tags.length;a++)for(var r=e.tags[a],c=0;c<s.tags.length;c++){if(r===s.tags[c]){n++;break e}}-1!==s.id&&n===i&&t.push(s)}))}return t}}},{key:"addExp",value:function(e){F(e),console.log(e),e.id=this.nextExpId++,void 0!==e&&this.experiences.push(e)}},{key:"deleteExp",value:function(e){var t=this.experiences[e];t.id===e&&t.username===this.currentUser.username&&(this.experiences[e]=T)}},{key:"likeExp",value:function(e){var t,s=this.getExpById(e);"Guest"!==(t=this.getCurrentUser().username)&&s.likes.add(t),console.log(s.likes)}},{key:"signupUser",value:function(e){if(!0===["username","email","password","confirmPassword"].some((function(t){return void 0===e[t]||""===e[t]})))return"Missing user data.";if(e.password!==e.confirmPassword)return"Passwords do not match.";if(delete e.confirmPassword,this.usersMap.has(e.username))return"Username already taken.";var t=!1;return this.usersMap.forEach((function(s){s.email===e.email&&(t=!0)})),!0===t?"Email is already used.":(e.numberLikes=0,e.profileImg="",e.defaultAvatarColor=this.getRandomColor(),this.usersMap.set(e.username,e),"")}},{key:"signInUser",value:function(e,t){var s=this.getUser(e);return void 0===s?null:s.password===t?(this.setCurrentUser(s),s):null}},{key:"logoutUser",value:function(){this.setCurrentUser(B),localStorage.removeItem("currentUser")}},{key:"getUser",value:function(e){return this.usersMap.get(e)}},{key:"setCurrentUser",value:function(e){this.currentUser=e,this.appSetCurrentUser(this.currentUser)}},{key:"getCurrentUser",value:function(){return this.currentUser}},{key:"getRandomColor",value:function(){var e=Math.floor(Math.random()*this.colors.length);return"#"+this.colors[e]}},{key:"updateUser",value:function(e){this.usersMap.set(e.username,e),this.getCurrentUser().username,e.username,this.setCurrentUser(e)}},{key:"getTopExpByUser",value:function(e,t){var s=[];return this.experiences.forEach((function(t){t.username===e&&s.push(t)})),s.sort((function(e,t){return t.likes.size-e.likes.size})),s=s.slice(0,t)}},{key:"dateToFullFormat",value:function(e){return e.getDate().toString().padStart(2,"0")+"-"+(e.getMonth()+1).toString().padStart(2,"0")+"-"+e.getFullYear().toString().padStart(2,"0")+" "+e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")}},{key:"postComment",value:function(e,t){this.isSignedIn()&&this.getExpById(e).comments.push({username:this.getCurrentUser().username,date:new Date,content:t})}},{key:"getCollection",value:function(e){return this.collections[e].id===e?this.collections[e]:null}},{key:"addCollection",value:function(e){if(e.username===this.getCurrentUser().username){var t;t=Object(h.a)({},e),e.id=this.collections.length,this.collections.push(t)}}},{key:"addToCollection",value:function(e,t){var s=this.getExpById(e),n=this.collections[t];s.username===t&&s.username===this.getCurrentUser().username&&n.experiences.push(s)}},{key:"getCollectionsByUser",value:function(e,t){var s=[];return this.collections.forEach((function(t){t.username===e&&s.push(t)})),-1!==t&&(s=s.slice(0,t)),s}}]),e}();R.tags=["cultural","rural","historical","business","environmental","eco-tourism"];var Y=R,q=s.p+"static/media/logo_placeholder.80914700.png",K=(s(104),s(105),L(function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).state={isFormSignIn:!0},n}return Object(o.a)(s,[{key:"onSignupSubmit",value:function(e){e.preventDefault();var t,s={};["username","email","password","confirmPassword"].forEach((function(e){var t;s[e]=null===(t=document.querySelector(".SignIn input[name="+e+"]"))||void 0===t?void 0:t.value})),""===(t=this.props.db.signupUser(s))?(this.props.addSnackbar("success","Sign in successfull!"),this.onFormSuccess()):this.props.addSnackbar("error",t)}},{key:"onSignInSubmit",value:function(e){var t,s;e.preventDefault();var n,i,a,r;(n=null===(t=document.querySelector(".SignIn input[name=username]"))||void 0===t?void 0:t.value,i=null===(s=document.querySelector(".SignIn input[name=password]"))||void 0===s?void 0:s.value,null!==(a=this.props.db.signInUser(n,i)))?(this.props.addSnackbar("success","Welcome back, "+(null===(r=a)||void 0===r?void 0:r.username)+"!"),this.onFormSuccess()):this.props.addSnackbar("error","Sign in unsuccessful.")}},{key:"onFormSuccess",value:function(){this.props.setNavState({isSignInOpen:!1})}},{key:"genSwitchButton",value:function(e){var t=this;return Object(f.jsx)("button",{className:"button-switch-forms",onClick:function(){return t.setState({isFormSignIn:!t.state.isFormSignIn})},children:e})}},{key:"render",value:function(){var e;return e=!1===this.state.isFormSignIn?Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Sign up"}),Object(f.jsx)("span",{className:"under-headline",children:"Save all your favorite experiences!"}),Object(f.jsx)("form",{children:Object(f.jsxs)("div",{className:"flex",children:[Object(f.jsx)("input",{name:"username",placeholder:"Username"}),Object(f.jsx)("input",{name:"email",placeholder:"Email"}),Object(f.jsx)("input",{name:"password",placeholder:"Password"}),Object(f.jsx)("input",{name:"confirmPassword",placeholder:"Confirm password"}),Object(f.jsx)("button",{className:"button-submit",onClick:this.onSignupSubmit.bind(this),children:"Sign up"})]})}),Object(f.jsxs)("span",{children:["Already have an account?",this.genSwitchButton("Sign in")]}),Object(f.jsxs)("span",{className:"disclaimer",children:["By signing up you agree to our",Object(f.jsx)("br",{}),"Terms ","&"," Conditions"]})]}):Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Sign in"}),Object(f.jsx)("span",{className:"under-headline",children:"Save all your favorite experiences!"}),Object(f.jsx)("form",{children:Object(f.jsxs)("div",{className:"flex",children:[Object(f.jsx)("input",{name:"username",placeholder:"Username"}),Object(f.jsx)("input",{name:"password",placeholder:"Password"}),Object(f.jsx)("button",{className:"button-submit",onClick:this.onSignInSubmit.bind(this),children:"Sign in"})]})}),Object(f.jsxs)("span",{children:["Not registered yet?",this.genSwitchButton("Sign up")]})]}),Object(f.jsx)("div",{className:"SignIn form-dialog",children:e})}}]),s}(i.a.Component))),Q=s(145),W=s(144),G=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){var e;return Object(f.jsx)(Q.a,{open:this.props.open,autoHideDuration:50*(null===(e=this.props.message)||void 0===e?void 0:e.length)+1e3,onClose:this.props.onClose,anchorOrigin:{vertical:"top",horizontal:"center"},ClickAwayListenerProps:{onClickAway:function(){}},children:Object(f.jsx)(W.a,{onClose:this.props.onClose,severity:this.props.severity,sx:{width:"100%"},children:this.props.message})})}}]),s}(i.a.Component),z=G,H=s(10),Z=(s(106),s(80)),X=s(79),_=s(78),$=s(140),ee=L(function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).state={isEditProfileOpen:!1,mixedColors:n.props.user.defaultAvatarColor,newProfileImg:n.props.user.profileImg},n}return Object(o.a)(s,[{key:"handleEditProfile",value:function(){this.setState({isEditProfileOpen:!0})}},{key:"handleEditProfileClose",value:function(){this.setState({isEditProfileOpen:!1,mixedColors:this.props.user.defaultAvatarColor})}},{key:"getValueByName",value:function(e){var t;return null===(t=document.querySelector("input[name="+e+"]"))||void 0===t?void 0:t.value}},{key:"onEditProfileSubmit",value:function(e){if(e.preventDefault(),this.props.db.getUser(this.props.user.username).password===this.getValueByName("currentPassword")){var t,s=JSON.parse(JSON.stringify(this.props.db.getUser(this.props.user.username)));if(["defaultAvatarColor","profileImg"].forEach((function(e){var t;s[e]=null===(t=document.querySelector(".UserMenu-Dialog input[name="+e+"]"))||void 0===t?void 0:t.value})),""!==(t=this.getValueByName("password"))){if(t!==this.getValueByName("confirmPassword"))return void this.props.addSnackbar("error","New passwords do not match");s.password=t}this.props.db.updateUser(s),this.props.addSnackbar("success","User data updated.")}else this.props.addSnackbar("error","Wrong current password.")}},{key:"onColorChange",value:function(e){this.setState({mixedColors:e.target.value})}},{key:"onProfileImgChange",value:function(e){this.setState({newProfileImg:e.target.value})}},{key:"render",value:function(){var e=this.props,t=this.props.user;return Object(f.jsx)($.a,{onClickAway:e.handleClickAway,children:Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{className:"UserMenu",children:Object(f.jsxs)("div",{className:"UserMenu-flex",children:[Object(f.jsx)(S,{user:t,isWithUserCard:!1}),Object(f.jsx)("hr",{}),Object(f.jsxs)("button",{onClick:this.handleEditProfile.bind(this),children:["Edit profile ",Object(f.jsx)(_.a,{})]}),Object(f.jsxs)("button",{onClick:e.handleSettings,children:["Settings ",Object(f.jsx)(X.a,{})]}),Object(f.jsxs)("button",{onClick:e.handleSignOut,className:"button-logout",children:["Sign out ",Object(f.jsx)(Z.a,{})]})]})}),Object(f.jsx)(g.a,{open:this.state.isEditProfileOpen,onClose:this.handleEditProfileClose.bind(this),scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",maxWidth:"md",className:"UserMenu-Dialog",children:Object(f.jsxs)("div",{className:"form-dialog",children:[Object(f.jsx)("h2",{children:"Edit Profile"}),Object(f.jsx)("form",{children:Object(f.jsxs)("div",{className:"flex",children:[Object(f.jsx)("input",{name:"username",placeholder:"Username",value:t.username,disabled:!0}),Object(f.jsx)("input",{name:"email",placeholder:"Email",value:t.email,disabled:!0}),Object(f.jsx)("input",{name:"currentPassword",placeholder:"Current password"}),Object(f.jsx)("input",{name:"password",placeholder:"Password"}),Object(f.jsx)("input",{name:"confirmPassword",placeholder:"Confirm password"}),Object(f.jsxs)("div",{children:[Object(f.jsx)("span",{children:"Avatar color: "}),Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{type:"color",name:"defaultAvatarColor",value:this.state.mixedColors,onChange:this.onColorChange.bind(this)}),Object(f.jsx)("span",{className:"defaultAvatarPreview UserAvatar",style:{backgroundColor:this.state.mixedColors},children:t.username.charAt(0).toUpperCase()})]})]}),Object(f.jsxs)("span",{className:"input-wrapper",children:[Object(f.jsx)("input",{name:"profileImg",placeholder:"Profile image",value:this.state.newProfileImg,onClick:function(e){return e.target.select()},onChange:this.onProfileImgChange.bind(this)}),Object(f.jsx)("img",{src:this.state.newProfileImg,alt:"",className:"UserAvatar"})]}),Object(f.jsx)("button",{className:"button-submit",onClick:this.onEditProfileSubmit.bind(this),children:"Save changes"})]})})]})})]})})}}]),s}(i.a.Component)),te=s(81);function se(e){return Object(f.jsxs)("button",{className:"Nav-button",children:[e.picture," ",Object(f.jsx)("span",{children:e.text})]})}function ne(e){return Object(f.jsx)("button",{className:"Nav-button Nav-signIn-button",onClick:e.onClick,children:"Sign In"})}var ie=L(function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).state={isSignedIn:!1,isSignInOpen:!1,isUserMenuOpen:!1,snackbar:{open:!1,severity:"info",message:""}},n}return Object(o.a)(s,[{key:"generateMenuButton",value:function(e,t){return Object(f.jsx)("li",{children:Object(f.jsx)(v.c,{to:"Home"!==e?e.toLowerCase():"/",activeClassName:"Nav-button-selected",children:Object(f.jsx)(se,{text:e,picture:t})})})}},{key:"generateSignInButton",value:function(){var e=this;return Object(f.jsx)("li",{children:Object(f.jsx)(ne,{onClick:function(t){e.state.isSignInOpen||e.setState({isSignInOpen:!0})}})})}},{key:"handleSignInClose",value:function(){this.setState({isSignInOpen:!1})}},{key:"handleSnackbarClose",value:function(){this.setState({snackbar:{open:!1,severity:this.state.snackbar.severity}})}},{key:"openSettings",value:function(){}},{key:"handleSignOut",value:function(){this.props.db.logoutUser(),this.setState({isUserMenuOpen:!1}),this.props.addSnackbar("success","Bye!")}},{key:"handleEditProfile",value:function(){}},{key:"render",value:function(){var e,t=this,s=this.props.db.getCurrentUser(),n=Object(f.jsx)(ee,{open:this.state.isUserMenuOpen,user:s,db:this.props.db,handleEditProfile:this.handleEditProfile.bind(this),handleSignOut:this.handleSignOut.bind(this),handleSettings:this.openSettings.bind(this),handleClickAway:function(e){t.setState({isUserMenuOpen:!1})}}),i="Guest"!==s.username;return e=i?Object(f.jsxs)("li",{className:"Nav-user",children:[Object(f.jsx)("div",{className:"wrapper",children:Object(f.jsxs)("button",{onClick:function(e){t.setState({isUserMenuOpen:!0})},children:[Object(f.jsx)(k,{user:s,db:this.props.db}),Object(f.jsx)("span",{className:"Nav-username",children:s.username})]})}),this.state.isUserMenuOpen?n:""]}):Object(f.jsx)("li",{className:"Nav-user",children:Object(f.jsxs)("div",{className:"wrapper",children:[Object(f.jsx)(k,{user:s}),Object(f.jsx)("span",{className:"Nav-username",children:s.username})]})}),Object(f.jsxs)("nav",{children:[Object(f.jsxs)(H.c,{children:[Object(f.jsx)(H.a,{path:"/"}),Object(f.jsx)(H.a,{path:"/*",element:Object(f.jsx)(Ae,{})})]}),Object(f.jsxs)("ul",{children:[this.generateMenuButton("Home",Object(f.jsx)(O.d,{})),this.generateMenuButton("Experiences",Object(f.jsx)(te.a,{})),i?"":this.generateSignInButton(),e]}),Object(f.jsx)(g.a,{open:this.state.isSignInOpen,onClose:this.handleSignInClose.bind(this),scroll:"body","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",maxWidth:"md",className:"Nav-Dialog",children:Object(f.jsx)(K,{db:this.props.db,setNavState:this.setState.bind(this)})})]})}}]),s}(i.a.Component)),ae=s(146);s(72);function re(e){var t=Y.tags.map((function(e){return Object(f.jsx)(ce,{value:e})}));return Object(f.jsx)("div",{children:t})}function ce(e){return Object(f.jsxs)("label",{className:"PillCheckbox no-selection",children:[Object(f.jsx)("input",{type:"checkbox",name:"tags",value:e.value}),Object(f.jsx)("span",{children:e.value})]})}var oe=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).onFileChange=function(e){e?function(e){return new Promise((function(t,s){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsDataURL(e)}))}(e).then((function(e){n.setState({dataUri:e})})):n.setState({dataUri:""})},n.state={mainImg:""},n.db=e.db,n}return Object(o.a)(s,[{key:"onMainImgChange",value:function(e){this.setState({mainImg:e})}},{key:"onSubmit",value:function(e){var t,s,n,i;if(e.preventDefault(),"Guest"!==(i=this.db.getCurrentUser().username)){var a={};["name","img","country","city","description","documentation","transportation","accomodation"].forEach((function(e){var t;a[e]=null===(t=document.querySelector("input[name="+e+"],textarea[name="+e+"]"))||void 0===t?void 0:t.value})),a.username=i,a.tags=[],document.querySelectorAll(".PillCheckbox input:checked").forEach((function(e){a.tags.push(e.value)})),a.budget={},a.budget.from=null===(t=document.querySelector("input[name=budgetFrom]"))||void 0===t?void 0:t.value,a.budget.to=null===(s=document.querySelector("input[name=budgetTo]"))||void 0===s?void 0:s.value,a.budget.notes=null===(n=document.querySelector("input[name=budgetNotes]"))||void 0===n?void 0:n.value,this.db.addExp(a),this.props.addSnackbar("success","Experience added successfully")}else this.props.addSnackbar("info","You have to sign in to add experiences.")}},{key:"render",value:function(){var e=this;return Object(f.jsx)("div",{className:"NewExperience",children:Object(f.jsxs)("form",{children:[Object(f.jsx)("h2",{children:"Add Experience"}),Object(f.jsxs)("div",{className:"flex",children:[Object(f.jsx)("span",{children:Object(f.jsx)("img",{src:this.state.mainImg,alt:"\ud83d\uddbc"})}),Object(f.jsx)("input",{type:"text",id:"newExpImg",name:"img",placeholder:"Main image",onChange:function(t){return e.onMainImgChange(t.target.value)}}),Object(f.jsx)("input",{type:"text",id:"newExpName",name:"name",placeholder:"Name"}),Object(f.jsx)("input",{type:"text",id:"newExpCountry",name:"country",placeholder:"Country"}),Object(f.jsx)("input",{type:"text",id:"newExpCity",name:"city",placeholder:"City"}),Object(f.jsx)("textarea",{type:"text",id:"newExpDescription",name:"description",placeholder:"Description"}),Object(f.jsx)("textarea",{id:"newExpDocumentation",name:"documentation",placeholder:"Documentation"}),Object(f.jsxs)("div",{className:"newExpBudget",children:[Object(f.jsx)("span",{children:"Budget"}),Object(f.jsx)("input",{type:"number",id:"newExpBudgetFrom",name:"budgetFrom",placeholder:"From"}),Object(f.jsx)("input",{type:"number",id:"newExpBudgetTo",name:"budgetTo",placeholder:"To"}),Object(f.jsx)("textarea",{type:"text",id:"newExpBudgetNotes",name:"budgetNotes",placeholder:"Notes"})]}),Object(f.jsx)("textarea",{id:"newExpTrasportation",name:"transportation",placeholder:"Trasnportation"}),Object(f.jsx)("textarea",{id:"newExpAccomodation",name:"accomodation",placeholder:"Accomodation"}),Object(f.jsx)("textarea",{id:"newExpUsefulLinks",name:"usefulLinks",placeholder:"Useful links"}),Object(f.jsx)(re,{}),Object(f.jsx)("button",{className:"button-primary",onClick:function(t){return e.onSubmit(t)},children:"Add experience"})]})]})})}}]),s}(i.a.Component),le=L(oe);s(107);function ue(e,t){return document.querySelector(e+" input[name="+t+"]").value}function de(e,t,s){document.querySelector(e+" input[name="+t+"]").value=s}function he(e){A().addSnackbar;var t=Object(v.d)(),s=Object(U.a)(t,1)[0],i=Object(H.f)();Object(n.useEffect)((function(){var e,t,n={};null!==s.get("searchObject")&&((t=JSON.parse(s.get("searchObject"))).tags=JSON.parse(t.tags),n=t),null===(e=n.tags)||void 0===e||e.forEach((function(e){document.querySelector(".AdvancedOptions .PillCeckbox input[name=".concat(e,"]")).checked=!0})),de(".AdvancedOptions","name",n.name||""),de(".AdvancedOptions","location",n.location||""),de(".AdvancedOptions","author",n.author||"")}),[]);return Object(f.jsx)("div",{className:"AdvancedOptions",children:Object(f.jsx)("form",{className:"form-dialog",onSubmit:function(e){e.preventDefault();var t=".AdvancedOptions",s={};s.name=ue(t,"name"),s.location=ue(t,"location"),s.author=ue(t,"author"),s.tags="";var n=[];document.querySelectorAll(".AdvancedOptions .PillCheckbox input:checked").forEach((function(e){n.push(e.value)})),s.tags=JSON.stringify(n),i("/searchResults?searchObject="+JSON.stringify(s))},action:"searchResult",children:Object(f.jsxs)("div",{className:"flex",children:[Object(f.jsx)("input",{type:"text",name:"name",placeholder:"Name"}),Object(f.jsx)("input",{type:"text",name:"location",placeholder:"Location"}),Object(f.jsx)("input",{type:"text",name:"author",placeholder:"Author"}),Object(f.jsx)(re,{}),Object(f.jsx)("button",{type:"submit",className:"button-submit",children:"Search"})]})})})}function je(e){var t=Object(n.useState)(!1),s=Object(U.a)(t,2),i=s[0],a=s[1],r=Object(v.d)(),c=Object(U.a)(r,1)[0],o=Object(H.f)(),l=function(e){};Object(n.useEffect)((function(){var e,t={};null!==(e=c.get("keyword"))&&(t={keyword:e}),de(".Search","keyword",t.keyword||"")}),[]);return Object(f.jsxs)("div",{className:"Search input-with-send",children:[Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.target.querySelector("input[name=keyword]").value;o("/searchResults?keyword="+t)},children:[Object(f.jsx)("input",{type:"text",name:"keyword",placeholder:"author, name, location,...",className:"main-search",onKeyPress:l,onChange:l}),Object(f.jsx)("button",{type:"button",onClick:function(e){return a(!i)},children:i?Object(f.jsx)(O.b,{}):Object(f.jsx)(O.a,{})})]}),i&&Object(f.jsx)(he,{})]})}var pe=s.p+"static/media/athens.dfe3c0de.jpg",be=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){return Object(c.a)(this,s),t.call(this)}return Object(o.a)(s,[{key:"render",value:function(){return Object(f.jsxs)("main",{className:"Home",children:[Object(f.jsx)("h2",{children:"Find your perfect trip"}),Object(f.jsx)(je,{}),Object(f.jsx)("div",{className:"main-Grid-wrapper",children:Object(f.jsxs)(ae.a,{container:!0,spacing:2,children:[Object(f.jsx)(ae.a,{item:!0,xs:12,md:8,children:Object(f.jsx)(P,{img:pe,h2:"Greece",h1:"Athens"})}),Object(f.jsx)(ae.a,{item:!0,xs:12,md:4,children:Object(f.jsx)(P,{img:b,h2:"Spain",h1:"Madrid"})}),Object(f.jsx)(ae.a,{item:!0,xs:12,md:4,children:Object(f.jsx)(P,{img:m,h2:"Austria",h1:"Vienna"})}),Object(f.jsx)(ae.a,{item:!0,xs:12,md:8,children:Object(f.jsx)(P,{img:x,h2:"England",h1:"London"})})]})})]})}}]),s}(i.a.Component);s(108);function me(e){var t=Object(n.useState)({isNewExpOpen:!1}),s=Object(U.a)(t,2),i=s[0],a=s[1],r=A().addSnackbar;return Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{className:"button-primary",onClick:function(t){!function(e,t,s){"Guest"===e.getCurrentUser().username?t("error","You have to sign in to use that feature."):s()}(e.db,r,(function(e){return a({isNewExpOpen:!0})}))},children:e.text}),Object(f.jsx)(g.a,{open:i.isNewExpOpen,onClose:function(){a({isNewExpOpen:!1})}.bind(this),scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",maxWidth:"lg",className:"Tile-dialog",children:e.children})]})}function xe(e){return Object(f.jsxs)("tr",{className:"UserRow",children:[Object(f.jsx)("td",{children:Object(f.jsx)(S,{user:e.user})}),Object(f.jsxs)("td",{children:[e.user.numberLikes,Object(f.jsx)(O.c,{className:"AiFillHeart"})]})]},e.user.username)}function Oe(e){var t=e.topUsers.map((function(e){return Object(f.jsx)(xe,{user:e})}));return Object(f.jsxs)("table",{className:"UserRanking",children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{className:"UserRow",children:[Object(f.jsx)("th",{children:"Username"}),Object(f.jsx)("th",{children:"Likes"})]})}),Object(f.jsx)("tbody",{children:t})]})}var ge,ve=L(function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).db=e.db,n.state={isNewExpOpen:!1},n}return Object(o.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){return e.setState({})}),12e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"handlePopupClose",value:function(){this.setState({isNewExpOpen:!1})}},{key:"render",value:function(){var e;return e=this.db.getTopExp(4),Object(f.jsxs)("main",{className:"Experiences",children:[Object(f.jsx)("h2",{children:"Experiences"}),Object(f.jsx)(je,{}),Object(f.jsxs)("div",{className:"main-flex",children:[Object(f.jsx)("div",{className:"main-Grid-wrapper main-column-grid",children:Object(f.jsxs)(ae.a,{container:!0,spacing:2,className:"main-Grid-container",children:[Object(f.jsx)(ae.a,{item:!0,xs:12,md:7,children:Object(f.jsx)(V,{exp:F(e.length>=1?e[0]:{}),db:this.db})}),Object(f.jsx)(ae.a,{item:!0,xs:12,md:5,children:Object(f.jsx)(V,{exp:F(e.length>=2?e[1]:{}),db:this.db})}),Object(f.jsx)(ae.a,{item:!0,xs:12,md:8,children:Object(f.jsx)(V,{exp:F(e.length>=3?e[2]:{}),db:this.db})}),Object(f.jsx)(ae.a,{item:!0,xs:12,md:4,children:Object(f.jsx)(V,{exp:F(e.length>=4?e[3]:{}),db:this.db})})]})}),Object(f.jsx)("div",{className:"main-column-users",children:Object(f.jsxs)("aside",{children:[Object(f.jsx)(me,{db:this.db,text:"Add experience",children:Object(f.jsx)(le,{db:this.db})}),Object(f.jsx)(Oe,{topUsers:this.db.getTopUsers(10)})]})})]})]})}}]),s}(i.a.Component)),fe=(s(109),s(142)),ke=s(149),ye=(s(110),function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).state={mainImg:""},n.db=e.db,n}return Object(o.a)(s,[{key:"onMainImgChange",value:function(e){this.setState({mainImg:e})}},{key:"onSubmit",value:function(e){var t;if(e.preventDefault(),"Guest"!==(t=this.db.getCurrentUser().username)){var s={};["name","img","description"].forEach((function(e){var t;s[e]=null===(t=document.querySelector("input[name="+e+"],textarea[name="+e+"]"))||void 0===t?void 0:t.value})),s.username=t,this.db.addCollection(s),this.props.addSnackbar("success","Experience added successfully")}else this.props.addSnackbar("info","You have to sign in to add experiences.")}},{key:"render",value:function(){var e=this;return Object(f.jsx)("div",{className:"NewExperience NewCollection",children:Object(f.jsxs)("form",{children:[Object(f.jsx)("h2",{children:"Add Collection"}),Object(f.jsxs)("div",{className:"flex",children:[Object(f.jsx)("span",{children:Object(f.jsx)("img",{src:this.state.mainImg,alt:"\ud83d\uddbc"})}),Object(f.jsx)("input",{type:"text",id:"newCollectionImg",name:"img",placeholder:"Main image",onChange:function(t){return e.onMainImgChange(t.target.value)}}),Object(f.jsx)("input",{type:"text",id:"newCollectionName",name:"name",placeholder:"Name"}),Object(f.jsx)("textarea",{type:"text",id:"newCollectionDescription",name:"description",placeholder:"Description"}),Object(f.jsx)("button",{className:"button-primary",onClick:function(t){return e.onSubmit(t)},children:"Add experience"})]})]})})}}]),s}(i.a.Component)),Se=L(ye),Ce=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).state={user:n.props.db.getCurrentUser(),tabValue:"experiences"},n}return Object(o.a)(s,[{key:"handleTabChange",value:function(e,t){this.setState({tabValue:t})}},{key:"render",value:function(){var e,t=this.props.params,s=this.props.db.getUser(t.username);if("experiences"===this.state.tabValue){var n=this.props.db.getTopExpByUser(t.username,4);e=Object(f.jsxs)("div",{children:[s.username===this.props.db.getCurrentUser().username&&Object(f.jsx)(me,{db:this.props.db,text:"Add experience",children:Object(f.jsx)(le,{db:this.props.db})}),Object(f.jsxs)(ae.a,{container:!0,spacing:2,className:"main-Grid-container",children:[Object(f.jsx)(ae.a,{item:!0,xs:12,md:7,children:Object(f.jsx)(V,{exp:F(n.length>=1?n[0]:{}),db:this.props.db})}),Object(f.jsx)(ae.a,{item:!0,xs:12,md:5,children:Object(f.jsx)(V,{exp:F(n.length>=2?n[1]:{}),db:this.props.db})}),Object(f.jsx)(ae.a,{item:!0,xs:12,md:8,children:Object(f.jsx)(V,{exp:F(n.length>=3?n[2]:{}),db:this.props.db})}),Object(f.jsx)(ae.a,{item:!0,xs:12,md:4,children:Object(f.jsx)(V,{exp:F(n.length>=4?n[3]:{}),db:this.props.db})})]})]})}else{var i=this.props.db.getCollectionsByUser(t.username,-1);e=Object(f.jsxs)("div",{children:[s.username===this.props.db.getCurrentUser().username&&Object(f.jsx)(me,{db:this.props.db,text:"Add collection",children:Object(f.jsx)(Se,{db:this.props.db})}),Object(f.jsxs)(ae.a,{container:!0,spacing:2,className:"main-Grid-container",children:[Object(f.jsx)(ae.a,{item:!0,xs:12,md:7,children:Object(f.jsx)(M,{collection:i.length>0&&i[0],db:this.props.db})}),Object(f.jsx)(ae.a,{item:!0,xs:12,md:5,children:Object(f.jsx)(M,{collection:i.length>1&&i[1],db:this.props.db})}),Object(f.jsx)(ae.a,{item:!0,xs:12,md:8,children:Object(f.jsx)(M,{collection:i.length>2&&i[2],db:this.props.db})}),Object(f.jsx)(ae.a,{item:!0,xs:12,md:4,children:Object(f.jsx)(M,{collection:i.length>3&&i[3],db:this.props.db})})]})]})}return Object(f.jsxs)("main",{className:"UserProfile",children:[Object(f.jsxs)("h2",{children:[Object(f.jsx)(k,{user:s}),t.username+"'s profile"]}),Object(f.jsxs)(fe.a,{value:this.state.tabValue,onChange:this.handleTabChange.bind(this),TabIndicatorProps:{style:{backgroundColor:"var(--color-primary)"}},textColor:"inherit",style:{color:"var(--color-primary)"},"aria-label":"experiences and collection tabs",classes:{root:"Tabs"},children:[Object(f.jsx)(ke.a,{value:"experiences",label:"Experiences"}),Object(f.jsx)(ke.a,{value:"collections",label:"Collections"})]}),Object(f.jsx)("div",{className:"main-Grid-wrapper",children:e})]})}}]),s}(i.a.Component),Ne=L((ge=Ce,function(e){var t=Object(H.g)();return Object(f.jsx)(ge,Object(h.a)(Object(h.a)({},e),{},{params:t}))}));s(113);function Ue(e){var t=function(e){for(var t=e.length-1;t>0;t--){var s=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[s],e[s]=n}return e}(["Lukas","Julia","Aniya","Archana"]).map((function(e){return Object(f.jsx)("li",{children:e})}));return Object(f.jsx)("footer",{children:Object(f.jsxs)("div",{className:"flex",children:[Object(f.jsx)("div",{className:"column-logo",children:Object(f.jsx)(Ie,{})}),Object(f.jsx)("div",{className:"column-authors",children:Object(f.jsx)("ul",{className:"ul-links",children:t})}),Object(f.jsx)("div",{className:"column-links",children:Object(f.jsxs)("ul",{className:"ul-links",children:[Object(f.jsx)("li",{children:Object(f.jsx)("a",{href:"",children:"FAQ"})}),Object(f.jsx)("li",{children:Object(f.jsxs)("a",{href:"",children:["Terms ","&"," conditions"]})})]})}),Object(f.jsx)("div",{className:"column-icons",children:Object(f.jsxs)("ul",{className:"ul-icons",children:[Object(f.jsx)("li",{children:Object(f.jsx)("a",{href:"",className:"icon-facebook",children:Object(f.jsx)(C.a,{})})}),Object(f.jsx)("li",{children:Object(f.jsx)("a",{href:"",className:"icon-instagram",children:Object(f.jsx)(C.c,{})})}),Object(f.jsx)("li",{children:Object(f.jsx)("a",{href:"",className:"icon-twitter",children:Object(f.jsx)(C.d,{})})})]})})]})})}function we(){var e=A(),t=e.snackbar,s=e.removeSnackbar;return Object(f.jsx)(z,{open:null===t||void 0===t?void 0:t.open,message:null===t||void 0===t?void 0:t.message,severity:null===t||void 0===t?void 0:t.severity,onClose:function(){s(t.severity,t.message)}})}s(114);function Ee(e){var t,s=Object(n.useState)({}),i=Object(U.a)(s,2),a=(i[0],i[1],Object(v.d)()),r=Object(U.a)(a,2),c=r[0],o=(r[1],e.db),l=[];if(null!==(t=c.get("keyword")))l=o.getFilteredExps({keyword:t});else{var u=JSON.parse(c.get("searchObject"));u.tags=JSON.parse(u.tags),l=o.getFilteredExps(u)}var d,h=0,j=-1,p=l.map((function(e){return j++,d=j%2===0?h=Math.round(4*Math.random())+4:12-h,Object(f.jsx)(ae.a,{item:!0,xs:12,md:d,children:Object(f.jsx)(V,{exp:F(e),db:o})})}));return Object(f.jsxs)("main",{className:"SearchResults",children:[Object(f.jsx)("h2",{children:"Search results"}),Object(f.jsx)(je,{}),Object(f.jsx)("div",{className:"main-flex",children:Object(f.jsx)(ae.a,{container:!0,spacing:2,className:"main-Grid-container",children:p})})]})}function Ie(e){return Object(f.jsx)("img",{src:q,alt:"logo",className:"Logo"})}function Ae(e){return Object(f.jsxs)("span",{className:"Brand",children:[Object(f.jsx)(Ie,{}),Object(f.jsx)("h1",{children:"Travelify"})]})}function Le(){return Object(f.jsx)("header",{children:Object(f.jsxs)("div",{className:"header-flex",children:[Object(f.jsx)("div",{className:"header-column-logo",children:Object(f.jsx)(Ae,{})}),Object(f.jsx)("div",{className:"header-column-phrase",children:Object(f.jsx)("span",{className:"phrase",children:'"Discover your next adventure on Travelify"'})})]})})}var Pe=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).db=new Y(n.setCurrentUser.bind(Object(l.a)(n))),n.state={user:n.db.getCurrentUser(),isDatabaseLoaded:!1},n}return Object(o.a)(s,[{key:"setCurrentUser",value:function(e){this.setState({user:e}),console.log("User changed to "+e.username)}},{key:"componentDidMount",value:function(){var e;this.db.loadFromLocalStorage(),this.setState({isDatabaseLoaded:!0}),e=this.db,window.onbeforeunload=function(t){e.saveIntoLocalStorage()}}},{key:"render",value:function(){return Object(f.jsxs)(E,{children:[Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(H.c,{children:Object(f.jsx)(H.a,{path:"/",element:Object(f.jsx)(Le,{})})}),Object(f.jsx)(ie,{db:this.db}),Object(f.jsxs)(H.c,{children:[Object(f.jsx)(H.a,{path:"/destinations",element:Object(f.jsx)("span",{children:"Destinations"})}),Object(f.jsx)(H.a,{path:"/experiences",element:Object(f.jsx)(ve,{db:this.db})}),Object(f.jsx)(H.a,{path:"/searchResults",element:Object(f.jsx)(Ee,{db:this.db})}),Object(f.jsx)(H.a,{path:"/userProfile/:username",element:Object(f.jsx)(Ne,{db:this.db})}),Object(f.jsx)(H.a,{path:"/",element:Object(f.jsx)(be,{})})]}),undefined,Object(f.jsx)(Ue,{})]}),Object(f.jsx)(we,{})]})}}]),s}(i.a.Component),Me=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,151)).then((function(t){var s=t.getCLS,n=t.getFID,i=t.getFCP,a=t.getLCP,r=t.getTTFB;s(e),n(e),i(e),a(e),r(e)}))};r.a.render(Object(f.jsx)(i.a.StrictMode,{children:Object(f.jsx)(v.a,{basename:"/",children:Object(f.jsx)(Pe,{})})}),document.getElementById("root")),Me()},26:function(e,t,s){},69:function(e,t,s){},70:function(e,t,s){},72:function(e,t,s){},96:function(e,t,s){},97:function(e,t,s){},98:function(e,t,s){}},[[115,1,2]]]);
//# sourceMappingURL=main.eb2b4da4.chunk.js.map