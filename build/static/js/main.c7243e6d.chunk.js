(this["webpackJsonpfinal-project"]=this["webpackJsonpfinal-project"]||[]).push([[0],{102:function(e,t,n){},103:function(e,t,n){},104:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){},114:function(e,t,n){},115:function(e,t,n){},116:function(e,t,n){},119:function(e,t,n){},120:function(e,t,n){},121:function(e,t,n){"use strict";n.r(t);var s=n(2),i=n.n(s),r=n(37),a=n.n(r),c=(n(102),n(16)),o=n(17),l=n(51),d=n(20),u=n(19),j=(n(28),n(103),n(25)),b=n(18),h=n.p+"static/media/colleseum.9508f973.jpg",p=n.p+"static/media/madrid.34925a2b.jpg",m=n.p+"static/media/vienna.4dc4c94d.jpg",x=n.p+"static/media/london.425bc017.jpg",O=n(9),f=(n(72),n(104),n(39)),g=n(151),v=(n(73),n(29)),y=n(1);function k(e){return""===e.user.profileImg?Object(y.jsx)("span",{className:"UserAvatar",style:{backgroundColor:e.user.defaultAvatarColor},children:Object(y.jsx)("span",{children:e.user.username.charAt(0).toUpperCase()})}):Object(y.jsx)("img",{className:"UserAvatar",src:e.user.profileImg,alt:"User avatar"})}var C=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.user,t=void 0===this.props.isWithUserCard,n="";return void 0===e?Object(y.jsx)("span",{children:"User undefined"}):(t&&(n=Object(y.jsxs)("div",{className:"User-card",children:[Object(y.jsx)(k,{user:e}),Object(y.jsx)("span",{children:e.username}),Object(y.jsxs)("span",{children:[Object(y.jsx)(f.c,{}),e.numberLikes]})]})),Object(y.jsx)("div",{className:"User",children:Object(y.jsxs)(v.b,{to:"/userProfile/".concat(e.username),children:[Object(y.jsxs)("span",{children:[Object(y.jsx)(k,{user:e}),Object(y.jsx)("span",{className:"username",children:e.username})]}),n]})}))}}]),n}(i.a.Component),S=C,w=n(43),N=n(81),U=i.a.createContext({snackbar:null,addSnackbar:function(){},removeSnackbar:function(){},confirmation:null,askForConfirmation:function(){},removeConfirmation:function(){}});function E(e){var t=e.children,n=Object(s.useState)(null),i=Object(O.a)(n,2),r=i[0],a=i[1],c=Object(s.useState)(null),o=Object(O.a)(c,2),l=o[0],d=o[1],u={snackbar:r,addSnackbar:Object(s.useCallback)((function(e,t){return function(e,t){return a({open:!0,severity:e,message:t})}(e,t)}),[]),removeSnackbar:Object(s.useCallback)((function(e,t){return function(e,t){return a({open:!1,severity:e,message:t})}(e,t)}),[]),confirmation:l,askForConfirmation:Object(s.useCallback)((function(e,t){return function(e,t){return d({open:!0,question:e,onConfirm:t})}(e,t)}),[]),removeConfirmation:Object(s.useCallback)((function(){return d({open:!1})}),[])};return Object(y.jsx)(U.Provider,{value:u,children:t})}function I(){var e=Object(s.useContext)(U);return{snackbar:e.snackbar,addSnackbar:e.addSnackbar,removeSnackbar:e.removeSnackbar,confirmation:e.confirmation,askForConfirmation:e.askForConfirmation,removeConfirmation:e.removeConfirmation}}var A=I;var L=function(e){return function(t){var n=A(),s=n.snackbar,i=n.addSnackbar,r=(n.removeSnackbar,n.confirmation,n.askForConfirmation);n.removeConfirmation;return Object(y.jsx)(e,Object(j.a)(Object(j.a)({},t),{},{snackbar:s,addSnackbar:i,askForConfirmation:r}))}},P=n(157),D=n(156),M=n(31);function F(e){var t=Object(s.useState)({isPopupOpen:!1}),n=Object(O.a)(t,2),i=n[0],r=n[1],a=Object(M.a)(),c=Object(P.a)(a.breakpoints.down("md")),o=function(){r({isPopupOpen:!1})};return function(){var t;return void 0!==e.likes&&(t=Object(y.jsxs)("span",{className:"Tile-likes",children:[Object(y.jsx)(f.c,{}),e.likes]})),Object(y.jsxs)("div",{className:"Tile",onClick:"withPopup"===e.type?function(t){i.isPopupOpen||""===e.exp.id||r({isPopupOpen:!0})}:void 0,children:[Object(y.jsx)("img",{src:e.img,alt:e.h1,className:"Tile-img"}),Object(y.jsxs)("div",{className:"h-wrapper",children:[Object(y.jsx)("span",{className:"Tile-h2",children:e.h2}),Object(y.jsx)("span",{className:"Tile-h1",children:e.h1})]}),t,Object(y.jsx)(g.a,{fullScreen:c,open:i.isPopupOpen,onClose:o,scroll:"paper",maxWidth:e.maxWidth||"lg",className:"Tile-dialog",children:Object(y.jsxs)("div",{children:[Object(y.jsx)(T,{handlePopupClose:o}),void 0!==e.popupElement?e.popupElement:Object(y.jsxs)("div",{children:[Object(y.jsx)("img",{src:e.img,alt:e.h1}),Object(y.jsx)("h2",{children:e.h1}),Object(y.jsx)("div",{children:e.likes})]})]})})]})}()}function T(e){return Object(y.jsx)("button",{className:"CloseButton",onClick:e.handlePopupClose,children:"x"})}function B(e){var t,n=Object(s.useState)({}),i=Object(O.a)(n,2),r=(i[0],i[1]),a=A().addSnackbar;t=Object(j.a)({},e.collection);var c=function(){var n,s;return null===(n=t)||void 0===n||null===(s=n.experiences)||void 0===s?void 0:s.map((function(t){return Object(y.jsx)(D.a,{item:!0,xs:12,md:6,children:Object(y.jsx)(Y,{exp:V(t),db:e.db})})}))};return Object(y.jsx)(F,{type:-1!==t.id&&void 0!==t.id&&"withPopup",img:t.img,h1:t.name,h2:t.username,popupElement:function(){var n=e.db.getTopExpByUser(t.username,-1).filter((function(e){return-1!==e.id})).map((function(e){return Object(y.jsx)("option",{value:e.id,children:e.name})})),s=Object(y.jsxs)("div",{className:"addExpToCollection-wrapper",children:[Object(y.jsx)("select",{name:"select-experiences",className:"select-experiences",children:n}),Object(y.jsx)("button",{className:"button-primary",onClick:function(n){return function(){var n=parseInt(document.querySelector("select[name=select-experiences]").value);console.log(t.id),e.db.addToCollection(n,t.id),r({changeState:!0}),a("success","Experience successfully added to the collection!")}()},children:"Add experience"})]});return Object(y.jsxs)("div",{className:"Tile-Dialog-flex CollectionTile",children:[Object(y.jsx)("div",{className:"img-wrapper",style:{position:"relative"},children:Object(y.jsx)("img",{className:"main-img",src:t.img,alt:t.h1||"No experience"})}),Object(y.jsxs)("div",{className:"wrapper",children:[Object(y.jsx)("h2",{children:t.name}),Object(y.jsx)(S,{user:e.db.getUser(t.username)}),Object(y.jsx)("table",{children:Object(y.jsx)("tbody",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:"Description: "}),Object(y.jsx)("td",{children:t.description})]})})}),t.username===e.db.getCurrentUser().username&&s,Object(y.jsx)(D.a,{container:!0,spacing:2,className:"main-Grid-container",children:null!==t&&c()})]})]})}(),exp:t,maxWidth:"md"})}function J(e){return Object(y.jsx)("span",{className:"TagPill",children:e.value})}function V(e){("object"!==typeof e||Array.isArray(e)||null===e)&&(e={});return["id","name","country","city","username","description","documentation","budget","transportation","accomodation"].forEach((function(t){void 0===e[t]&&(e[t]="")})),(void 0===e.likes||!e.likes instanceof Set)&&(e.likes=new Set),void 0!==e.usefulLinks&&Array.isArray(e.usefulLinks)||(e.usefulLinks=[]),void 0!==e.tags&&Array.isArray(e.tags)||(e.tags=[]),void 0!==e.comments&&Array.isArray(e.comments)||(e.comments=[]),e}function R(e){return Object(y.jsxs)("span",{className:"input-with-send",children:[Object(y.jsx)("label",{for:"comment-experience",style:{display:"none"},children:"Comment experience"}),Object(y.jsx)("input",{type:"text",className:"main-search",id:"comment-experience"}),Object(y.jsxs)("button",{onClick:function(t){var n=t.target.closest(".input-with-send").querySelector("input");e.db.postComment(e.exp.id,n.value),n.value="",e.setState({})},children:[Object(y.jsx)(N.a,{}),Object(y.jsx)("span",{style:{display:"none"},children:"Post comment"})]})]})}var Y=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).state={isHeartPresent:!1},s}return Object(o.a)(n,[{key:"generateComment",value:function(e){return Object(y.jsxs)("div",{className:"Tile-Dialog-Comment",children:[Object(y.jsx)(S,{user:this.props.db.getUser(e.username)}),Object(y.jsxs)("span",{className:"date",children:[" ",this.props.db.dateToFullFormat(e.date)]}),Object(y.jsx)("p",{children:e.content})]})}},{key:"showHeart",value:function(){var e=this;this.setState({isHeartPresent:!0}),setTimeout((function(t){return e.setState({isHeartPresent:!1})}),3e3)}},{key:"handleImageDoubleClick",value:function(){"Guest"===this.props.db.getCurrentUser().username?this.openSignInNeedSnackbar():(this.props.db.likeExp(this.props.exp.id),this.showHeart())}},{key:"openSignInNeedSnackbar",value:function(){console.log(this),this.props.addSnackbar("error","You have to sign in to perform that action.")}},{key:"deleteExp",value:function(){this.props.db.deleteExp(this.props.exp.id),this.props.addSnackbar("success","Deleted successfully!")}},{key:"generatePopup",value:function(){for(var e=this,t=this.props.exp,n=t.usefulLinks.map((function(e){return Object(y.jsxs)("span",{children:[Object(y.jsx)("a",{href:e,children:e}),Object(y.jsx)("br",{})]})})),s=[],i=t.comments.length-1;i>=0;i--)s.push(this.generateComment(t.comments[i]));var r=t.tags.map((function(e){return Object(y.jsx)(J,{value:e})})),a="";this.state.isHeartPresent&&(a=Object(y.jsx)(f.c,{className:"big-heart"}));var c=["country","city","description","documentation","budget","transportation","accomodation","usefulLinks","tags"].map((function(e){var s=e.charAt(0).toUpperCase()+e.slice(1),i=t[e];switch(e){case"usefulLinks":s="Useful links",i=n;break;case"budget":i=Object(y.jsxs)("span",{children:[t.budget.from,"\u20ac-",t.budget.to,"\u20ac Notes: ",t.budget.notes]});break;case"tags":i=r}return Object(y.jsxs)("tr",{children:[Object(y.jsxs)("td",{children:[s,": "]}),Object(y.jsx)("td",{children:i})]})})),o="";return this.props.db.getCurrentUser().username===t.username&&(o=Object(y.jsx)("button",{className:"delete-button",onClick:function(n){return e.props.askForConfirmation('Do you really want to delete experience: "'+t.name+'"?',e.deleteExp.bind(e))},children:Object(y.jsx)(w.b,{})})),Object(y.jsxs)("div",{className:"Tile-Dialog-flex",children:[Object(y.jsxs)("div",{className:"Tile-Dialog-column-info",children:[Object(y.jsxs)("div",{style:{position:"relative"},children:[Object(y.jsx)("img",{className:"main-img",src:t.img,alt:t.name,onDoubleClick:function(t){return e.handleImageDoubleClick()}}),a]}),Object(y.jsxs)("div",{className:"wrapper",children:[Object(y.jsx)("h2",{children:t.name}),Object(y.jsx)(S,{user:this.props.db.getUser(t.username)}),Object(y.jsxs)("p",{children:[Object(y.jsx)(f.c,{})," ",t.likes.size]}),o,Object(y.jsx)("table",{children:Object(y.jsx)("tbody",{children:c})})]})]}),Object(y.jsx)("div",{className:"Tile-Dialog-column-comments",children:Object(y.jsxs)("div",{children:[Object(y.jsx)("h3",{children:"Comments"}),"Guest"!==this.props.db.getCurrentUser().username?Object(y.jsx)(R,{exp:t,db:this.props.db,setState:this.setState.bind(this)}):"",s]})})]})}},{key:"render",value:function(){var e=this.props.exp;return Object(y.jsx)(F,{type:"withPopup",img:e.img,h1:e.name,h2:e.username,likes:e.likes.size,popupElement:this.generatePopup(),exp:e})}}]),n}(i.a.Component),q=L(Y),K={username:"Guest",email:"none",profileImg:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADJCAIAAADpZupsAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAw4SURBVHhe7Z1LUxpLGIYDCoLgDY1WxVSZxdlkkU0WpipZ5Ndnk0U2LrKNlTKlEjBGcbiInhe6CyYwM8ylZ6Z7+n0Wc7oh4cSZx/f7ugex9Pz8/IIQ1VCsF4+PjzgJw+Hw6ekJYxzH4zGOAM/OBm7KUzBYX1/HcW1tDVOMAQaVSkU8azPWiQV1RqMRjjBJDJa9Sc7MM0hWq9UsVM0KsQaDATQSR5gkH80WSFatVjc2NsRRPlpcCisW0qjf7zuOI2qcfFQPkF7Qq16vizCTjxaLoomFWHp4eIBPeSVTVJBkCLBms1mwGCuIWMKnXq+nWziFp2CGmS0WNLqbYq5Py8AwVMmtrS0M5EMGYqpYiKjb21t0UXJeRNCBNabIuVEYJlYhIyoY5NbOzg7qo1kBZoxYFirlRnRgMMwUvQwQy3KlFkBlNEIvrcWiUn7or5emYlGplcAqoZeca4aOYjmOc3NzY8oOZ75AL7il4cpRL7EgU7fbLfYmQhrU6/W9vT2tKqNGYt3e3rL2JQHRpU9l1EKswWDQ6XRY+5KD0Do8PNQhuvIXC+0UgkpOiAp0iK48xUJE/f79ezgcyjlRR+7RlZtYSCk0Veyo0qNcLiO3tra25DxbchALMok+Xc5JmkAs6JX9G6OzFovlL3tyKYuZioXVX7vdZvnLHli1v7+f5VsIsxMLtQ8LQDkheTBdLGa0WsxILDRVQE5IfmTmVupiofD9+fPn/v5ezkneNBoNlEU5SY10xYJV19fXbNV1o1qtop1PdamYolhcAOoM3Do4OEhvqZiWWLAKWcXbfzqT6jZEKmFIq4wg1cukXixaZRDpXSzFYqFbR19FqwwCFwuXTPmutWKxoD+7dePAJcOFU+uWSrG63S6tMhRcOLX3RZSJdXt7y11Qo+n1egrvjqgRa3rDhndsjAcXUdXbmRSIJT6fQ06I4aAg4oLKSQKSioU1RafTkRNSCNrtdvJ1fSKxxK1Abi4UDLFnlHCRmEgsVEBaVUiwSEzY3sQXC12eqkaPaEjC6xtTLAQVG/bCk6QixRRL+UYt0RDRbMlJROKIxdbKHmLvyEcWi0XQNtBpxdjZiiwWiqAcEWuIsVUZTSwWQTuJUaYiiMUiaDMoiJEyJYJY/HFTm8EKsdvtykkIworV6/Ucx5ETYiXit6nJySrCisUiSACqVsj9y1BisWcnAmgQ8j7ParHwWqiDckKsB2KFCa3VYjGuiBtYFSa0VojFuCLLhAmtFWKxZyfLhAmtILEYV8SPlaEVJBbjivixMrR8xUJcKflpDVJUgkPLVyxYxcUgCSA4tHzFYh0kK4ksFnp2xhVZCULLr1/yFoufwkBC4lfZPMRi207C0+/3PVt4D7GCl5GELOApjIdYfN8ViUQosZBsbNtJJDxb+EWxeA+HxGC5yi2KxbadxGB5G+EfsVgHSTyWq+E/YrEOktgsVMN/xGIdJLF5eHiQoylzsYbDIesgiQ3kcX8Y+1wsxhVJiFuhuVgLUUZIVNxt1lys0WgkR4TEwqMU+t1KJCQ87k0HKRbjiihhFlrzxBIDQpIwE4mJRVQyE2kiFkojd7CIEiCScGkilruZJyQhQqeJWNwaJQoZj8c4MrGIYuaJJRQjRAmif5+Ixc6dKEQ271gSAvEQIckRmwxlNlhEOXCr/Pz8LGeEKAJtVpkNFlHOJLEoFlHOeDyeNO9yRogiIFbp8vJSw513FOnz8/PuFEy3t7dPTk6Oj4/Fs3Zi0Dmp1Wo6iuU4ztevX5d/uLZer5+enuIo5zZh1jmpVqtlDbfdPc8gECd39sYMqzDrnEyadznUhouLC88zKMBTKAdyYg0mnhPtmvcfP37IkQ+iw7AK487JJLF0E2vlx75ZKJZx50THUkiKgXZitVotOfJha2tLjqzBxHNinlhv3ryRI2sw8ZxoJxbOUcCuDJ6ycJvUxHOinVjr6+t+O354EE/JiU2YeE5KP3/+1G1hKLi4uMAyWyyIUAvAyclJpVIRz9qJKeekXC6X8G+17Q0OjuOcnZ39/fsXX/jh4eHbt289wyA2ab++/iBirRMLV/3Lly/uLxln4dOnT6qufdqvbwT4khFadm1lff/+feEbCVO/O3FRwYvgpZZfHwEmJ3YwEatUKsmZHVxfX8uRCyFEQrcCXgRlUY6soQy55NAO/L7ehG4F//WFDCs8a2tr1pXC7e1tOVpCyIGmU85DgxREXxUgJVp4ObKDiVi2Jda7d+8CvmTIgX4IBFjiptvtwsVv374FZBL+d1gYyokdQKzS/f19p9ORD9gBAgYqyIk/rVYLSYOEw4LOvaaDcwBtE14nzNsK3r9/b1tiHRwclAaDweXlpXzAGs7Pz7E8lJM0+W+KnFjD0dGRdT2W4OTkJIPrbadVoFKpTHosO93CJUe/JSeqwVnFi9tp1SSrhFK29e8zjo+PP3/+rHxPHC/44cMHa39YTeg0EcvmO7uQ4PT0VKEEKLIfP3608N2IM7AkxLH0/Px8d3d3c3MjHrUWLPTOzs6SvHkcq0jUPhzl3FZ2pkzEwjltt9vyYbuBWBcXF1dXV+H3ypH8WAQh86iUAGdjY2NjIhZO4q9fv+TDZAoME4xGI3zjuT2DSWgeUOxQRnESMbD8XWILvH79Gr37RCxMIJZt97NIGuC77tWrVxjIjQZ+zxElzESSYtVqNTEgJAkzkZhYRCXValUM5oklNksJiQ0UwnpQjsV/AEOLJGQWV2Au1ubmphwREgv3zbG5WLMQIyQeboXmYiHHrL0bTZIDebxLIVB+n5/Yw0LFo1hEDc1mU46m/CMWNx1IPFAHgxILNBoNOSIkNMsrv0WxWA1JDBbqIFgUi9WQRGW5DgIPh2x+Wy2JgefWOsUiSVmug8BDLPetREKCQe/kua/u3U7t7OzIESGB+N1i9haLLTwJA7LKsw4CX3vYaZGVBHwmVJBYDC0SAOIKlU1OlvBVB1YxtEgAWOF5tu2CoExiaJEAgld4Qd4wtIgfjUYjIK7AikBiaBFPVm5IrZCGoUWWWRlXYHUaMbSIGygVZv98tTEMLeImTFyBUFEEscK8Fik8IeMKhBILobW7uysnxGICttoXCNs8bW5u8i0PlgMH/O4MLhOhK9/f32cXbzORqlYEUVBf2cVbC1qrSH12tASK+uqkGITv2WdELm38CFcLifG7gCKLVavVWBCtIl6ZitOM7+3t8cO0LCFGERTEEQu8fPmSK8TCg0sc+xfixZQDIoffKyOGkmStFj91IBabrQKT8PomKmcwms1WIUlekRKJhRrMZqt4wCq0Vgkva1In8I84ODiQE1IIWq1W7NZqhoKwqdVqfO9DYUB7E/BDXeFRU8VQj+PtdhCtwEVUdR2VtUf4B/HTAI2m2WyqsgooEwtwR95cqtWq2rvAKsXCOuLo6IhuGQesir3D7odKsYDYgEi+piCZIdb1yveMFL8cELsgdMsI0rtY6sUCdMsIUr1M8ndCp8Hj42O73R6NRnJOdAJ9FSpget/8KYoFnp6erq6u6JZuiG491Xtx6Yol6HQ6vV5PTkjeNJvN3d3dVK0CWYgFbqfICcmP6dZ6FvdIMhIL0K3c2dvby+wtdNmJBfr9frfbRVMv5yQrUPjQqiu5uxySTMUCsOr6+ppuZUnaC0BPshYLYKmImnh3dyfnJE22p6Tdqi+Tg1iCv1MgmZwT1UAm9Ol5/VxCbmIBlsX0yKX8uclTLAFXi8pB7cv9Pb35iwUYXapARLVarSxXf35oIZaA0ZUEdFRop7LZ/AyDRmIBhNbNzY3jOHJOwoGIUvKjNQrRSyzB/f09FoysjGGATGin/H5pYI7oKJYAZbHX61EvP0TtA9nvUYVBX7EArBJ6yTmZorlSAq3FElCvGUYoJTBALIHQazAY2FkcDVJKYIxYAljV7/etau2NU0pgmFgzsHJEcUSAyXkRqdVq29vbOux2xsBUsQTIrbu7O8dxihRghkbUAmaLNQP1UQSYuYZBo0ajUa/XDY2oBQoi1gzjDFtfX4dMhfFpRtHEmjEcDqHXw8PDaDTS7V1fCKdqtQqZNjY2MJCPFovCiuUGMQa9xDGvJEMyVSoVxJI4ykeLixViuUF6iTDDcTwew7M08gyZJExCIK2treGo1R3iDLBOrGWEajjOPBOphql4Fkz/4Bx4A8SgVCpBGgzEETKJsfiTlvLixf8OZE/ImLxqdwAAAABJRU5ErkJggg==",numberLikes:0},W={id:-1,name:"",img:"",country:"",city:"",username:"",description:".",likes:new Set([""]),documentation:"",budget:{from:-1,to:-1,notes:""},transportation:"",accomodation:"",usefulLinks:[],tags:[],comments:[]},G=function(){function e(t){Object(c.a)(this,e),this.colors=["abdee6","cbaacb","ffffb5","ffccb60","f3b0c3","fee1e8","fed7c3","ecd5e3","d4f0f0","cce2cb","b6cfb6","97c1a9","a2e1db"],this.usersMap=new Map([["kingkong",{username:"kingkong",email:"kingkong@gmail.comm",password:"p",defaultAvatarColor:this.getRandomColor(),profileImg:"",numberLikes:0}],["godzilla",{username:"godzilla",email:"gzilla@gmail.comm",password:"p",defaultAvatarColor:this.getRandomColor(),profileImg:"",numberLikes:0}],["charlie",{username:"charlie",email:"ch.arlie@gmail.comm",password:"p",defaultAvatarColor:this.getRandomColor(),profileImg:"",numberLikes:0}],["boris",{username:"boris",email:"boris.sluklov@gmail.comm",password:"p",defaultAvatarColor:this.getRandomColor(),profileImg:"",numberLikes:0}]]),this.topUsersList=[],this.currentUser=K,this.nextExpId=2,this.experiences=[{id:0,name:"Erasmus in Madrid",img:p,country:"Spain",city:"Madrid",username:"kingkong",description:"A whole semester spent in the city of liberty in Europe.",likes:new Set(["godzilla","charlie","boris"]),documentation:"ID for EU Citizens",budget:{from:600,to:800,notes:"Accomodation can be costly."},transportation:"Metro is very good",accomodation:"Nice",usefulLinks:["spain.com","madrid.es"],tags:["cultural","rural","historical","business"],comments:[{username:"godzilla",date:new Date("2021-11-14 21:56:48"),content:"Yo bro, very cool trip bro, wassup btw how ya doin bro, yo cool?"},{username:"boris",date:new Date("2021-11-15 15:01:03"),content:"Hello broder, gud to see you."}]},{id:1,name:"A trip to Rome",img:h,country:"Italy",city:"Rome",username:"godzilla",description:"A week long trip to Rome, we saw many cool places, it was amazing.",likes:new Set(["godzilla","charlie","boris"]),documentation:"ID for EU Citizens",budget:{from:600,to:800,notes:"Accomodation can be costly."},transportation:"Metro is available as well as okay buses.",accomodation:"Cheap on the outskirst but also dirty surroundings",usefulLinks:["italy.com","rome.it"],tags:["cultural","historical"],comments:[{username:"kingkong",date:new Date("2021-11-17 21:40:32"),content:"Hi so did you like it bro?"}]}],this.collections=[],this.appSetCurrentUser=t}return Object(o.a)(e,[{key:"startup",value:function(){this.updateUserLikesAmount(),this.updateTopUsersList(),setInterval(this.updateUserLikesAmount.bind(this),12e3),setInterval(this.updateTopUsersList.bind(this),12e3)}},{key:"setAppSetCurrentUser",value:function(e){this.appSetCurrentUser=e}},{key:"saveIntoLocalStorage",value:function(){this.experiences.forEach((function(e){e.likes=Array.from(e.likes)})),localStorage.setItem("usersMap",JSON.stringify(Object(b.a)(this.usersMap))),localStorage.setItem("experiences",JSON.stringify(this.experiences)),localStorage.setItem("collections",JSON.stringify(this.collections)),localStorage.setItem("currentUser",JSON.stringify(this.currentUser)),localStorage.setItem("nextExpId",JSON.stringify(this.nextExpId)),alert("Database saved!")}},{key:"loadFromLocalStorage",value:function(){var e=new Map(JSON.parse(localStorage.getItem("usersMap"))),t=JSON.parse(localStorage.getItem("experiences")),n=JSON.parse(localStorage.getItem("collections")),s=JSON.parse(localStorage.getItem("currentUser")),i=JSON.parse(localStorage.getItem("nextExpId"));void 0!==e.get("kingkong")&&(this.usersMap=e),null!==t&&(this.experiences=t,this.experiences.forEach((function(e){e.likes=new Set(e.likes),e.comments.forEach((function(e){e.date=new Date(e.date)}))}))),null!==n&&(this.collections=n),null!==s&&(this.currentUser=s),null!==i&&(this.nextExpId=i),console.log("Database loaded."),console.log(this.experiences),console.log(this.collections),console.log(this.usersMap),console.log(this.currentUser),console.log(this.nextExpId),this.startup()}},{key:"updateTopUsersList",value:function(){var e=this;this.topUsersList=[],this.usersMap.forEach((function(t){e.topUsersList.push(t)})),this.topUsersList.sort((function(e,t){return t.numberLikes-e.numberLikes})),this.topUsersList=this.topUsersList.slice(0,10)}},{key:"updateUserLikesAmount",value:function(){var e=new Map(this.usersMap);e.forEach((function(e){e.numberLikes=0})),this.experiences.forEach((function(t){var n=e.get(t.username);void 0!==n&&(n.numberLikes+=t.likes.size)})),this.usersMap=e}},{key:"isSignedIn",value:function(){return"Guest"!==this.getCurrentUser().username}},{key:"getTopUsers",value:function(){return this.topUsersList}},{key:"getTopExp",value:function(e){for(var t=Object(b.a)(this.experiences),n=0;n<t.length;n++)-1===t[n].id&&t.splice(n,1);return t.sort((function(e,t){return t.likes.size-e.likes.size})),t=t.slice(0,e)}},{key:"getExpById",value:function(e){var t,n={};return Number.isInteger(e)&&e<this.experiences.length&&(n=this.experiences[e]),-1===(null===(t=n)||void 0===t?void 0:t.id)?null:n}},{key:"getFilteredExps",value:function(e){if(null!==e){var t=[];if(void 0!==e.keyword&&null!==e.keyword){var n=e.keyword.toLowerCase();this.experiences.forEach((function(e){for(var s=0,i=Object.keys(e);s<i.length;s++){var r=e[i[s]];if(("string"===typeof r||r instanceof String)&&r.toLowerCase().includes(n)){-1!==e.id&&t.push(e);break}}}))}else{var s=0,i=0;""!==e.name&&i++,""!==e.author&&i++,""!==e.location&&i++,0!==e.tags.length&&i++,this.experiences.forEach((function(n){s=0,n.name.toLowerCase().includes(e.name.toLowerCase())&&""!==e.name&&s++,n.username.toLowerCase().includes(e.author.toLowerCase())&&""!==e.author&&s++,(n.city.toLowerCase().includes(e.location.toLowerCase())&&""!==e.location||n.country.toLowerCase().includes(e.location.toLowerCase())&&""!==e.location)&&s++;e:for(var r=0;r<e.tags.length;r++)for(var a=e.tags[r],c=0;c<n.tags.length;c++){if(a===n.tags[c]){s++;break e}}-1!==n.id&&s===i&&t.push(n)}))}return t}}},{key:"addExp",value:function(e){V(e),console.log(e),e.id=this.nextExpId++,void 0!==e&&this.experiences.push(e)}},{key:"deleteExp",value:function(e){var t=this.experiences[e];t.id===e&&t.username===this.currentUser.username&&(this.experiences[e]=W)}},{key:"likeExp",value:function(e){var t,n=this.getExpById(e);"Guest"!==(t=this.getCurrentUser().username)&&n.likes.add(t),console.log(n.likes)}},{key:"signupUser",value:function(e){if(!0===["username","email","password","confirmPassword"].some((function(t){return void 0===e[t]||""===e[t]})))return"Missing user data.";if(e.password!==e.confirmPassword)return"Passwords do not match.";if(delete e.confirmPassword,this.usersMap.has(e.username))return"Username already taken.";var t=!1;return this.usersMap.forEach((function(n){n.email===e.email&&(t=!0)})),!0===t?"Email is already used.":(e.numberLikes=0,e.profileImg="",e.defaultAvatarColor=this.getRandomColor(),this.usersMap.set(e.username,e),"")}},{key:"signInUser",value:function(e,t){var n=this.getUser(e);return void 0===n?null:n.password===t?(this.setCurrentUser(n),n):null}},{key:"logoutUser",value:function(){this.setCurrentUser(K),localStorage.removeItem("currentUser")}},{key:"getUser",value:function(e){return this.usersMap.get(e)}},{key:"setCurrentUser",value:function(e){this.currentUser=e,this.appSetCurrentUser(this.currentUser)}},{key:"getCurrentUser",value:function(){return this.currentUser}},{key:"getRandomColor",value:function(){var e=Math.floor(Math.random()*this.colors.length);return"#"+this.colors[e]}},{key:"updateUser",value:function(e){this.usersMap.set(e.username,e),this.getCurrentUser().username,e.username,this.setCurrentUser(e)}},{key:"getTopExpByUser",value:function(e,t){var n=[];return this.experiences.forEach((function(t){t.username===e&&n.push(t)})),n.sort((function(e,t){return t.likes.size-e.likes.size})),-1!==t&&(n=n.slice(0,t)),n}},{key:"dateToFullFormat",value:function(e){return!e instanceof Date?"":e.getDate().toString().padStart(2,"0")+"-"+(e.getMonth()+1).toString().padStart(2,"0")+"-"+e.getFullYear().toString().padStart(2,"0")+" "+e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")}},{key:"postComment",value:function(e,t){this.isSignedIn()&&this.getExpById(e).comments.push({username:this.getCurrentUser().username,date:new Date,content:t})}},{key:"getCollection",value:function(e){var t=this;if(e>=this.collections.length)return null;var n=this.collections[e].id===e?this.collections[e]:null;if(null===n)return null;void 0===n.experiences&&(n.experiences=[]);var s=Object(j.a)({},n);return s.experiences=null===n||void 0===n?void 0:n.experiences.map((function(e){return t.experiences[e]})),s}},{key:"addCollection",value:function(e){if(e.username===this.getCurrentUser().username){var t={id:-1,name:"",img:"",username:"",description:"",experiences:[]};(t=Object(j.a)({},e)).id=this.collections.length,this.collections.push(t)}}},{key:"addToCollection",value:function(e,t){if(void 0!==e&&null!==e&&void 0!==t&&null!==t){var n=this.getExpById(e),s=this.collections[t];if(n.username===s.username&&n.username===this.getCurrentUser().username){s.experiences.push(e);var i=new Set(s.experiences);s.experiences=Array.from(i)}}}},{key:"getCollectionsByUser",value:function(e,t){for(var n=[],s=0;s<this.collections.length;s++)this.collections[s].username===e&&n.push(this.getCollection(s));return-1!==t&&(n=n.slice(0,t)),n}}]),e}();G.tags=["cultural","rural","historical","business","environmental","eco-tourism"];var Q=G,z=n.p+"static/media/logo.df69d295.png",H=(n(110),n(111),L(function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).state={isFormSignIn:!0},s}return Object(o.a)(n,[{key:"onSignupSubmit",value:function(e){e.preventDefault();var t,n={};["username","email","password","confirmPassword"].forEach((function(e){var t;n[e]=null===(t=document.querySelector(".SignIn input[name="+e+"]"))||void 0===t?void 0:t.value})),""===(t=this.props.db.signupUser(n))?(this.props.addSnackbar("success","Sign in successfull!"),this.onFormSuccess()):this.props.addSnackbar("error",t)}},{key:"onSignInSubmit",value:function(e){var t,n;e.preventDefault();var s,i,r,a;(s=null===(t=document.querySelector(".SignIn input[name=username]"))||void 0===t?void 0:t.value,i=null===(n=document.querySelector(".SignIn input[name=password]"))||void 0===n?void 0:n.value,null!==(r=this.props.db.signInUser(s,i)))?(this.props.addSnackbar("success","Welcome back, "+(null===(a=r)||void 0===a?void 0:a.username)+"!"),this.onFormSuccess()):this.props.addSnackbar("error","Sign in unsuccessful.")}},{key:"onFormSuccess",value:function(){this.props.setNavState({isSignInOpen:!1})}},{key:"genSwitchButton",value:function(e){var t=this;return Object(y.jsx)("button",{className:"button-switch-forms",onClick:function(){return t.setState({isFormSignIn:!t.state.isFormSignIn})},children:e})}},{key:"render",value:function(){var e;return e=!1===this.state.isFormSignIn?Object(y.jsxs)("div",{children:[Object(y.jsx)("h2",{children:"Sign up"}),Object(y.jsx)("span",{className:"under-headline",children:"Save all your favorite experiences!"}),Object(y.jsx)("form",{children:Object(y.jsxs)("div",{className:"flex",children:[Object(y.jsx)("label",{for:"signupUsername",children:"Username"}),Object(y.jsx)("input",{id:"signupUsername",name:"username",placeholder:"Username"}),Object(y.jsx)("label",{for:"signupEmail",children:"Email"}),Object(y.jsx)("input",{id:"signupEmail",name:"email",placeholder:"Email"}),Object(y.jsx)("label",{for:"signupPassword",children:"Password"}),Object(y.jsx)("input",{id:"signupPassword",type:"password",name:"password",placeholder:"Password"}),Object(y.jsx)("label",{for:"signupConfirmPassword",children:"Confirm password"}),Object(y.jsx)("input",{id:"signupConfirmPassword",type:"password",name:"confirmPassword",placeholder:"Confirm password"}),Object(y.jsx)("button",{className:"button-submit",onClick:this.onSignupSubmit.bind(this),children:"Sign up"})]})}),Object(y.jsxs)("span",{children:["Already have an account?",this.genSwitchButton("Sign in")]}),Object(y.jsxs)("span",{className:"disclaimer",children:["By signing up you agree to our",Object(y.jsx)("br",{}),"Terms ","&"," Conditions"]})]}):Object(y.jsxs)("div",{children:[Object(y.jsx)("h2",{children:"Sign in"}),Object(y.jsx)("span",{className:"under-headline",children:"Save all your favorite experiences!"}),Object(y.jsx)("form",{children:Object(y.jsxs)("div",{className:"flex",children:[Object(y.jsx)("label",{for:"signinUsername",children:"Username"}),Object(y.jsx)("input",{id:"signinUsername",name:"username",placeholder:"Username"}),Object(y.jsx)("label",{for:"signinPassword",children:"Password"}),Object(y.jsx)("input",{id:"signinPassword",type:"password",name:"password",placeholder:"Password"}),Object(y.jsx)("button",{className:"button-submit",onClick:this.onSignInSubmit.bind(this),children:"Sign in"})]})}),Object(y.jsxs)("span",{children:["Not registered yet?",this.genSwitchButton("Sign up")]})]}),Object(y.jsx)("div",{className:"SignIn form-dialog",children:e})}}]),n}(i.a.Component))),Z=n(155),X=n(154),$=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e;return Object(y.jsx)(Z.a,{open:this.props.open,autoHideDuration:50*(null===(e=this.props.message)||void 0===e?void 0:e.length)+1e3,onClose:this.props.onClose,anchorOrigin:{vertical:"top",horizontal:"center"},ClickAwayListenerProps:{onClickAway:function(){}},children:Object(y.jsx)(X.a,{onClose:this.props.onClose,severity:this.props.severity,sx:{width:"100%"},children:this.props.message})})}}]),n}(i.a.Component),_=$,ee=n(11),te=(n(112),n(84)),ne=n(83),se=n(82),ie=n(149),re=L(function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).state={isEditProfileOpen:!1,mixedColors:s.props.user.defaultAvatarColor,newProfileImg:s.props.user.profileImg},s}return Object(o.a)(n,[{key:"handleEditProfile",value:function(){this.setState({isEditProfileOpen:!0})}},{key:"handleEditProfileClose",value:function(){this.setState({isEditProfileOpen:!1,mixedColors:this.props.user.defaultAvatarColor})}},{key:"getValueByName",value:function(e){var t;return null===(t=document.querySelector("input[name="+e+"]"))||void 0===t?void 0:t.value}},{key:"onEditProfileSubmit",value:function(e){if(e.preventDefault(),this.props.db.getUser(this.props.user.username).password===this.getValueByName("currentPassword")){var t,n=JSON.parse(JSON.stringify(this.props.db.getUser(this.props.user.username)));if(["defaultAvatarColor","profileImg"].forEach((function(e){var t;n[e]=null===(t=document.querySelector(".UserMenu-Dialog input[name="+e+"]"))||void 0===t?void 0:t.value})),""!==(t=this.getValueByName("password"))){if(t!==this.getValueByName("confirmPassword"))return void this.props.addSnackbar("error","New passwords do not match");n.password=t}this.props.db.updateUser(n),this.props.addSnackbar("success","User data updated.")}else this.props.addSnackbar("error","Wrong current password.")}},{key:"onColorChange",value:function(e){this.setState({mixedColors:e.target.value})}},{key:"onProfileImgChange",value:function(e){this.setState({newProfileImg:e.target.value})}},{key:"render",value:function(){var e=this.props,t=this.props.user;return Object(y.jsx)(ie.a,{onClickAway:e.handleClickAway,children:Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{className:"UserMenu",children:Object(y.jsxs)("div",{className:"UserMenu-flex",children:[Object(y.jsx)(S,{user:t,isWithUserCard:!1}),Object(y.jsx)("hr",{}),Object(y.jsxs)("button",{onClick:this.handleEditProfile.bind(this),children:["Edit profile ",Object(y.jsx)(se.a,{})]}),Object(y.jsxs)("button",{onClick:e.handleSettings,children:["Settings ",Object(y.jsx)(ne.a,{})]}),Object(y.jsxs)("button",{onClick:e.handleSignOut,className:"button-logout",children:["Sign out ",Object(y.jsx)(te.a,{})]})]})}),Object(y.jsx)(g.a,{open:this.state.isEditProfileOpen,onClose:this.handleEditProfileClose.bind(this),scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",maxWidth:"md",className:"UserMenu-Dialog",children:Object(y.jsxs)("div",{className:"form-dialog",children:[Object(y.jsx)("h2",{children:"Edit Profile"}),Object(y.jsx)("form",{children:Object(y.jsxs)("div",{className:"flex",children:[Object(y.jsx)("label",{for:"editUsername",children:"Username"}),Object(y.jsx)("input",{name:"username",id:"editUsername",placeholder:"Username",value:t.username,disabled:!0}),Object(y.jsx)("label",{for:"editEmail",children:"Email"}),Object(y.jsx)("input",{name:"email",id:"editEmail",placeholder:"Email",value:t.email,disabled:!0}),Object(y.jsx)("label",{for:"editCurrentPassword",children:"Current Password"}),Object(y.jsx)("input",{type:"password",id:"editCurrentPassword",name:"currentPassword",placeholder:"Current password"}),Object(y.jsx)("label",{for:"editPassword",children:"Password"}),Object(y.jsx)("input",{type:"password",id:"editPassword",name:"password",placeholder:"Password"}),Object(y.jsx)("label",{for:"editConfirmPassword",children:"Confirm password"}),Object(y.jsx)("input",{type:"password",id:"editConfirmPassword",name:"confirmPassword",placeholder:"Confirm password"}),Object(y.jsxs)("div",{children:[Object(y.jsx)("span",{children:"Avatar color: "}),Object(y.jsxs)("label",{className:"not-hidden",children:[Object(y.jsx)("input",{type:"color",name:"defaultAvatarColor",value:this.state.mixedColors,onChange:this.onColorChange.bind(this)}),Object(y.jsx)("span",{className:"defaultAvatarPreview UserAvatar",style:{backgroundColor:this.state.mixedColors},children:t.username.charAt(0).toUpperCase()})]})]}),Object(y.jsxs)("span",{className:"input-wrapper",children:[Object(y.jsx)("label",{for:"editProfileImg",children:"Profile image"}),Object(y.jsx)("input",{id:"editProfileImg",name:"profileImg",placeholder:"Profile image",value:this.state.newProfileImg,onClick:function(e){return e.target.select()},onChange:this.onProfileImgChange.bind(this)}),Object(y.jsx)("img",{src:this.state.newProfileImg,alt:"",className:"UserAvatar"})]}),Object(y.jsx)("button",{className:"button-submit",onClick:this.onEditProfileSubmit.bind(this),children:"Save changes"})]})})]})})]})})}}]),n}(i.a.Component)),ae=n(85);function ce(e){return Object(y.jsxs)("button",{className:"Nav-button",children:[e.picture," ",Object(y.jsx)("span",{children:e.text})]})}function oe(e){return Object(y.jsx)("button",{className:"Nav-button Nav-signIn-button",onClick:e.onClick,children:"Sign In"})}var le=L(function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).state={isSignedIn:!1,isSignInOpen:!1,isUserMenuOpen:!1,snackbar:{open:!1,severity:"info",message:""}},s}return Object(o.a)(n,[{key:"generateMenuButton",value:function(e,t){return Object(y.jsx)("li",{children:Object(y.jsx)(v.c,{to:"Home"!==e?e.toLowerCase():"/",activeClassName:"Nav-button-selected",children:Object(y.jsx)(ce,{text:e,picture:t})})})}},{key:"generateSignInButton",value:function(){var e=this;return Object(y.jsx)("li",{children:Object(y.jsx)(oe,{onClick:function(t){e.state.isSignInOpen||e.setState({isSignInOpen:!0})}})})}},{key:"handleSignInClose",value:function(){this.setState({isSignInOpen:!1})}},{key:"handleSnackbarClose",value:function(){this.setState({snackbar:{open:!1,severity:this.state.snackbar.severity}})}},{key:"openSettings",value:function(){}},{key:"handleSignOut",value:function(){this.props.db.logoutUser(),this.setState({isUserMenuOpen:!1}),this.props.addSnackbar("success","Bye!")}},{key:"handleEditProfile",value:function(){}},{key:"render",value:function(){var e,t=this,n=this.props.db.getCurrentUser(),s=Object(y.jsx)(re,{open:this.state.isUserMenuOpen,user:n,db:this.props.db,handleEditProfile:this.handleEditProfile.bind(this),handleSignOut:this.handleSignOut.bind(this),handleSettings:this.openSettings.bind(this),handleClickAway:function(e){t.setState({isUserMenuOpen:!1})}}),i="Guest"!==n.username;return e=i?Object(y.jsxs)("li",{className:"Nav-user",children:[Object(y.jsx)("div",{className:"wrapper",children:Object(y.jsxs)("button",{onClick:function(e){t.setState({isUserMenuOpen:!0})},children:[Object(y.jsx)(k,{user:n,db:this.props.db}),Object(y.jsx)("span",{className:"Nav-username",children:n.username})]})}),this.state.isUserMenuOpen?s:""]}):Object(y.jsx)("li",{className:"Nav-user",children:Object(y.jsxs)("div",{className:"wrapper",children:[Object(y.jsx)(k,{user:n}),Object(y.jsx)("span",{className:"Nav-username",children:n.username})]})}),Object(y.jsxs)("nav",{children:[Object(y.jsxs)(ee.c,{children:[Object(y.jsx)(ee.a,{path:"/"}),Object(y.jsx)(ee.a,{path:"/*",element:Object(y.jsx)(Ve,{})})]}),Object(y.jsxs)("ul",{children:[this.generateMenuButton("Home",Object(y.jsx)(f.d,{})),this.generateMenuButton("Experiences",Object(y.jsx)(ae.a,{})),i?"":this.generateSignInButton(),e]}),Object(y.jsx)(g.a,{open:this.state.isSignInOpen,onClose:this.handleSignInClose.bind(this),scroll:"body","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",maxWidth:"md",className:"Nav-Dialog",children:Object(y.jsx)(H,{db:this.props.db,setNavState:this.setState.bind(this)})})]})}}]),n}(i.a.Component));n(75);function de(e){var t=Q.tags.map((function(e){return Object(y.jsx)(ue,{value:e})}));return Object(y.jsx)("div",{children:t})}function ue(e){return Object(y.jsxs)("label",{className:"PillCheckbox no-selection",children:[Object(y.jsx)("input",{type:"checkbox",name:"tags",value:e.value}),Object(y.jsx)("span",{children:e.value})]})}var je=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).onFileChange=function(e){e?function(e){return new Promise((function(t,n){var s=new FileReader;s.onload=function(e){t(e.target.result)},s.readAsDataURL(e)}))}(e).then((function(e){s.setState({dataUri:e})})):s.setState({dataUri:""})},s.state={mainImg:""},s.db=e.db,s}return Object(o.a)(n,[{key:"onMainImgChange",value:function(e){this.setState({mainImg:e})}},{key:"onSubmit",value:function(e){var t,n,s,i;if(e.preventDefault(),"Guest"!==(i=this.db.getCurrentUser().username)){var r={};["name","img","country","city","description","documentation","transportation","accomodation"].forEach((function(e){var t;r[e]=null===(t=document.querySelector("input[name="+e+"],textarea[name="+e+"]"))||void 0===t?void 0:t.value})),r.username=i,r.tags=[],document.querySelectorAll(".PillCheckbox input:checked").forEach((function(e){r.tags.push(e.value)})),r.budget={},r.budget.from=null===(t=document.querySelector("input[name=budgetFrom]"))||void 0===t?void 0:t.value,r.budget.to=null===(n=document.querySelector("input[name=budgetTo]"))||void 0===n?void 0:n.value,r.budget.notes=null===(s=document.querySelector("textarea[name=budgetNotes]"))||void 0===s?void 0:s.value,this.db.addExp(r),this.props.addSnackbar("success","Experience added successfully")}else this.props.addSnackbar("info","You have to sign in to add experiences.")}},{key:"render",value:function(){var e=this;return Object(y.jsx)("div",{className:"NewExperience",children:Object(y.jsxs)("form",{children:[Object(y.jsx)("h2",{children:"Add Experience"}),Object(y.jsxs)("div",{className:"flex",children:[Object(y.jsx)("span",{children:Object(y.jsx)("img",{src:this.state.mainImg,alt:"\ud83d\uddbc"})}),Object(y.jsx)("label",{for:"newExpImg",children:"Main image"}),Object(y.jsx)("input",{type:"text",id:"newExpImg",name:"img",placeholder:"Main image",onChange:function(t){return e.onMainImgChange(t.target.value)}}),Object(y.jsx)("label",{for:"newExpName",children:"Name"}),Object(y.jsx)("input",{type:"text",id:"newExpName",name:"name",placeholder:"Name"}),Object(y.jsx)("label",{for:"newExpCountry",children:"Country"}),Object(y.jsx)("input",{type:"text",id:"newExpCountry",name:"country",placeholder:"Country"}),Object(y.jsx)("label",{for:"newExpCity",children:"City"}),Object(y.jsx)("input",{type:"text",id:"newExpCity",name:"city",placeholder:"City"}),Object(y.jsx)("label",{for:"newExpDescription",children:"Description"}),Object(y.jsx)("textarea",{type:"text",id:"newExpDescription",name:"description",placeholder:"Description"}),Object(y.jsx)("label",{for:"newExpDocumentation",children:"Documentation"}),Object(y.jsx)("textarea",{id:"newExpDocumentation",name:"documentation",placeholder:"Documentation"}),Object(y.jsxs)("div",{className:"newExpBudget",children:[Object(y.jsx)("span",{children:"Budget"}),Object(y.jsx)("label",{for:"newExpBudgetFrom",children:"Budget From"}),Object(y.jsx)("input",{type:"number",id:"newExpBudgetFrom",name:"budgetFrom",placeholder:"From"}),Object(y.jsx)("label",{for:"newExpBudgetTo",children:"Budget To"}),Object(y.jsx)("input",{type:"number",id:"newExpBudgetTo",name:"budgetTo",placeholder:"To"}),Object(y.jsx)("label",{for:"newExpBudgetNotes",children:"Budget notes"}),Object(y.jsx)("textarea",{type:"text",id:"newExpBudgetNotes",name:"budgetNotes",placeholder:"Notes"})]}),Object(y.jsx)("label",{for:"newExpTrasportation",children:"Transportation"}),Object(y.jsx)("textarea",{id:"newExpTrasportation",name:"transportation",placeholder:"Trasnportation"}),Object(y.jsx)("label",{for:"newExpAccomodation",children:"Accomodation"}),Object(y.jsx)("textarea",{id:"newExpAccomodation",name:"accomodation",placeholder:"Accomodation"}),Object(y.jsx)("label",{for:"newExpUsefulLinks",children:"Useful links"}),Object(y.jsx)("textarea",{id:"newExpUsefulLinks",name:"usefulLinks",placeholder:"Useful links"}),Object(y.jsx)(de,{}),Object(y.jsx)("button",{className:"button-primary",onClick:function(t){return e.onSubmit(t)},children:"Add experience"})]})]})})}}]),n}(i.a.Component),be=L(je);n(113);function he(e,t){return document.querySelector(e+" input[name="+t+"]").value}function pe(e,t,n){document.querySelector(e+" input[name="+t+"]").value=n}function me(e){A().addSnackbar;var t=Object(v.d)(),n=Object(O.a)(t,1)[0],i=Object(ee.f)();Object(s.useEffect)((function(){var e,t,s={};null!==n.get("searchObject")&&((t=JSON.parse(n.get("searchObject"))).tags=JSON.parse(t.tags),s=t),null===(e=s.tags)||void 0===e||e.forEach((function(e){document.querySelector(".AdvancedOptions .PillCeckbox input[name=".concat(e,"]")).checked=!0})),pe(".AdvancedOptions","name",s.name||""),pe(".AdvancedOptions","location",s.location||""),pe(".AdvancedOptions","author",s.author||"")}),[]);return Object(y.jsx)("div",{className:"AdvancedOptions",children:Object(y.jsx)("form",{className:"form-dialog",onSubmit:function(e){e.preventDefault();var t=".AdvancedOptions",n={};n.name=he(t,"name"),n.location=he(t,"location"),n.author=he(t,"author"),n.tags="";var s=[];document.querySelectorAll(".AdvancedOptions .PillCheckbox input:checked").forEach((function(e){s.push(e.value)})),n.tags=JSON.stringify(s),i("/searchResults?searchObject="+JSON.stringify(n))},action:"searchResult",children:Object(y.jsxs)("div",{className:"flex",children:[Object(y.jsx)("input",{type:"text",name:"name",placeholder:"Name"}),Object(y.jsx)("input",{type:"text",name:"location",placeholder:"Location"}),Object(y.jsx)("input",{type:"text",name:"author",placeholder:"Author"}),Object(y.jsx)(de,{}),Object(y.jsx)("button",{type:"submit",className:"button-submit",children:"Search"})]})})})}function xe(e){var t=Object(s.useState)(!1),n=Object(O.a)(t,2),i=n[0],r=n[1],a=Object(v.d)(),c=Object(O.a)(a,1)[0],o=Object(ee.f)(),l=function(e){};Object(s.useEffect)((function(){var e,t={};null!==(e=c.get("keyword"))&&(t={keyword:e}),pe(".Search","keyword",t.keyword||"")}),[]);return Object(y.jsxs)("div",{className:"Search input-with-send",children:[Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.target.querySelector("input[name=keyword]").value;o("/searchResults?keyword="+t)},label:"",children:[Object(y.jsx)("label",{for:"main-search",style:{display:"none"},children:"Main search"}),Object(y.jsx)("input",{id:"main-search",type:"text",name:"keyword",placeholder:"author, name, location,...",className:"main-search",onKeyPress:l,onChange:l}),Object(y.jsxs)("button",{type:"button",onClick:function(e){return r(!i)},children:[i?Object(y.jsx)(f.b,{}):Object(y.jsx)(f.a,{}),Object(y.jsx)("span",{style:{display:"none"},children:"Extend/hide advanced options"})]})]}),i&&Object(y.jsx)(me,{})]})}var Oe=n.p+"static/media/athens.dfe3c0de.jpg",fe=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(c.a)(this,n),t.call(this)}return Object(o.a)(n,[{key:"render",value:function(){return Object(y.jsxs)("main",{className:"Home",children:[Object(y.jsx)("h2",{children:"Find your perfect trip"}),Object(y.jsx)(xe,{}),Object(y.jsx)("div",{className:"main-Grid-wrapper",children:Object(y.jsxs)(D.a,{container:!0,spacing:2,children:[Object(y.jsx)(D.a,{item:!0,xs:12,md:8,children:Object(y.jsx)(F,{img:Oe,h2:"Greece",h1:"Athens"})}),Object(y.jsx)(D.a,{item:!0,xs:12,md:4,children:Object(y.jsx)(F,{img:p,h2:"Spain",h1:"Madrid"})}),Object(y.jsx)(D.a,{item:!0,xs:12,md:4,children:Object(y.jsx)(F,{img:m,h2:"Austria",h1:"Vienna"})}),Object(y.jsx)(D.a,{item:!0,xs:12,md:8,children:Object(y.jsx)(F,{img:x,h2:"England",h1:"London"})})]})})]})}}]),n}(i.a.Component);n(114);function ge(e){var t=Object(s.useState)({isNewExpOpen:!1}),n=Object(O.a)(t,2),i=n[0],r=n[1],a=A().addSnackbar;return Object(y.jsxs)("div",{children:[Object(y.jsx)("button",{className:"button-primary",onClick:function(t){!function(e,t,n){"Guest"===e.getCurrentUser().username?t("error","You have to sign in to use that feature."):n()}(e.db,a,(function(e){return r({isNewExpOpen:!0})}))},children:e.text}),Object(y.jsx)(g.a,{open:i.isNewExpOpen,onClose:function(){r({isNewExpOpen:!1})}.bind(this),scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",maxWidth:"lg",className:"Tile-dialog",children:e.children})]})}function ve(e){return Object(y.jsxs)("tr",{className:"UserRow",children:[Object(y.jsx)("td",{children:Object(y.jsx)(S,{user:e.user})}),Object(y.jsxs)("td",{children:[e.user.numberLikes,Object(y.jsx)(f.c,{className:"AiFillHeart"})]})]},e.user.username)}function ye(e){var t=e.topUsers.map((function(e){return Object(y.jsx)(ve,{user:e})}));return Object(y.jsxs)("table",{className:"UserRanking",children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{className:"UserRow",children:[Object(y.jsx)("th",{children:"Username"}),Object(y.jsx)("th",{children:"Likes"})]})}),Object(y.jsx)("tbody",{children:t})]})}var ke,Ce=L(function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).db=e.db,s.state={isNewExpOpen:!1},s}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){return e.setState({})}),12e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"handlePopupClose",value:function(){this.setState({isNewExpOpen:!1})}},{key:"render",value:function(){var e;return e=this.db.getTopExp(4),Object(y.jsxs)("main",{className:"Experiences",children:[Object(y.jsx)("h2",{children:"Experiences"}),Object(y.jsx)(xe,{}),Object(y.jsxs)("div",{className:"main-flex",children:[Object(y.jsx)("div",{className:"main-Grid-wrapper main-column-grid",children:Object(y.jsxs)(D.a,{container:!0,spacing:2,className:"main-Grid-container",children:[Object(y.jsx)(D.a,{item:!0,xs:12,md:7,children:Object(y.jsx)(q,{exp:V(e.length>=1?e[0]:{}),db:this.db})}),Object(y.jsx)(D.a,{item:!0,xs:12,md:5,children:Object(y.jsx)(q,{exp:V(e.length>=2?e[1]:{}),db:this.db})}),Object(y.jsx)(D.a,{item:!0,xs:12,md:8,children:Object(y.jsx)(q,{exp:V(e.length>=3?e[2]:{}),db:this.db})}),Object(y.jsx)(D.a,{item:!0,xs:12,md:4,children:Object(y.jsx)(q,{exp:V(e.length>=4?e[3]:{}),db:this.db})})]})}),Object(y.jsx)("div",{className:"main-column-users",children:Object(y.jsxs)("aside",{children:[Object(y.jsx)(ge,{db:this.db,text:"Add experience",children:Object(y.jsx)(be,{db:this.db})}),Object(y.jsx)(ye,{topUsers:this.db.getTopUsers(10)})]})})]})]})}}]),n}(i.a.Component)),Se=(n(115),n(152)),we=n(159),Ne=(n(116),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).state={mainImg:""},s.db=e.db,s}return Object(o.a)(n,[{key:"onMainImgChange",value:function(e){this.setState({mainImg:e})}},{key:"onSubmit",value:function(e){var t;if(e.preventDefault(),"Guest"!==(t=this.db.getCurrentUser().username)){var n={};["name","img","description"].forEach((function(e){var t;n[e]=null===(t=document.querySelector("input[name="+e+"],textarea[name="+e+"]"))||void 0===t?void 0:t.value})),n.username=t,this.db.addCollection(n),this.props.addSnackbar("success","Collection added successfully")}else this.props.addSnackbar("info","You have to sign in to create collections.")}},{key:"render",value:function(){var e=this;return Object(y.jsx)("div",{className:"NewExperience NewCollection",children:Object(y.jsxs)("form",{onSubmit:function(t){return e.onSubmit(t)},children:[Object(y.jsx)("h2",{children:"Add Collection"}),Object(y.jsxs)("div",{className:"flex",children:[Object(y.jsx)("span",{children:Object(y.jsx)("img",{src:this.state.mainImg,alt:"\ud83d\uddbc"})}),Object(y.jsx)("label",{for:"newCollectionImg",children:"Main image"}),Object(y.jsx)("input",{type:"text",id:"newCollectionImg",name:"img",placeholder:"Main image",onChange:function(t){return e.onMainImgChange(t.target.value)}}),Object(y.jsx)("label",{for:"newCollectionName",children:"Name"}),Object(y.jsx)("input",{type:"text",id:"newCollectionName",name:"name",placeholder:"Name"}),Object(y.jsx)("label",{for:"newCollectionDescription",children:"Description"}),Object(y.jsx)("textarea",{type:"text",id:"newCollectionDescription",name:"description",placeholder:"Description"}),Object(y.jsx)("button",{className:"button-primary",children:"Add collection"})]})]})})}}]),n}(i.a.Component)),Ue=L(Ne),Ee=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).state={user:s.props.db.getCurrentUser(),tabValue:"experiences"},s}return Object(o.a)(n,[{key:"handleTabChange",value:function(e,t){this.setState({tabValue:t})}},{key:"render",value:function(){var e,t=this.props.params,n=this.props.db.getUser(t.username);if("experiences"===this.state.tabValue){var s=this.props.db.getTopExpByUser(t.username,4);e=Object(y.jsxs)("div",{children:[n.username===this.props.db.getCurrentUser().username&&Object(y.jsx)(ge,{db:this.props.db,text:"Add experience",children:Object(y.jsx)(be,{db:this.props.db})}),Object(y.jsxs)(D.a,{container:!0,spacing:2,className:"main-Grid-container",children:[Object(y.jsx)(D.a,{item:!0,xs:12,md:7,children:Object(y.jsx)(q,{exp:V(s.length>=1?s[0]:{}),db:this.props.db})}),Object(y.jsx)(D.a,{item:!0,xs:12,md:5,children:Object(y.jsx)(q,{exp:V(s.length>=2?s[1]:{}),db:this.props.db})}),Object(y.jsx)(D.a,{item:!0,xs:12,md:8,children:Object(y.jsx)(q,{exp:V(s.length>=3?s[2]:{}),db:this.props.db})}),Object(y.jsx)(D.a,{item:!0,xs:12,md:4,children:Object(y.jsx)(q,{exp:V(s.length>=4?s[3]:{}),db:this.props.db})})]})]})}else{var i=this.props.db.getCollectionsByUser(t.username,-1);console.log({userCollections:i}),e=Object(y.jsxs)("div",{children:[n.username===this.props.db.getCurrentUser().username&&Object(y.jsx)(ge,{db:this.props.db,text:"Add collection",children:Object(y.jsx)(Ue,{db:this.props.db})}),Object(y.jsxs)(D.a,{container:!0,spacing:2,className:"main-Grid-container",children:[Object(y.jsx)(D.a,{item:!0,xs:12,md:7,children:Object(y.jsx)(B,{collection:i.length>0&&i[0],db:this.props.db})}),Object(y.jsx)(D.a,{item:!0,xs:12,md:5,children:Object(y.jsx)(B,{collection:i.length>1&&i[1],db:this.props.db})}),Object(y.jsx)(D.a,{item:!0,xs:12,md:8,children:Object(y.jsx)(B,{collection:i.length>2&&i[2],db:this.props.db})}),Object(y.jsx)(D.a,{item:!0,xs:12,md:4,children:Object(y.jsx)(B,{collection:i.length>3&&i[3],db:this.props.db})})]})]})}return Object(y.jsxs)("main",{className:"UserProfile",children:[Object(y.jsxs)("h2",{children:[Object(y.jsx)(k,{user:n}),t.username+"'s profile"]}),Object(y.jsxs)(Se.a,{value:this.state.tabValue,onChange:this.handleTabChange.bind(this),TabIndicatorProps:{style:{backgroundColor:"var(--color-primary)"}},textColor:"inherit",style:{color:"var(--color-primary)"},"aria-label":"experiences and collection tabs",classes:{root:"Tabs"},children:[Object(y.jsx)(we.a,{value:"experiences",label:"Experiences"}),Object(y.jsx)(we.a,{value:"collections",label:"Collections"})]}),Object(y.jsx)("div",{className:"main-Grid-wrapper",children:e})]})}}]),n}(i.a.Component),Ie=L((ke=Ee,function(e){var t=Object(ee.g)();return Object(y.jsx)(ke,Object(j.a)(Object(j.a)({},e),{},{params:t}))}));n(119);function Ae(e){var t=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),s=e[t];e[t]=e[n],e[n]=s}return e}(["Lukas","Julia","Aniya","Archana"]).map((function(e){return Object(y.jsx)("li",{children:e})}));return Object(y.jsx)("footer",{children:Object(y.jsxs)("div",{className:"flex",children:[Object(y.jsx)("div",{className:"column-logo",children:Object(y.jsx)(Je,{})}),Object(y.jsx)("div",{className:"column-authors",children:Object(y.jsx)("ul",{className:"ul-links",children:t})}),Object(y.jsx)("div",{className:"column-links",children:Object(y.jsxs)("ul",{className:"ul-links",children:[Object(y.jsx)("li",{children:Object(y.jsx)("a",{href:"",children:"FAQ"})}),Object(y.jsx)("li",{children:Object(y.jsxs)("a",{href:"",children:["Terms ","&"," conditions"]})})]})}),Object(y.jsx)("div",{className:"column-icons",children:Object(y.jsxs)("ul",{className:"ul-icons",children:[Object(y.jsx)("li",{children:Object(y.jsxs)("a",{href:"#f",className:"icon-facebook",children:[Object(y.jsx)(w.a,{}),Object(y.jsx)("span",{style:{display:"none"},children:"Facebook"})]})}),Object(y.jsx)("li",{children:Object(y.jsxs)("a",{href:"#i",className:"icon-instagram",children:[Object(y.jsx)(w.c,{}),Object(y.jsx)("span",{style:{display:"none"},children:"Instagram"})]})}),Object(y.jsx)("li",{children:Object(y.jsxs)("a",{href:"#t",className:"icon-twitter",children:[Object(y.jsx)(w.d,{}),Object(y.jsx)("span",{style:{display:"none"},children:"Twitter"})]})})]})})]})})}var Le=n(150),Pe=n(160),De=n(161),Me=n(162);function Fe(){var e=A(),t=e.snackbar,n=e.removeSnackbar;return Object(y.jsx)(_,{open:null===t||void 0===t?void 0:t.open,message:null===t||void 0===t?void 0:t.message,severity:null===t||void 0===t?void 0:t.severity,onClose:function(){n(t.severity,t.message)}})}function Te(){var e=A(),t=e.confirmation,n=e.removeConfirmation,s=function(){n()};return Object(y.jsxs)(g.a,{open:null===t||void 0===t?void 0:t.open,onClose:s,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",className:"confirmation-dialog",children:[Object(y.jsx)(Le.a,{id:"alert-dialog-title",children:null===t||void 0===t?void 0:t.question}),Object(y.jsx)(Pe.a,{children:Object(y.jsx)(De.a,{id:"alert-dialog-description",children:"Are you sure that you would like to proceed?"})}),Object(y.jsxs)(Me.a,{children:[Object(y.jsx)("button",{onClick:s,className:"button-danger",children:"Cancel"}),Object(y.jsx)("button",{className:"button-confirm",onClick:function(e){s(),t.onConfirm()},children:"Confirm"})]})]})}n(120);function Be(e){var t,n=Object(s.useState)({}),i=Object(O.a)(n,2),r=(i[0],i[1],Object(v.d)()),a=Object(O.a)(r,2),c=a[0],o=(a[1],e.db),l=[];if(null!==(t=c.get("keyword")))l=o.getFilteredExps({keyword:t});else{var d=JSON.parse(c.get("searchObject"));d.tags=JSON.parse(d.tags),l=o.getFilteredExps(d)}var u,j=0,b=-1,h=l.map((function(e){return b++,u=b%2===0?j=Math.round(4*Math.random())+4:12-j,Object(y.jsx)(D.a,{item:!0,xs:12,md:u,children:Object(y.jsx)(q,{exp:V(e),db:o})})}));return Object(y.jsxs)("main",{className:"SearchResults",children:[Object(y.jsx)("h2",{children:"Search results"}),Object(y.jsx)(xe,{}),Object(y.jsx)("div",{className:"main-flex",children:Object(y.jsx)(D.a,{container:!0,spacing:2,className:"main-Grid-container",children:h})})]})}function Je(e){return Object(y.jsx)("img",{src:z,alt:"logo",className:"Logo"})}function Ve(e){return Object(y.jsxs)("span",{className:"Brand",children:[Object(y.jsx)(Je,{}),Object(y.jsx)("h1",{children:"Travelify"})]})}function Re(){return Object(y.jsx)("header",{children:Object(y.jsxs)("div",{className:"header-flex",children:[Object(y.jsx)("div",{className:"header-column-logo",children:Object(y.jsx)(Ve,{})}),Object(y.jsx)("div",{className:"header-column-phrase",children:Object(y.jsx)("span",{className:"phrase",children:'"Discover your next adventure on Travelify"'})})]})})}var Ye=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).db=new Q(s.setCurrentUser.bind(Object(l.a)(s))),s.state={user:s.db.getCurrentUser(),isDatabaseLoaded:!1},s}return Object(o.a)(n,[{key:"setCurrentUser",value:function(e){this.setState({user:e}),console.log("User changed to "+e.username)}},{key:"componentDidMount",value:function(){var e;this.db.loadFromLocalStorage(),this.setState({isDatabaseLoaded:!0}),e=this.db,window.onbeforeunload=function(t){e.saveIntoLocalStorage()}}},{key:"render",value:function(){return Object(y.jsxs)(E,{children:[Object(y.jsxs)("div",{className:"App",children:[Object(y.jsx)(ee.c,{children:Object(y.jsx)(ee.a,{path:"/",element:Object(y.jsx)(Re,{})})}),Object(y.jsx)(le,{db:this.db}),Object(y.jsxs)(ee.c,{children:[Object(y.jsx)(ee.a,{path:"/destinations",element:Object(y.jsx)("span",{children:"Destinations"})}),Object(y.jsx)(ee.a,{path:"/experiences",element:Object(y.jsx)(Ce,{db:this.db})}),Object(y.jsx)(ee.a,{path:"/searchResults",element:Object(y.jsx)(Be,{db:this.db})}),Object(y.jsx)(ee.a,{path:"/userProfile/:username",element:Object(y.jsx)(Ie,{db:this.db})}),Object(y.jsx)(ee.a,{path:"/",element:Object(y.jsx)(fe,{})})]}),undefined,Object(y.jsx)(Ae,{})]}),Object(y.jsx)(Fe,{}),Object(y.jsx)(Te,{})]})}}]),n}(i.a.Component),qe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,164)).then((function(t){var n=t.getCLS,s=t.getFID,i=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),s(e),i(e),r(e),a(e)}))};a.a.render(Object(y.jsx)(i.a.StrictMode,{children:Object(y.jsx)(v.a,{basename:"/",children:Object(y.jsx)(Ye,{})})}),document.getElementById("root")),qe()},28:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},75:function(e,t,n){}},[[121,1,2]]]);
//# sourceMappingURL=main.c7243e6d.chunk.js.map